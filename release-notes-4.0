HTML header: <title>dCache 4.0 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 4.0<br/>
<small>Release notes</small></h1>
</div>

## Highlights

In preparation of upcoming changes, dCache 4.0 contains many small architectural improvements, 
bug fixes and structural changes that will be needed for new features that will be incorporated
into later releases. Apart from greater stability and improved error handling in many circumstances,
there are few user-visible changes in this release.

For systems where local users also tend to be members of VOs, dCache 4.0 brings a helpful change in 
the way group membership is assigned. gPlazma can now be configured so that several authentication 
plugins cooperate in selecting and setting the primary GID of a user account, so that a user can
work in a mixed environment where he or she is recognized through both a local account and a VOMS identity.

In order to facilitate moving clients to using different checksums, the pools can now be configured to 
calculate several checksums for any uploaded file at once. A file may thus get both an ADLER32 and an MD5 
checksum, for example.

## Incompatibilities

The change to gPlazma mentioned above may change the behaviour of some more exotic gPlazma configurations.
In case a configuration exploits the fact that previously, attempts to assign multiple primary GIDs
led to failures, any behaviour built on that assumption will now change because the authentication
plugins will cooperate to assign one of the GIDs as primary and the other as secondary.

## Acknowledgments

Once again, we have received important code contributions from our users. 

We would like to thank Christoph Anton Mitterer for his work on systemd integration, 
Onno Zweers for spotting an https issue with WebDAV, and Robin Wenzel for his contributions
during the HTW course.

## Differences from dCache v3.2

The notes for [release 4.0.0](#release4.0.0) detail the differences
from dCache 3.2.  Please read this section *very carefully* when
upgrading from this version.

## Release 4.0.16

### pool

A short-lived regression in the `dcache pool convert` command was fixed; the command works again.

### scripts

The instructions that are printed out once 'dcache pool convert'
completes successfully now correctly point to the 
property that needs to be updated, namely `pool.plugins.meta`.


### Changelog 4.0.15..4.0.16

<!-- git log 4.0.15..4.0.16 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b602706c09](https://github.com/dcache/dcache/commit/b602706c0953d143f9a5d7110f82e68b9b10edb1)
:   [maven-release-plugin] prepare release 4.0.16

[c34830a7b3](https://github.com/dcache/dcache/commit/c34830a7b31cdf0285283cb1981f056299200380)
:   pool: fix 'dcache pool convert' command

[105b9df7b7](https://github.com/dcache/dcache/commit/105b9df7b78e71672e126eca62ba65d370b62240)
:   scripts: update reference to configuration property

[dbf3dc2f25](https://github.com/dcache/dcache/commit/dbf3dc2f2556a8ca25be5f20f5422f2f6b6d6c0b)
:   pool: fix metadata migration tool to use Path

[1b82ee43de](https://github.com/dcache/dcache/commit/1b82ee43dedaefb1197ffaa1c0e9b022760dd178)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.15

### pool

This release improves dCache's robustness against network errors: In case 
registering a file with PNFS manager fails due to a timeout, the request
is retried transparently. 


### Changelog 4.0.14..4.0.15

<!-- git log 4.0.14..4.0.15 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d80652cb16](https://github.com/dcache/dcache/commit/d80652cb16d4bed4941abb2baa27bd2fcfdd7328)
:   [maven-release-plugin] prepare release 4.0.15

[40818ef57e](https://github.com/dcache/dcache/commit/40818ef57e6066f92c07cb2bda48ac263c954414)
:   vehicles: fail-fast on invalid path

[c821b17e26](https://github.com/dcache/dcache/commit/c821b17e26d80cecc6fe0c12f29729fe1f0f4250)
:   pool: retry request to pnfs manager if timed out

[fd3ac055bf](https://github.com/dcache/dcache/commit/fd3ac055bf528ee1bd69e391d488a47f127a520e)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.14

### door

The current release added  support for a door advertising multiple hostnames or IP addresses.
dCache doors can  now advertise multiple interfaces, including DNS aliases.

### webdav

Milton's OPTIONS handler was returning  a 404 error if an OPTIONS request
targets an entity that did not exist. This behavior deviated from
Apache httpd server and was resulting  in failed uploads for dcache-view.
The current release fixed.


### Changelog 4.0.13..4.0.14

<!-- git log 4.0.13..4.0.14 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5561a75](https://github.com/dcache/dcache/commit/5561a75bb0646c225ce699140ab95bcd4f434c5e)
:   [maven-release-plugin] prepare release 4.0.14

[f9a8084](https://github.com/dcache/dcache/commit/f9a8084965c4fba754484991bb6bb703f45e041c)
:   gplazma.properties: hint to enable roles

[eec385b](https://github.com/dcache/dcache/commit/eec385b3938a85fa76f4a4f0b224da8044585f98)
:   doors: support advertising multiple addresses in LoginBroker

[07a1332](https://github.com/dcache/dcache/commit/07a133239e0cf43a3ddc5bcdbde6e6b12d93cb3b)
:   webdav: do not return 404 for OPTIONS request targeting absent entity

[e4c543d](https://github.com/dcache/dcache/commit/e4c543d75c1657582dfe26a68add9f9db4e4021e)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.13

### dcache-resilience

There was a small regression in the way resilience computes
the number of operations necessary to adjust copies when
a storage unit definition changes.

The current rellease fixed  computation of operation count when storage requirements change.

### ftp

In order to aid diagnosing problems when FTP response being lost, now dcache  logs failures to wrap/encrypt responses.

### webdav

The current release improved error handling for client authentication with OpenID-Connect.
 A more complete set of information is now logged if OIDC delegation fails,
supporting the ability to discover why the delegation failed.


### Changelog 4.0.12..4.0.13

<!-- git log 4.0.12..4.0.13 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4a0a41b](https://github.com/dcache/dcache/commit/4a0a41b28fc4d60d8523b6ad05b8ae44b9abde1d)
:   [maven-release-plugin] prepare release 4.0.13

[5566df3](https://github.com/dcache/dcache/commit/5566df32342ae4f4a9996af3b94d21012cd86ace)
:   scripts: add support for parsing ZooKeeper transaction logs

[cd53a25](https://github.com/dcache/dcache/commit/cd53a2593985dd24a2e55add8aa687c45b606366)
:   ftp: log failures to wrap/encrypt responses

[57a2b50](https://github.com/dcache/dcache/commit/57a2b5061cd64cecf32e6db80cc04265c4e4c2e1)
:   dcache-resilience: fix computation of operation count when storage requirements change

[aaebfe4](https://github.com/dcache/dcache/commit/aaebfe4caf3828e0027674bc02e0f29b3fbcdd44)
:   webdav: log errors if OIDC delegation fails

[5e18652](https://github.com/dcache/dcache/commit/5e1865219d80a800bb25a65ae6661b3f497e18e7)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.12

### ftp

Error reporting in the FTP service has been improved: in some mixed IPv4 / IPv6 scenarios,
only unclear error messages were reported. 


### Changelog 4.0.11..4.0.12

<!-- git log 4.0.11..4.0.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[921fcf22cc](https://github.com/dcache/dcache/commit/921fcf22cc47d8c88201ae170bb49c5c318b9fca)
:   [maven-release-plugin] prepare release 4.0.12

[8d43f6b3b2](https://github.com/dcache/dcache/commit/8d43f6b3b28b346870a9026aba1dede721f5ccd1)
:   ftp: returned error is too vague for meaningful investigation

[2c70ac8c40](https://github.com/dcache/dcache/commit/2c70ac8c40d01d4b87a7773a93ec867bd4de47fa)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.11

### nfs

Situations, where selection process was incomplete could not  be manually recovered
When selection process incomplete, due to `PoolManager` restart, there was no way  to trigger a new selection.
The current release added  two new commands to `nfs door`:  `transfer retry` and `transfer forget`.  

The first command manually re-activates  existing transfer by re-trying selection process. 
The second one should be  used to  completely 'forget' the stale transfer and let client to trigger a fresh selection process.


### Changelog 4.0.10..4.0.11

<!-- git log 4.0.10..4.0.11 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[1fb57bc0](https://github.com/dcache/dcache/commit/1fb57bc005c1039106c074025b9c717a67bc7ad3)
:   [maven-release-plugin] prepare release 4.0.11

[2c55714](https://github.com/dcache/dcache/commit/2c5571451cc29dea7589b6cef4d1e3212cc0900a)
:   nfs: add commands to reactivate stale transfers

[f7b7fa2](https://github.com/dcache/dcache/commit/f7b7fa26c5f1316ff095acd3ed27686ce3af75fb)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.10

### gplazma

gplazma now supports a Fermilab-specific authorization data source in JSON format.

### pool

During active ftp transfers, connection problems would lead to the rather unhelpful error
message "451 General problem". This error reporting was refactored, so that diagnosis
of the cause is now greatly facilitated.

### poolmanager

A potential NullPointerException (that was not observed in real-world usage until now)
was fixed in Pool Manager.

### resilience

A correction to resilience's error handling results in no more reports on
non-resilient (but corrupted) files. 

### spacemanager

In order to facilitate debugging, Space Manager now logs link-group related content
in greater detail.


### Changelog 4.0.9..4.0.10

<!-- git log 4.0.9..4.0.10 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f6a357ef9a](https://github.com/dcache/dcache/commit/f6a357ef9a2e3270b54b6a30c10c3ca3173533ba)
:   [maven-release-plugin] prepare release 4.0.10

[bd37b4e2ef](https://github.com/dcache/dcache/commit/bd37b4e2effe9f83c330c3760816e60f146dcc98)
:   poolmanager: fix migration command if named pool is removed

[c72a4f8912](https://github.com/dcache/dcache/commit/c72a4f8912d2a293bc4e805ae18c361a92fbd71a)
:   dcache-resilience: repair over-aggressive handling of broken file messages

[64f90b4c0e](https://github.com/dcache/dcache/commit/64f90b4c0ecd9599728fbb72b0dcfed272efee04)
:   pool: fix error message for failed active FTP transfers

[00edd07b93](https://github.com/dcache/dcache/commit/00edd07b936bc8c4e8c820039c14a978e7e4634b)
:   fix the project version in pom.xml

[ba6ecef630](https://github.com/dcache/dcache/commit/ba6ecef630faa1c531da7e999dfa9fa2067d1ef5)
:   gplazma-fermi: fix last modified check in junit test

[2e9f266807](https://github.com/dcache/dcache/commit/2e9f26680758032f4cf5eb0d4a34f2b06498daf0)
:   spacemanager: add remote pool monitor debug logging

[04836c16d7](https://github.com/dcache/dcache/commit/04836c16d7b61b91eb4f15abd8340698fa758123)
:   gplazma-fermi: add mapping plugin to support VO group and username from file

[347aedb537](https://github.com/dcache/dcache/commit/347aedb53726344cf81c31703bcb4f5bdd42d14f)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.9

### Changes affecting multiple services

This version removes the (by now unused) directory /var/lib/cell-info
from a default installation. The directory was previously used to store
cell info data. With the introduction of the history service in dCache 3.2.1,
this became obsolete.

A small bug-fix addresses wrong directory permissions on tar or Debian
packages, where the directory /var/lib/dcache/pool-history had the
wrong permissions.

The deprecated properties for configuring alarms have now finally been made 
unavailable.

### chimera

An internal update enables chimera to use PostgreSQL 10.

### nfs

A modification in IP address handling greatly increases the speed of 
NFS client access for Linux clients in mixed IPv4/IPv6 environments.

Prior to Linux 4.12, Linux clients with only an IPv4 address would wait
for (timeout * retry) seconds when connecting to pools with both a v4 and v6 
address. This was [fixed upstream in Linux 4.12](https://github.com/torvalds/linux/commit/6ea44adce91526700535b3150f77f8639ae8c82d), but that fix was not
backported to e.g. RHEL 7 yet.  


### Changelog 4.0.8..4.0.9

<!-- git log 4.0.8..4.0.9 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2f76e7a4a9](https://github.com/dcache/dcache/commit/2f76e7a4a98222bedb9e117d1265bd281244939c)
:   [maven-release-plugin] prepare release 4.0.9

[8a0338b78c](https://github.com/dcache/dcache/commit/8a0338b78c6d0305ab2d82577084802ac11b879c)
:   nfs: filter out IPv6 DS addresses if client connected with v4

[b7c2e58c40](https://github.com/dcache/dcache/commit/b7c2e58c405d8f5d513db3ed18b1620bffea755d)
:   chimera: adjust postgres driver provider to new version schema

[67ff8d620d](https://github.com/dcache/dcache/commit/67ff8d620d3e03df740de006c3df78f127a90f46)
:   [maven-release-plugin] prepare for next development iteration

[210c68ce85](https://github.com/dcache/dcache/commit/210c68ce85d4412312753858773973933ebccd12)
:   skel: remove extraneous cell-info dir

[0039f4f881](https://github.com/dcache/dcache/commit/0039f4f8815e1be13bfd71e664a20f39c5a636da)
:   packaging: add missing chown and chmod on pool-history

[3ed5e40382](https://github.com/dcache/dcache/commit/3ed5e40382d64e31fb04f4fd2939b63aa760e181)
:   skel: make deprecated alarms properties forbidden

## Release 4.0.8

### dcache-frontend

When the history service was not running or there were other issues
with pool connectivity, this was leading to incomplete or missing
JSON data from the history service. This is now fixed.

### webdav

dCache now supports  RFC 3230 clients that request digests using multiple HTTP
headers.


### Changelog 4.0.7..4.0.8

<!-- git log 4.0.7..4.0.8 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[9ccc4f2](https://github.com/dcache/dcache/commit/9ccc4f2e611f37e11ccb96074b6ccbe2640eb8ba)
:   [maven-release-plugin] prepare release 4.0.8

[6bc0ec2](https://github.com/dcache/dcache/commit/6bc0ec2143290dc9ff351eac5581188379eb3cbd)
:   webdav: support multiple RFC 3230 'Want-Digest' headers

[5dcc727](https://github.com/dcache/dcache/commit/5dcc727f3ac29e0af95d366b5550f993fa595beb)
:   dcache-frontend: avoid null dereferencing for incomplete pool history data

[9f095f9](https://github.com/dcache/dcache/commit/9f095f9c32448b6c4ce8c3edf1fc6877fec7c17c)
:   dcache: avoid NPE from initialization race in RestoreRequestsReceiver in HttpPooMgrEngineV3

[099b96a](https://github.com/dcache/dcache/commit/099b96aa2b78e1182ceded69a563511c5a77be57)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.7

### resilience

Logging for cases where file replication was fatally aborted was improved. Previously, alarms 
messages pertained to the PNFSID of the affected files. In rare cases, like when facing 
network congestion, many hundreds of alarms could be created. With this change, alarms messages
refer to the storage unit, and a suffix based on an hourly timestamp is added to the 
alarm message. The alarm will thus be incremented during the hour but a new
alarm will be created (only) hourly; in this way, those receiving
email alerts will receive them once an hour.


### Changelog 4.0.6..4.0.7

<!-- git log 4.0.6..4.0.7 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f2aeaa9cc0](https://github.com/dcache/dcache/commit/f2aeaa9cc0d6ecdfbd5ff28ec819efb199814da4)
:   [maven-release-plugin] prepare release 4.0.7

[af00a51946](https://github.com/dcache/dcache/commit/af00a51946921fc557f6aa8b7d1197a9ff8268bc)
:   alarms: fix broken path

[215206dd06](https://github.com/dcache/dcache/commit/215206dd06d0fa7f7178376ded5669b32a7a920e)
:   [maven-release-plugin] prepare for next development iteration

[c987846933](https://github.com/dcache/dcache/commit/c987846933f686c9def0814b05c046b3d316df81)
:   substituted Calendar for Instance which was failing.

[d2721111b9](https://github.com/dcache/dcache/commit/d2721111b928b7a8989b10bc20640cc522ad56df)
:   dcache-resilience: avoid spamming alarms with abort messages

## Release 4.0.6

### ftp

A bug (that was not observed in real-world settings yet) that might have caused
NullPointerExceptions was fixed in the ftp service.

### httpd

dCache will no longer log a stack-trace if HTTP
requests are made asking for information from the info service when the
info service is not running.

### poolmanager

An earlier change in PoolManager introduced regular broadcasting of the 
stage request queue to various internal listeners. In some cases, this
could lead to erroneous NoRouteToHost  error messages being logged. These
error messages are now being suppressed.

dCache 3.0 introduced a regression where a dCache domain does not
start up if it hosts a poolmanager with poolmanager.conf containing
either the "rc set sameHostCopy" or the "rc set sameHostRetry" command.
This regression was fixed.

### resilience

Error handling within the Resilience service was improved.


### Changelog 4.0.5..4.0.6

<!-- git log 4.0.5..4.0.6 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[44480946d6](https://github.com/dcache/dcache/commit/44480946d68ccd25636e69b820e63b8547f76b0b)
:   [maven-release-plugin] prepare release 4.0.6

[483a90aeda](https://github.com/dcache/dcache/commit/483a90aeda37bde71b29832ca96e52f55da3a3dc)
:   dcache-resilience: handle properly RuntimeExceptions from tasks

[1bc74ba32b](https://github.com/dcache/dcache/commit/1bc74ba32babf0e03116d0d0a3a52d5d7b6b7638)
:   ftp: ensure adapter is closed

[ea690bd082](https://github.com/dcache/dcache/commit/ea690bd08243d762e3c2fa11ef76f92b9673c1d2)
:   ftp: remove rare NullPointerException when proxying data

[775cd7a7f4](https://github.com/dcache/dcache/commit/775cd7a7f418e1c6ac3a0d9161427236d9aa2329)
:   httpd: do not log an exception if info cell not running

[26771a24b2](https://github.com/dcache/dcache/commit/26771a24b2c4a2aab870b67708a046f5543ff1c2)
:   poolmanager: silence NoRouteToCell for stage queue topic

[51c0a3f5c3](https://github.com/dcache/dcache/commit/51c0a3f5c34478d4189acbd59895df9bcc953c8c)
:   poolmanager: fix poolmanager startup with certain poolmanager.conf content

[5a7e6775d3](https://github.com/dcache/dcache/commit/5a7e6775d3fc710abb7cc21a9060209768f98369)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.5

### dcache-resilience

When a checksum or broken file message/error is generated,
Resilience makes a best effort to (a) remove the broken
copy and (b) make another replica. This, of course, is not always possible, particularly if
the broken file is the only accessible copy. This resulted in  faulty behavior 
 particularly the thrashing noted in the case of a restaging operation which results in a checksum error.
This is now fixed.

The current release improved error handling for resilience. 
It fixed  unnecessary Migration Task exceptions resulting from
source pools with no replica in the repository.

Now  it should be possible for Resilience to use pools blocked only for
writes from doors.

### packaging

Upgrading to dCache v3.2 (or newer) was resulting  in a broken dCache
installation due to a missing `services.sh` file. This is now fixed and
upgrade to dCache v3.2 (or newer) from dCache v3.1 (or older) no longer
breaks dCache by removing /usr/share/dcache/lib/services.sh.


### Changelog 4.0.4..4.0.5

<!-- git log 4.0.4..4.0.5 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[929693c](https://github.com/dcache/dcache/commit/929693c0981c26c2a3fb6a8d1610a8cba2bde2d1)
:   [maven-release-plugin] prepare release 4.0.5

[0468c8b](https://github.com/dcache/dcache/commit/0468c8b793d2db17be20ccdd672d7329ce601881)
:   bad commit put DOWN twice

[b6f229b](https://github.com/dcache/dcache/commit/b6f229bdd13f3fdaffee6e2f3834070d70d8273e)
:   dcache-resilience: define non-writable pool to mean p2p-client is disabled

[f0000cd](https://github.com/dcache/dcache/commit/f0000cd75b0764426ebfb6276cca9ac2edd8728a)
:   dcache: fix remote pool monitor wait bug

[dcec6c5](https://github.com/dcache/dcache/commit/dcec6c5edd6ff942e20d794e3720e5d17f9a3aea)
:   dcache-resilience: repair handling of broken files*

[3d0bff3](https://github.com/dcache/dcache/commit/3d0bff3bcf14122ab1531761fdd404ce285fa71e)
:   packaging: check 'services.sh' after old rpm removed

[1b6734b](https://github.com/dcache/dcache/commit/1b6734b606fcf467198f3ff85af471c14e7f60b4)
:   [maven-release-plugin] prepare for next development iteration

[4f991cf](https://github.com/dcache/dcache/commit/4f991cf7a36a9191cf4b50990e936f92043062dc)
:   dcache-resilience: fix bug in source handling with Clear Cache Location messages

## Release 4.0.4

### cells

The current release added explicit ZooKeeper/Curator monitoring. Events generated by ZooKeeper and Curator are now logged in a new, which  may help diagnose
problems that are suspected to come from bad ZooKeeper interaction.

### frontend

The current release improved the error handling to work with Jackson exceptions.


### Changelog 4.0.3..4.0.4

<!-- git log 4.0.3..4.0.4 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[721c637](https://github.com/dcache/dcache/commit/721c637557337beab5b8c5f5d5b6570d5597a20f)
:   [maven-release-plugin] prepare release 4.0.4

[4f05a13](https://github.com/dcache/dcache/commit/4f05a13305b85bb12393b70e6206e1826a44c5be)
:   dcache-resilience: fix wrong assumption about error type in Message

[a667e11](https://github.com/dcache/dcache/commit/a667e1193df4a75ad5df911cadb6a16223f5d4f1)
:   cells: add explicit ZooKeeper/Curator monitoring

[6e3f58d](https://github.com/dcache/dcache/commit/6e3f58d46c58bfa9eab1f9d2671a82076ff164f9)
:   frontend: Map requests with bad JSON to HTTP 400 Bad Request status code

[8091927](https://github.com/dcache/dcache/commit/80919278cff5176978a2ac0575ebb300f0676ffe)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.3

### nfs

NFS door has been updated  to return NFS4ERR_LAYOUTUNAVAILABLE for DOT files.

### star

The current release improved documentation to help  dCache admins to  have a better understanding of how to generate StAR record.

The current release fixed fix printing exception error message for dcache-star script if there's a problem when run with newer versions of Python.


### Changelog 4.0.2..4.0.3

<!-- git log 4.0.2..4.0.3 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[c0d95dc](https://github.com/dcache/dcache/commit/c0d95dcc2fd4ea4afb1bbba5b3cb581e98cb6173)
:   [maven-release-plugin] prepare release 4.0.3

[acf2137](https://github.com/dcache/dcache/commit/acf2137d1974a37a642e3dd9c43557e93ef518fe)
:   nfs: return LAYOUTUNAVAILABLE for DOT files

[feb0d3c](https://github.com/dcache/dcache/commit/feb0d3c48ad83dfc17ab777d70d921f178a00914)
:   star: fix printing exception error message

[fd66ac6](https://github.com/dcache/dcache/commit/fd66ac6f920e4207ad407b04eb66f5b53e5b974a)
:   star: update documentation to provide better description of script

[00e7464](https://github.com/dcache/dcache/commit/00e746475f876f6b197b75a62ac45cbf246790d1)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.2

### gplazma

A previous release introduced the possibility of several authenticatio
plugins cooperating in setting primary group IDs. This patch updates
the multimap plugin so that it can also be used in such a scenario.

### info

The info service collects information about who is allowed to reserve space. 
Since some of this information, like VOs, usernames and gids, may be considered
sensitive information, this update allows admins to control whether or not 
to publish them. The default behaviour is unchanged from the previous behaviour,
i.e. info publishes everything. If a site admin wants to change this,
the `info.limits.show-only-vo-authz` property can be set to `true`.

### nfs

Accessing a nonexisting file on recent NFS implementations could cause a 
FileNotFoundChimeraFsException, which is now caught and properly handled. 

### pool

In rare circumstances, running `info` on a pool could cause a
NullPointerException. This issue has been fixed.

### scripts

The dcache script and manpage still refered explicitely to Java 6. This patch
changes the phrasing of the respective text.


### Changelog 4.0.1..4.0.2

<!-- git log 4.0.1..4.0.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[cd1ebaae54](https://github.com/dcache/dcache/commit/cd1ebaae54d2640b0aa545c2b5de5337d4d1a9b6)
:   [maven-release-plugin] prepare release 4.0.2

[39127754f4](https://github.com/dcache/dcache/commit/39127754f4a6e9e04e70b1cadae8e3ad89d5b855)
:   nfs: fix ServerFault on FileNotFoundHimeraFsException

[c867d0cad6](https://github.com/dcache/dcache/commit/c867d0cad664f802f000feb13bce1b3c47555959)
:   [maven-release-plugin] prepare for next development iteration

[6df84ff96b](https://github.com/dcache/dcache/commit/6df84ff96b8ad30dd627908377fe4fecae59b9ea)
:   scripts: update reference to JDK to avoid mentioning specific java version

[7724b0693a](https://github.com/dcache/dcache/commit/7724b0693ae40a09c8fa9aeeeabfec7dd07ed063)
:   info: allow admin to control whether non-VO / non-FQAN identities are shown

[743093ffcb](https://github.com/dcache/dcache/commit/743093ffcb4557b349df24544b69cbafd805d434)
:   authentication: update multimap to cooperate in generating primary gids

[29c0144cd1](https://github.com/dcache/dcache/commit/29c0144cd1cb0fc20b954eff737b09ad706bd11f)
:   pools: fix NPE from info command at startup

## Release 4.0.1

### chimera

A database deadlock was observed in some rare situations with the latest
3.2 releases. This patch resolves the issue, ensuring trouble-free
chimera operation.


### Changelog 4.0.0..4.0.1

<!-- git log 4.0.0..4.0.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bc32f2c4be](https://github.com/dcache/dcache/commit/bc32f2c4bee3dd2226ab002638fc47eabee71765)
:   [maven-release-plugin] prepare release 4.0.1

[596a316dfb](https://github.com/dcache/dcache/commit/596a316dfbd0303df2173e716a05b4ec8294f1c8)
:   chimera: fix deadlock in Postgres driver

[96a77e3a9f](https://github.com/dcache/dcache/commit/96a77e3a9f9ae080ca0eacbee6026e4775d32145)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.0.0

### Authentication

gPlazma may be configured so that plugins cooperate in building a list
of gids for an authenticated user. Somtimes it is desirable for "group membership" (i.e. gid principals) to
come from multiple sources; for example, a user who known to dCache
personally and is also asserting their VO membership may wish to access
resources based on her identity or based on her VO membership. The new release
changes the plugins' behaviour so that a plugin only adds the first gid as a primary gid 
if there is no existing primary gid for this user. If there is an
existing primary gid then the gid is still added, but as a secondary
gid. 

### Cells

The `system` cell's 'route' command has been improved so it provides a
nicer layout of information and allows filtering out available routes.

### FTP

As a  workaround for a unusual behaviour in the Globus FTP client, dCache no longer logs 
`java.io.IOException: Connection reset by peer` exceptions.

### httpd

It was necessary to update the status gathering methods to allow for correct reporting in
high availability setups. With the current release, all http and frontend services correctly
report all restore requests anywhere in the system.

### NFS

dCache's NFS implementation now supports `COMMIT` operations. 

### Poolmanager

Timeouts in contacting PoolManager no longer result in a stack-trace
being logged.

### RESTful API

With this release, an extensive set of RESTful information services is now available.
The APIs will soon be published separately with documentation.  All of the
services are reachable via the https port 3880.   For the most part, these
services implement GET to return JSON objects describing dCache state.

The basic paths are:

https://host:3880/api/v1/alarms
https://host:3880/api/v1/billing
https://host:3880/api/v1/cells
https://host:3880/api/v1/namespace
https://host:3880/api/v1/id
https://host:3880/api/v1/links
https://host:3880/api/v1/partitions
https://host:3880/api/v1/poolgroups
https://host:3880/api/v1/pools
https://host:3880/api/v1/pool-preferences
https://host:3880/api/v1/restores
https://host:3880/api/v1/units
https://host:3880/api/v1/transfers

From them it is possible to obtain such things as lists of billing records
for a given file, full information on a given pool, including current queue activity,
a list of transfers or restores for a given file, histogram data for pool queues, etc.

Most of these services require the user to have admin authorization and
to express the 'admin' role.   For instance:

curl -k -u $USERNAME#admin:$PASSWD 'https://host:3880/api/v1/billing/reads/$PNFSID'

Fuller information on the subpaths, parameters and descriptions of the
JSON objects returned is forthcoming.

### Scripts 

dCache-StAR now supports PostgreSQL servers on non-standard ports.

The installation on RPM-based systems will now ensure that the user `dcache` is a member of the group `dcache`,
ensuring that admin ssh keys are usable.

### Spacemanager

Error reporting was improved for cases where a user tries to upload into dCache using a space-token where there
is no selectable link for this operation. The error message now includes more details.

### SRM

dCache now allows an SRM client to specify from which linkgroup a
reservation should be made:

dCache, in general, supports space reservation through linkgroups: each space
reservation is bound to a particular linkgroup.  Uploads involving a
reservation automatically select that linkgroup. 

Each linkgroup has an independent set of links.  The set of links within
a single linkgroup may be configured to accept only a subset of all
upload requests; for example, only uploads into a particular path (i.e.,
a specific storage class).

If dCache is configured with more than one linkgroup then it is possible
that an upload is allowed by one linkgroup, but is not acceptable to
another.  Attempts to upload with a reservation made from the "wrong"
linkgroup will fail. Therefore, the user may care from which linkgroup a
reservation is made.

### SRM Manager

If an old configuration still contains references to either of the deprecated 
properties srmmanager.net.port or srmmanager.net.local-hosts, the move away from
these old properties is now documented better.

### Systemtest

Since OpenSSL changed the format of DN strings from a slash-separated to a comma-separated one,
systemtest needed to be updated to work with the new format. 

### WebDAV

dCache now supports RFC 3230-style Want-Digest headers. These allow clients to request 
specific checksumming algorithms. 

WebDAV now issues a warning when https redirects are enabled as, in that situation,
authentication will be done over https but files will be transfered over plain http.

The WebDAV protocol includes a special return code to indicate that a
PUT request was denied because the filesystem is full: 507 Insufficient
Storage. This code is now returned in case the underlying dCache system 
has no available space left.

### xrootd

The xrootd implementation now supports the flag `kxr_posc`, available for the `kXR_open` operation. 
In cases where files may be created but (perhaps due to errors) not properly closed, files could 
end up abandoned with a 0-byte file size. This flag may be used to switch
between two behaviours: having the flag set will persist the file, having it unset will ensure
that such files are cleaned up.

### Changelog from 3.2.0 to 4.0.0

<!-- git log 3.2..4.0 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[0593745d10](https://github.com/dcache/dcache/commit/0593745d1057ee58880acbdcdd3c6c87941839e8)
:   [maven-release-plugin] prepare branch 4.0

[d1aaa0cd0f](https://github.com/dcache/dcache/commit/d1aaa0cd0f95b3854c201bbcb1d7e5e6766a1eea)
:   authentication: allow plugins to cooperate in generating gids

[0576e8a571](https://github.com/dcache/dcache/commit/0576e8a5716396a0e5711d6b0fc4cf1c9fb8f932)
:   webdav.properties: warn about redirects to http.

[55375da263](https://github.com/dcache/dcache/commit/55375da2635feb405b01cdd66e659ab96f048550)
:   systemtest: work with new OpenSSL DN format

[c7960f1df9](https://github.com/dcache/dcache/commit/c7960f1df99e522e3ee534a7e713e49a0113b74f)
:   spacemanager: allow SRM clients to specify linkgroup in reserve requests

[2e10b3df7e](https://github.com/dcache/dcache/commit/2e10b3df7e6d62c247bff4919a57177bf7b9bfb4)
:   srmclient: add support for specifying linkgroup when reserving space

[cbb7868d7b](https://github.com/dcache/dcache/commit/cbb7868d7bf0e7309a3727369d93b65bdb350745)
:   pom: update postgres jdbc driver and HikariCP

[50f7d3b22d](https://github.com/dcache/dcache/commit/50f7d3b22d83451eab314c5652318e4bf45ac12e)
:   dcache-frontend: set killed mover status to CANCELLED on transfer shapshot

[1e2d6a1bb4](https://github.com/dcache/dcache/commit/1e2d6a1bb47a09dc9a34fcc6cb16030708b62f2d)
:   spacemanager: provide space-specific error message on bad upload

[c86eed2b89](https://github.com/dcache/dcache/commit/c86eed2b89901dce113255b2fad8a189a200fec8)
:   webdav: return 507 Insufficient Storage when dCache is full

[d905594c23](https://github.com/dcache/dcache/commit/d905594c235ea2d01db6a6ba0a47cf5948029e74)
:   pnfsmanager: update slow logging admin command help

[38c76ed832](https://github.com/dcache/dcache/commit/38c76ed8322005dc280e63899811bd683aca30f1)
:   dcache-frontend, pools: implement filtering, sorting and paging for pool activity requests

[9a7c8af747](https://github.com/dcache/dcache/commit/9a7c8af747d4a1e4f1418c8ce3e9a9b01bab64bd)
:   dcache-frontend, billing: implement sorting, filtering and paging for record requests

[4a2c45b0b3](https://github.com/dcache/dcache/commit/4a2c45b0b3a5c3c60a010d5a8fb4280c45c28880)
:   dcache-frontend: pool info API changes to support sorting and filtering

[b8f1a7f8e0](https://github.com/dcache/dcache/commit/b8f1a7f8e0d7595676a0a239692055faa1e0bb67)
:   dcache-frontend: billing API changes to support filtering and sorting

[3b31bcc56a](https://github.com/dcache/dcache/commit/3b31bcc56a345eb38101cff45b836b018cd5d933)
:   dcache-frontend: refactor selection resource

[7bedc8c956](https://github.com/dcache/dcache/commit/7bedc8c95658557975e2bd7659e695085e893683)
:   nfs: fix transfer leak, if the door failed to start a mover

[f06bbb7479](https://github.com/dcache/dcache/commit/f06bbb7479181531836cd4bd52cc6b6efdb32f6d)
:   httpd, dcache-frontend: support requests for restore listing when there are multiple pool managers

[7d0435cd2b](https://github.com/dcache/dcache/commit/7d0435cd2b18e0e99750f127235b231833b408ed)
:   pool: fix double logging on remote FTP transfer error

[311718f650](https://github.com/dcache/dcache/commit/311718f650bd333a00e8576b41efddd9b5fea0c1)
:   srmclient: avoid stack-trace and repeated logging

[b905d49c43](https://github.com/dcache/dcache/commit/b905d49c43b7826742b8916409f110b42948951b)
:   srmmanager: provide better hints on obsolete properties

[7b08a3a660](https://github.com/dcache/dcache/commit/7b08a3a660841c9a7a6af531a0a8a0985020d6aa)
:   pool: Fix how certain bugs are logged

[08d93a5817](https://github.com/dcache/dcache/commit/08d93a5817b16a8e65fcf88078b92da0a3f08a45)
:   star: support PostgreSQL running on non-standard TCP ports

[46b4598c30](https://github.com/dcache/dcache/commit/46b4598c30a74f3621486bd0cc123cc9a9860b02)
:   rpm: don't assume existing dcache user is member of dcache group

[334488d193](https://github.com/dcache/dcache/commit/334488d193b23f2e5072fe092daac73a4bdc4b54)
:   cells: don't log stack-trace on starting cell with same name as running cell

[6c6fdc07b7](https://github.com/dcache/dcache/commit/6c6fdc07b70ae3c71491693219a231a984c37a76)
:   statistics: avoid stack-trace on internal timeout

[832bd860b4](https://github.com/dcache/dcache/commit/832bd860b46a8e374877616517b20080d1d70bff)
:   nfs: fix documentation of nfs.enable.pnfsmanager-query-on-move

[8172371192](https://github.com/dcache/dcache/commit/81723711924e275c36416a34727703a398c5efda)
:   admin: do not report attempts to connect to missing cell as a bug

[ee416ed05e](https://github.com/dcache/dcache/commit/ee416ed05e413cc7bb40cfc478e76373edf6ea88)
:   cleaner: shutdown cleanly

[62ca394df9](https://github.com/dcache/dcache/commit/62ca394df9147a0e900f5047114abeaccfb26143)
:   maven: include dcache.service in Debian packages

[8e93126fcb](https://github.com/dcache/dcache/commit/8e93126fcbe0ea1cdf41eaa18df80d27040a647a)
:   pool: fix stack-trace when closing dcap mover connection

[2dfc71f598](https://github.com/dcache/dcache/commit/2dfc71f5983a0030f74d93d1d7dfb630da564da9)
:   admin: upgrade sshd library to 1.6.0

[81e9d17a2c](https://github.com/dcache/dcache/commit/81e9d17a2cd612356157fd26798c5884949c704c)
:   httpd: return 404 status code on an unknown page

[3bc9c497f1](https://github.com/dcache/dcache/commit/3bc9c497f194cfdcdf0515775d538ec53967685e)
:   systemd: adding a global dcache.service which pulls in dcache@*.service

[304374339f](https://github.com/dcache/dcache/commit/304374339f40ee5de5171bec798d9d3d81bade00)
:   packaging: include empty var directory: 'cell-info'

[83ef9ffa71](https://github.com/dcache/dcache/commit/83ef9ffa71d16fd789abc18c9b13fc7d9ca07b21)
:   dcache-frontend: eliminate stray spring resource

[13a5760baa](https://github.com/dcache/dcache/commit/13a5760baa3f39e915f0ba6ae9e33f80e321e083)
:   dcache-frontend: modify pool and pool group API to be more consistent

[bde210e528](https://github.com/dcache/dcache/commit/bde210e52860be9e89787e4e303f85f9d1b30121)
:   webdav: add support for RFC 3230 Want-Digest on PUT requests

[c5650e729f](https://github.com/dcache/dcache/commit/c5650e729f6404f5b05641857945cca898f6df7d)
:   chimera: update schema migration when creating 'lost+found' directory.

[dea4beb746](https://github.com/dcache/dcache/commit/dea4beb746923e6024b8fb6cf94d00e7e0f5468b)
:   caretaker: switch Optional from Guava to Java-8

[2c75e5a111](https://github.com/dcache/dcache/commit/2c75e5a1116a70fba52eb51cdd6cffc44c0a9c18)
:   pool: fix stack-trace on bad command input

[b14f37759a](https://github.com/dcache/dcache/commit/b14f37759ad0a18b0f335fd2e349f38c63b14a97)
:   pool: fix stacktrace on FaultEvent logging

[bb14aa3203](https://github.com/dcache/dcache/commit/bb14aa32037fda4b2599a43101366709bee631d6)
:   system: Don't log stack-trace on fatal JVM error

[af0a7cd9d8](https://github.com/dcache/dcache/commit/af0a7cd9d858f76b4e7ee5e434e1fbddf47ceabb)
:   webdav: restrict RFC 3230 Digest to requested algorithm

[aa7975668b](https://github.com/dcache/dcache/commit/aa7975668b76fc682fc4cc1d7fa8b8d79a2e1291)
:   switch to rsyslog v8 configuration language

[2ece2fbb95](https://github.com/dcache/dcache/commit/2ece2fbb95b3cef82930c119291544117a36ebc6)
:   move logfiles back to /var/log/dcache

[3ae071ebe8](https://github.com/dcache/dcache/commit/3ae071ebe8320133a0a9f8684fd42d4e2af78eac)
:   dcache-frontend: fix ConcurrentModificationException in ReadWriteData

[5d612dc12d](https://github.com/dcache/dcache/commit/5d612dc12d2d974a6da852f3664c10f11e4a1665)
:   srmclient: refactor 'srm' helper script, enforcing environment variables

[ccd7d5aaae](https://github.com/dcache/dcache/commit/ccd7d5aaae3042ba0a1ef69dd5148ebc58270825)
:   history: do not block on startup if PoolManager is not running

[e1f4711c9a](https://github.com/dcache/dcache/commit/e1f4711c9ab1345f89c6db5f2ce2e6e0e90c9b24)
:   dcache-chimera:  use Spring to inject resource dependencies for ChimeraCleaner

[c6645eaa09](https://github.com/dcache/dcache/commit/c6645eaa09e29e104e188c001c6e917bc48e640e)
:   systemd: do not explicitly set StandardOutput=

[f91039318a](https://github.com/dcache/dcache/commit/f91039318a1d213b7c313b5856a8981bdb900533)
:   dcache-frontend: add backend filtering and sorting for snapshot services*

[3df441db5e](https://github.com/dcache/dcache/commit/3df441db5ea4a113c5af073305dccf119c65d87e)
:   dcache-frontend: add backend filtering and sorting for alarms service*

[5f0968069f](https://github.com/dcache/dcache/commit/5f0968069f180f34b6c03edda646020583ed8ee3)
:   dcache-frontend: adjust level of timeout logging

[cdf6aaafb4](https://github.com/dcache/dcache/commit/cdf6aaafb4becf54f3b2618b6267c581cb9d7964)
:   dcache-frontend: adjust REST API for Pool Info Resources

[df6493a7b2](https://github.com/dcache/dcache/commit/df6493a7b24fe51feedd2745d631e52a7d651590)
:   dcache-frontend: change alarms service API to include proper PATCH and DELETE calls*

[8135b51ab9](https://github.com/dcache/dcache/commit/8135b51ab947fc5519caee834511a3d51bd500fb)
:   pool: move space allocation into repository channel

[8dbe29df5b](https://github.com/dcache/dcache/commit/8dbe29df5b0b2923f07f61d26c71909bd402e1db)
:   chimera: fix typo in method name

[c6f8f7c917](https://github.com/dcache/dcache/commit/c6f8f7c917a4c966488d0d6697e47006828b5def)
:   statistics: fix race in "create stat" admin command

[6620983d30](https://github.com/dcache/dcache/commit/6620983d3008921dbf4cfb25ca7e79df18b7d8da)
:   webadmin: remove broken css included only for IE

[1e198b0942](https://github.com/dcache/dcache/commit/1e198b09426acb760846b6bc29ee37636941dd54)
:   webadmin: fix CSS in poolgroup view

[dd8c44d4aa](https://github.com/dcache/dcache/commit/dd8c44d4aa6d54f9d2ce4f86e8f6e70b4f2f1c86)
:   ftpclient: use lambdas

[7adf2a0332](https://github.com/dcache/dcache/commit/7adf2a0332d7b06b757add7159d5e2a76275cce2)
:   core: use lambdas

[0a79fd1350](https://github.com/dcache/dcache/commit/0a79fd1350f80017bd1fa8d134f59400f5a6a6c3)
:   srm-common: use lambdas

[bfe8293ddf](https://github.com/dcache/dcache/commit/bfe8293ddf9cb04c05b88e45ede5ec70893bf9c3)
:   srmclient: use lambdas

[1828ab5bc2](https://github.com/dcache/dcache/commit/1828ab5bc2900cab94f601f1bd0cddf8fcb34f98)
:   resilience: use lambdas

[9e2b73bb3b](https://github.com/dcache/dcache/commit/9e2b73bb3b538b877155fe03d680508723147f32)
:   ftp: use lambdas

[66d1bac7fa](https://github.com/dcache/dcache/commit/66d1bac7faf16b5affdde2c36890bbbba410982c)
:   dache-frontend: fix regression in pool info api

[d74096f019](https://github.com/dcache/dcache/commit/d74096f019afa6b700a8b2898520a34bc42352bf)
:   common: use lambdas

[f84ac19091](https://github.com/dcache/dcache/commit/f84ac190912423ce6d57db6e2fe166a4aa80c386)
:   common-security: use lambdas

[e5b62e12ed](https://github.com/dcache/dcache/commit/e5b62e12ed0ab8670977b20c1dc628e585a8cef2)
:   common-cli: use lambdas

[7a28588374](https://github.com/dcache/dcache/commit/7a28588374c442d63d4df74189467ab493760fa4)
:   chimera: use lambdas

[99b9ad4b86](https://github.com/dcache/dcache/commit/99b9ad4b86bd6d5325f8a97bf4397f7313a4f932)
:   srm: fix stacktrace on database failure

[6964af1f37](https://github.com/dcache/dcache/commit/6964af1f37c5f10fa409454f44a700e78d6335e3)
:    dcache-chimera: rename ChimeraCleaner and   RequestTracker

[b6777469d9](https://github.com/dcache/dcache/commit/b6777469d96bd1bc9f739d3398f40259508dce9b)
:   dcache-chimera: move RequestTracker to org.dcache.chimera.namespace

[1a531efd0b](https://github.com/dcache/dcache/commit/1a531efd0bef2715189234719067bace098597fe)
:   dcache-frontend: fix shutdown not to cause stack trace in collection services

[d1187b74ad](https://github.com/dcache/dcache/commit/d1187b74ad2e3a73a46368c0a7b62c9195814bc1)
:   frontend: use Spring to inject resource dependencies

[5b20a52bb3](https://github.com/dcache/dcache/commit/5b20a52bb3572d656a6fc845deca6e9ba37a3d1e)
:   ftp: add work-around for broken Globus FTP client

[d1bdf6fd4e](https://github.com/dcache/dcache/commit/d1bdf6fd4e66c1a2559a0c1bb7af8b0b058b392a)
:   alarms:  revert LogEntry.compareTo() to throw NPE on null object

[f2f9e624a6](https://github.com/dcache/dcache/commit/f2f9e624a6d0f97125059c0fb6830aca0552a010)
:   nfs: change the way how directory cookies are generated

[a5155ffd0a](https://github.com/dcache/dcache/commit/a5155ffd0a291b17888217b81fd2e8ce94e021bb)
:   resilience: force tag partition checking on scans from admin command and periodic checks

[77204df4fe](https://github.com/dcache/dcache/commit/77204df4fe948726edd86bf874411e40210372b4)
:   alarms: fix natural order comparator to use timestamp first

[4adcade245](https://github.com/dcache/dcache/commit/4adcade245cc1ce0e5b0d0761ffdaaf66e7df0e3)
:   frontend: improve consistency in ObjectMapper

[84f61ced67](https://github.com/dcache/dcache/commit/84f61ced67265b4d73391971cfb7010d9af844cb)
:   nfs: fix COMMIT operation sent to pools

[5f08bd71f4](https://github.com/dcache/dcache/commit/5f08bd71f47acef2683e4265dff8fd48fc2981a4)
:   frontend: consistent naming and placement

[27607d17dd](https://github.com/dcache/dcache/commit/27607d17dd29929c7b2df333ef7bae627b7909b9)
:   frontend: use Spring to create resource objects

[fa177dad34](https://github.com/dcache/dcache/commit/fa177dad348f8407b0373c53dcda77c314f85105)
:   pool: refactor ChecksumMover interface

[c236c4df31](https://github.com/dcache/dcache/commit/c236c4df310bae908dc87e7e9697d979051bb555)
:   pool: light refactoring of ChecksumModule

[8a53321c87](https://github.com/dcache/dcache/commit/8a53321c8798e7c19daef93d4efcad430c5fff83)
:   frontend: serialise Java List objects as JSON List

[63d8375a70](https://github.com/dcache/dcache/commit/63d8375a708d292ddc6b680100fd2acfa77ff3de)
:   pool: remove call to removed command

[4038a2ed9f](https://github.com/dcache/dcache/commit/4038a2ed9fb79c645db2631f331cc6fc53d6cc9f)
:   alarms: fix shutdown timeout

[617b74e55f](https://github.com/dcache/dcache/commit/617b74e55fc2f51ac0d430d785cb01d4e588d6cd)
:   nfs: use verifier4#valueOf() to create verifier from a log value

[9c4e1c6841](https://github.com/dcache/dcache/commit/9c4e1c68418eac9601d507f249d8560dbd082351)
:   dcache-restful-api: batch POST and DELETE on alarms

[bcde997e17](https://github.com/dcache/dcache/commit/bcde997e176a5c96088787024d66b29f552c783b)
:   checksums: minor refactor and drop some dead code

[6f1eab5337](https://github.com/dcache/dcache/commit/6f1eab5337aced41f7ef671d0e600eb5962e6536)
:   pool: bypass checksum validation if namespace does have a current value

[201635ed64](https://github.com/dcache/dcache/commit/201635ed64fa8aba20e2a9589fcdd6404a386ab6)
:   frontend: upgrade to jersey v2.26

[6d93ee6f52](https://github.com/dcache/dcache/commit/6d93ee6f52c86f7a9b0a0ff65b904421127d3f6e)
:   frontend: refactor requestor's identity handling

[8ba8a40d02](https://github.com/dcache/dcache/commit/8ba8a40d021b2c402028479c25987ae802b57e53)
:   pool: avoid 'null' and other nondescript error messages

[a482edd29a](https://github.com/dcache/dcache/commit/a482edd29a7fa3150adf3dc9afc1e401078193e2)
:   core: don't use Jersey's repackaged Guava

[fefa20ec11](https://github.com/dcache/dcache/commit/fefa20ec1195ef9f73821d0d3a2e0b97ce932826)
:   pool: refactor String.format log messages

[377abd9651](https://github.com/dcache/dcache/commit/377abd9651c9bb62b9f0ad7c8de16faea8fff00a)
:   cells: update route commands

[3bb13fb12a](https://github.com/dcache/dcache/commit/3bb13fb12afbf0f2a1d2a720691eac3622d72952)
:   dcache-restful-api: change the way in which transfers and restores support paging

[f689473727](https://github.com/dcache/dcache/commit/f6894737273a65aa0d2f4481a6ea0f419e20aa73)
:   nfs: fix server error when processing access log

[def4b6e7c7](https://github.com/dcache/dcache/commit/def4b6e7c75a7a290dd66e8fa92fcdaa6eaa39ac)
:   nearline-storage: pass allocator to NearlineStorageHandler

[e3ad2a513b](https://github.com/dcache/dcache/commit/e3ad2a513bbeb6846454fbede5ec1199f03bb118)
:   dcap: add TTL information to dcap messages

[4c66ad3bee](https://github.com/dcache/dcache/commit/4c66ad3bee34e17cc8e00c06ce7588c1294e19c3)
:   alarms: remove default value for LogEntry received

[00ecfe01af](https://github.com/dcache/dcache/commit/00ecfe01afedafbe032fd145a2449c574e92c745)
:   dcache-restful-api: add offset and limit to fetch of alarms

[02daf8d4f7](https://github.com/dcache/dcache/commit/02daf8d4f718188c1fee61a45896e204731fc01d)
:   many: add diagnostic information about remote pool monitor

[f599f12a61](https://github.com/dcache/dcache/commit/f599f12a619d89eca59169ee0ab8c032fa68da92)
:   pool: dont disable pool if mover cancelled before open

[cae812b42f](https://github.com/dcache/dcache/commit/cae812b42f98d04148e166329983d179465d90f3)
:   systemtest: authorise developer to login as 'admin' via ssh

[8f7bc92668](https://github.com/dcache/dcache/commit/8f7bc92668aea0cd8940feec8b941c6e4b675c59)
:   nfs: let nfs door to use existing file location on write

[36f471d65e](https://github.com/dcache/dcache/commit/36f471d65e8b823ff8a9a5eb87adbf6dc86770b2)
:   nfs: fix invalid condition test in access log processing

[5515fe429e](https://github.com/dcache/dcache/commit/5515fe429eaac8f32279e127220846735d024276)
:   dcache: add elapsed time to NearlineData JSON

[c45da5d55e](https://github.com/dcache/dcache/commit/c45da5d55e3dc1adfed593c346c25156367b8294)
:   dcache-restful-api: fix configuration bug in billing collection utils

[6f4d59338d](https://github.com/dcache/dcache/commit/6f4d59338d1c55ea344cedeb62e0095cb99fa056)
:   dcache-history: fix bug which forces overwrite of data when pool unavailable

[e4d4a6077e](https://github.com/dcache/dcache/commit/e4d4a6077edb804d80b3622e74df31bbb486ba83)
:   dcache-restful-api: fix aggregation issues for pool info and move aggregation to history service

[ee58ddf08a](https://github.com/dcache/dcache/commit/ee58ddf08addae52339464dae3cb8f34d4bb0e68)
:   src: fix broken commit 8e223c53e7e3e80

[8e223c53e7](https://github.com/dcache/dcache/commit/8e223c53e7e3e80110b2c238559dd10084ee4e95)
:   nfs: fix javadoc and remove unused imports

[16c5abf9e8](https://github.com/dcache/dcache/commit/16c5abf9e8e5b3ca3800f5dd9313e0c5ef553922)
:   dcache: fix NPE bug in TransferInfo.toFormattedString

[31fb29e6a3](https://github.com/dcache/dcache/commit/31fb29e6a3cbec25016ff416100b824724261ec7)
:   vehicles: use telescopic constructors for PnfsClearCacheLocationMessage

[00b52a359a](https://github.com/dcache/dcache/commit/00b52a359ab0162be7311d5b349430d646e62567)
:   dcache-restful-api: avoid NPE in PoolDataRequestProcessor

[3825c16a74](https://github.com/dcache/dcache/commit/3825c16a746558fb9d1e72817216af735be4569a)
:   dcache-restful-api: lower collector timeout defaults

[644b693b07](https://github.com/dcache/dcache/commit/644b693b071209e4e2973fa401d90933c3804762)
:   dcache: fix bug in PoolSelectionUnitV2 match()

[a2f148bbd8](https://github.com/dcache/dcache/commit/a2f148bbd857d2895855520bc2e8dc100daa3cfc)
:   pom: update scala dependencies to version 2.12.3

[57b9646466](https://github.com/dcache/dcache/commit/57b9646466384eea91fb79f9c69e20dc7c93f5fb)
:   dcache-xrootd: Fix login handshake to support xrootd clients (> 4.7.0)

[68050b340e](https://github.com/dcache/dcache/commit/68050b340edf06089a51aba6ca07e80d5d2bf8a0)
:   dcache-restful-api: Add POST for enable/disable or kill mover to pool info service

[d5c39daec3](https://github.com/dcache/dcache/commit/d5c39daec347c5977a0b1c4aaab1cfe1ca607ab9)
:   dcache-restful-api: add selection resource and providers

[4fcb617771](https://github.com/dcache/dcache/commit/4fcb617771e42e4d4d7d705133dd07e5eae0e66e)
:   httpd: restore millis to transfer time for transfers.txt

[f87436d3f2](https://github.com/dcache/dcache/commit/f87436d3f2321c11d0536904174ee61332c216ef)
:   dcache-xrootd: (WIP) Add support to the xrootd (kxr_)posc flag in (kXR_)open.

[fbdef471bd](https://github.com/dcache/dcache/commit/fbdef471bd728403ad06f6e7f4a205f1e1542be9)
:   pool: introduce ForwardingRepositoryChannel - a RepositoryChannel decorator

[7cdd8d1820](https://github.com/dcache/dcache/commit/7cdd8d1820c3896894352b3366c0b51ee9860db0)
:   pool: fix log and alarms duplication when rebuilding broken entry

[0893a6828e](https://github.com/dcache/dcache/commit/0893a6828e41249930f36b3aa2f9b71571db812d)
:   pool: remove deprecated command

[182e1d2c08](https://github.com/dcache/dcache/commit/182e1d2c081b9ef88d4dc36d629fdf9df085ee88)
:   checksums: remove unnecessary Checksum#forType static method

[85128586b0](https://github.com/dcache/dcache/commit/85128586b0b4ad784a9d8891a4a05cabdf65be1b)
:   checksums: remove unnecessary parseChecksum call

[6f5da5592e](https://github.com/dcache/dcache/commit/6f5da5592edf157a48481e3c5677bc4cd47d3983)
:   checksum: drop ChecksumFactory

[7b8702c012](https://github.com/dcache/dcache/commit/7b8702c0128b549d0c8c0e3763c14fed6cfa0dd4)
:   cells: better error reporting to ensure bugs are understood

[66eb380a4e](https://github.com/dcache/dcache/commit/66eb380a4ea1ec7b6d2fd7c8c43130a773f2adde)
:   webdav: refactor MiltonHandler's support of OPTIONS

[7dc058e7e6](https://github.com/dcache/dcache/commit/7dc058e7e660f1966d18a979c9945d130bf72178)
:   webdav: fix regression in OPTIONS response

[7c7c510b70](https://github.com/dcache/dcache/commit/7c7c510b704af3249e57d8e33dc7c92f361dc374)
:   resilience: use scheduled executor to provide optional task launch delay

[4bed3af3ac](https://github.com/dcache/dcache/commit/4bed3af3aca5ea421f089b9ff42aa4710645d0de)
:   commons: use Guava to generate hexadecimal strings from byte arrays

[87abe73747](https://github.com/dcache/dcache/commit/87abe73747e172b2b8f3bc06e9b30eff35a9fffc)
:   dcache (collection service): handle execution exceptions correctly

[647a82b4b4](https://github.com/dcache/dcache/commit/647a82b4b4550fd294b7ecd632d5dffe1a78d590)
:   libs: update to emergency fix nfs4j-0.15.3

[9d763ab983](https://github.com/dcache/dcache/commit/9d763ab983c70585aa8f3211b03dcf0ad9bf5df3)
:   libs: update nfs4j to version 0.15.2

[b2041cc257](https://github.com/dcache/dcache/commit/b2041cc257f605ee667debcd9d887c4e2d0ac144)
:   pool: support calculating multiple checksums on uploaded data

[cc656a36b3](https://github.com/dcache/dcache/commit/cc656a36b34ecb46d37cf025269fc925fb4286b2)
:   pool: remove more checksum dead code

[d6a55f6bf3](https://github.com/dcache/dcache/commit/d6a55f6bf3045cbb0c0127e1189327b842aebcdc)
:   pool: refactor checksum handling

[dab89fd89d](https://github.com/dcache/dcache/commit/dab89fd89d2ec2ae307cdaa2605928a1b644309f)
:   pool: remove dead checksum code

[8ab445bb00](https://github.com/dcache/dcache/commit/8ab445bb00fdb074cae322f1ad27cbb3e65b7af5)
:   pool: fix data integrity regression for 3rd-party GridFTP pull transfers

[47157c37fc](https://github.com/dcache/dcache/commit/47157c37fc4f11d00949c35191472145c8fd413a)
:   pool: fix regression in GridFTP OPTS CKSM command

[68c1f7c011](https://github.com/dcache/dcache/commit/68c1f7c0110056fbadba351e830b5b260f331329)
:   common: fix time computation in TimeseriesHistogramTest

[9a43bdfe13](https://github.com/dcache/dcache/commit/9a43bdfe138d317040b35ce5a8fc2538d18b66a4)
:   Revert "pool: fix data integrity regression for 3rd-party GridFTP pull transfers"

[0697f4f8ab](https://github.com/dcache/dcache/commit/0697f4f8abbc0757d4ef5ed3fac60705d46ec2ee)
:   pool: fix data integrity regression for 3rd-party GridFTP pull transfers

[9fe1d035c6](https://github.com/dcache/dcache/commit/9fe1d035c66b101d7eed38cb12ef77982ad82348)
:   resilience: handle file deletion during scan correctly

[eff4c847a1](https://github.com/dcache/dcache/commit/eff4c847a144d77281e496548de56081522c8d0a)
:   pool: fix logging in mongoDB metadata repository

[3d265c0333](https://github.com/dcache/dcache/commit/3d265c0333922d6635443e827e6ac9a10b22858e)
:   pool: ceph: ignore file-not-found on remove

[068d9758ba](https://github.com/dcache/dcache/commit/068d9758ba5d551dad4e7967743d79940f069c96)
:   alarms: set severity from priority in request handler

[c65e057bf7](https://github.com/dcache/dcache/commit/c65e057bf7b71dcc9c9890674c42a437266673ac)
:   dcache-restful-api: return incomplete info instead of throwing NoSuchElementException

[7f092c7c16](https://github.com/dcache/dcache/commit/7f092c7c160495bf00c6fad7c69ad4868a04ae1e)
:   resilience: add pool operation logging

[36975ead39](https://github.com/dcache/dcache/commit/36975ead39552aa0e1034a9681d9690e4ed5c49d)
:   resilience: handle storage unit NoSuchElement failure

[5d1e8a7566](https://github.com/dcache/dcache/commit/5d1e8a75661fb150ceef2006509f1684d74434c9)
:   pool: update dcap mover to use ChecksumChannel

[a424af0f61](https://github.com/dcache/dcache/commit/a424af0f61749d391d32938469dc7fd6bd2cb05c)
:   srmclient: parameterise shell path of srmclient utilities

[8893a4f8fc](https://github.com/dcache/dcache/commit/8893a4f8fc21163f48528b62515c7f6eee584cf3)
:   nfs: shutdown callback ScheduledExecutorService on shutdown

[91d32bf275](https://github.com/dcache/dcache/commit/91d32bf275ce1ce778bc43ba115480a0f6868640)
:   pnfsmanager: slight simplication

[2b10acfefd](https://github.com/dcache/dcache/commit/2b10acfefd5aec0777919ba194e4c697d722e659)
:   systemtest: update robot to use system-test's trust-store

[07718e0988](https://github.com/dcache/dcache/commit/07718e098843ea6160e57991dd5aaffa88e19142)
:   pool: small tweaks to IO statistics

[a518121975](https://github.com/dcache/dcache/commit/a5181219752ffcb28c3c341b0c357ab13b10af53)
:   libs: update to nfs4j-0.15.1

[4cfe75ce56](https://github.com/dcache/dcache/commit/4cfe75ce564c6a898062ab8d54992b46e9e6338b)
:   access-log: update nfs door to provide access log

[31fc3a2dcb](https://github.com/dcache/dcache/commit/31fc3a2dcb54b67255e0dc7e935b5e0e9eb90e49)
:   pool: update ftp mover to use ChecksumChannel

[8d6f6bc2a4](https://github.com/dcache/dcache/commit/8d6f6bc2a41e8b959881043e9104683c526fb9c5)
:   webdav: adjust header parsing to be case insensitive

[6cbac61c2e](https://github.com/dcache/dcache/commit/6cbac61c2e1eef9f157641bdd1d5a50ae007f760)
:   ftp-client: refactoring slf4j logging messages

[c18f0882ab](https://github.com/dcache/dcache/commit/c18f0882ab727c06354013fc46c8e1a2ab1ef760)
:   dcache-srm: refactoring slf4j logging messages (#3446)

[51871cb790](https://github.com/dcache/dcache/commit/51871cb790c32e801e8124f026cd60915521caeb)
:   src: replace Guava Methods with native Java alternatives

[19e5cd3b0d](https://github.com/dcache/dcache/commit/19e5cd3b0dfdaa16c107339bcbcb7c881f74e860)
:   cells,dcap,ftp: Support for accepting connections from an allowed list of subnets and IP addresses

[a2a51d1c9f](https://github.com/dcache/dcache/commit/a2a51d1c9f9bfa42015dd18a06db74c45bccc0c7)
:   resilience: handle all cases where no locations for file may be discovered

[0e60fe2373](https://github.com/dcache/dcache/commit/0e60fe2373ee9dad956f7415e1fc49c80724e4a5)
:   resilience: distinguish correctly between file not in repository and file not found

[b15896cfe6](https://github.com/dcache/dcache/commit/b15896cfe6d46b8146130cbdc790b1136180823f)
:   resilience: fix bug in formatting and handling of cache exception types

[3e3c9fc7f2](https://github.com/dcache/dcache/commit/3e3c9fc7f24d5d8877ba496db4783aa67f351238)
:   dcache-restful-api: extract the locations from storage info and add to JSON attributes

[c77b773c5b](https://github.com/dcache/dcache/commit/c77b773c5b5278d15e1f852589ef2e26f8f07aeb)
:   common: fix bug in histogram max index computation

[fa977c66dc](https://github.com/dcache/dcache/commit/fa977c66dc717860505246b1f97ccc032c044441)
:   srmclient: remove non-functioning script with BASH dependencies

[24cbab02ea](https://github.com/dcache/dcache/commit/24cbab02eabe922665460d8365bac61d570f9ac7)
:   [maven-release-plugin] prepare for next development iteration





</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
