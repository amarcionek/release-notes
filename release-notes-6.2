HTML header: <title>dCache 6.2 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 6.2<br/>
<small>Release notes</small></h1>
</div>

## Highlights

 - Improved pool startup time with BerkeleyDB medadata repository 
 - Basis support for extended attributes.
 - Java 11 runtime required
 - TLS support for xrootd
 - SciToken support with xrootd
 - New telemetry service
 - running dcache domains as systemd services for RPM based distros

## Incompatibilities

 - Minimal PostgreSQL version is 9.5
 - Now on dCache requires Java 11 for runtime
 - dCache now requires ZooKeeper version 3.5
 - Dropped compatibiity with EGEE rpms 

## Acknowledgments

(tbd, this section uses markdown formatting)



## Release 6.2.0

An optional telememetry service is added to collect dCache sage statistics by dCache.org. The `telemetry`
cell have to explicitly defined in a layout file as well as enabled:

```
[telemetryDomain]
[telemetryDomain/telemetry]
telemetry.cell.enable=true
telemetry.instance.site-name=dCache instance on \${host.name}
telemetry.instance.location.latitude=53.5772
telemetry.instance.location.longitude=9.8772
```

Starting from version 2.2.0 dcache domain processes can be mnaged as systemd services. However, this functionality was available for debian-based systems only. With version 6.2.0 systemd integration is added into RPM packages as wel. As RHEL-6 based systems the legacy,
sysV-like daemon still available. Please check the [documentation](https://github.com/dCache/dcache/blob/master/docs/TheBook/src/main/markdown/install.md#using-systemd-service) for furder information.

The dcache version, online capacity, site name and optional location will be sent to stats.dcache.org collector.

### Cells

### Admin

### Alarms

### Billing

### Chimera

The minimal PosgreSQL version is changes to 9.5.
A new table `t_xattr (inumber, key, value)` is introduced to store user defined extended attributes. 

### DCAP

### Frontend

### FTP

### gplazma

### History

### Hoppingmanager

### httpd

### Info

### Missing Files

### NFS

Each NFS door gets an unique identifiert that becomes a part of nfs state ids. This prevents unlikely
event of nfs mover conflicts. The unique id for each door stored in zookeepr as:

```
/dcache/nfs/doors/<cell>@<domain>/state-handler-id
```

The NFS transfer service was returning to nfs clients a multipath adrress list that contains duplicate entries. This was triggering kernel warnings like:

```
[Di Apr 23 13:50:01 2019] RPC:   addr 131.169.a.b already in xprt switch
[Di Apr 23 13:50:01 2019] RPC:   rpc_clnt_test_xprt failed: -98 addr 131.169.a.b not added
[Di Apr 23 13:50:02 2019] RPC:   addr 131.169.a.c already in xprt switch
[Di Apr 23 13:50:02 2019] RPC:   rpc_clnt_test_xprt failed: -98 addr 131.169.a.c not added
[Di Apr 23 13:55:00 2019] RPC:   addr 131.169.a.d already in xprt switch
[Di Apr 23 13:55:00 2019] RPC:   rpc_clnt_test_xprt failed: -98 addr 131.169.a.d not added
```

This is fixed now.

The discovery of NFS4 domain, which is used by idmapper, made more robust against invalid configurations of dns resolver.

### PNFS Manager

### Pool

Pools that use BerkeleyDBReplicaStore have impoved startp time by reducing the number of stat requests to the underlaying filesystem. 

### Pool Manager

### Resilience

### Space Manager

### SRM / SRM Manager
Removed `hiden` possibility to generate perfomance HTML reports and plots.

### Statistics

### Telemetry
An optional telememetry service is added to collect dCache sage statistics by dCache.org.

### Topo

### Transfer Manager

### WebDAV
Webdav door can pass `xattr.` prefixed url params as extended attributes to pool. For example:

```
    $ curl --upload-file file.txt \
        https://localhost:2881/tape/file.txt?xattr.key1=value1&xattr.key2=value2"
```
This information will be available to HSM as part of storage info.

### XRootD

### Zookeeper

The ZooKeeper ensemble which is used by dCache is required to be of version 3.5. Version 3.4 will no longer be supported.

### Changelog from 6.1.0 to 6.2.0

<!-- git log 6.1..6.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

(tbd as soon as the branching is done.
In order to run the git log command given above, make sure that
- both branches are checked out and "git pull"ed in to make them local on your machine and
- you replace the single dashes by double dashes on the command's parameters)

</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


