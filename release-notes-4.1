HTML header: <title>dCache 4.1 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 4.1<br/>
<small>Release notes</small></h1>
</div>

## Highlights

File transfers using GridFTP can now reuse TCP connections, which makes them faster and improves
compatibility with the Globus transfer service.

This release of dCache introduces a new approach to external messaging. With the introduction
of Apache-Kafka as a message transport, for now in Billing, we start switching to a more modern
and efficient messaging system. The goal for the Billing service is easier inclusion with 
systems like Elasticsearch: Instead of adding messages to a textual log and having an external
component parse that log, a Kafka-aware ingester can import them directly into the remote
system.

Various administrative tasks are now possible for users with
the 'admin' role using frontend.

The frontend REST API is documented with Swagger, allowing the
auto-generation of clients.

The frontend also now comes with a built-in web-browser based Swagger
client.

The configuration of several components has been simplified. For example, creating LDAP-only setups
for gplazma now only requires the configuration of a single plugin, `ldap`. 

## Incompatibilities

  - Starting from version 4.1 dCache head nodes are incompatible with pools older that 3.0.
  - NFSv4.1/pNFS is not compatible with older linux kernels when used with flexfile layout.
    As a result, by updating to dCache-4.1 a new export options can be used to enforce layout
    driver. If nothing is specified, then nfsv4_1_files only is offered to the clients. For
    linux clients with kernel versions starting from 4.14 as well as RHEL-7.5 is flexfile layout
    is recommended.
    ```
    / moder_client_host(rw,lt=nfsv4_1_files:flex_files)
    ```
    The **nfs.pnfs.layouts** property is obsolete in favour of **lt=** export option.
     
### Acknowledgements
Once again, we have received important code contributions from our users. 

Thanks to Christoph Anton Mitterer for his constributions.

We would like to thank the students of HTW Berlin Alexandra Konovalova, Hagen Wittlich and Marcus Kopp,
for their contributions during the HTW course.

## Release 4.1.35

### webdav

When users request a macaroon via an HTTP POST request targeting
a specific path, a caveat is created that restricts the macaroon
to that path (requests to / result in a non-limited macaroon). 

Commit 99c726e3 resulted in users getting back a non-limited
macaroon for every request. This issue was fixed with this
release.


### Changelog 4.1.34..4.1.35

<!-- git log 4.1.34..4.1.35 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2aec4f2f34](https://github.com/dcache/dcache/commit/2aec4f2f34b25ab219b7fae1f3350138f8f58557)
:   [maven-release-plugin] prepare release 4.1.35

[ebbe61de6a](https://github.com/dcache/dcache/commit/ebbe61de6acf32dbeaa14be8437f0aa96def7aa6)
:   systemtest: fix OpenSSL DN format change

[4562cf2ef1](https://github.com/dcache/dcache/commit/4562cf2ef11249298f3c12a3f96956d6693db88a)
:   webdav: fix path-to-caveat for macaroon minting endpoint

[fd04861a37](https://github.com/dcache/dcache/commit/fd04861a3745da960cd133e98a90b34e756dd82c)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.34

### alarms

Pool errors involving a fatal repository fault, for
instance, can be sent now  as an email alarm without
having to send all pool disabled alarms.

### dcache-view

Troubles when using firefox and/or safari to browse dcache-view were reported. This is now fixed.

### gplazma

The JAAS gplazma plugin no longer logs a stacktrace on bad configuration.

### pool

The current release improved error messages  making them clearer by avoid using the same error message in multiple places. 

### srm

A stack-traces fixed  for  concurrent updates in pin-manager and similar
(expected) failures.

### transfermanager

Now Third-party transfers fail if the client is requesting to copy a file
from dCache that has not fully been uploaded.

### webdav

Disabling basic authn should not now disable macaroons. The current release fixed  `webdav.authn.basic` and `frontend.authn.basic` so that setting
these configuration properties to `false` no longer blocks macaroons from being accepted in the HTTP Authorization header.

The current release impoved error messaging  for unauthenticated request. 

IllegalArgumentException exception is fixed now and attempts by a client to copy a file that has not fully been uploaded 
results in a clear error response.


### Changelog 4.1.33..4.1.34

<!-- git log 4.1.33..4.1.34 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5204213](https://github.com/dcache/dcache/commit/520421375c3b424c852799a8cc441d1499bf50ea)
:   [maven-release-plugin] prepare release 4.1.34

[a870620](https://github.com/dcache/dcache/commit/a870620055a85172b6d824db512dcbb141e09809)
:   webdav/frontend: disabling basic authn should not disable macaroons

[70698bc](https://github.com/dcache/dcache/commit/70698bcec6e1c3f9ca6201ca9e242797d38946f9)
:   srm: do not log a stack-trace on expected Exception errors

[710892a](https://github.com/dcache/dcache/commit/710892a349e9be2615618a5766353b1c59647c2c)
:   transfermanager: fail third-party copy if the file is still being uploaded

[0f41262](https://github.com/dcache/dcache/commit/0f41262ee61b8e65547a7a73ad1897835082f59f)
:   webdav: fail COPY early if file is currently being uploaded

[429daff](https://github.com/dcache/dcache/commit/429daff23526d47e128c432b4f14e6c3b6298085)
:   transfermanager: abort transfer if there is a bug

[356ff03](https://github.com/dcache/dcache/commit/356ff03593d5a853551e5464dc615cdb2aa1df9c)
:   gplazma: JAAS plugin logs a stack-trace on misconfiguration

[1ecc08c](https://github.com/dcache/dcache/commit/1ecc08c32355523aff5bd6a484466b807e0a43a9)
:   pool: avoid using the same error message in multiple places

[cf2fde5](https://github.com/dcache/dcache/commit/cf2fde563ac0c6d4fc5654661d1bff1bdbde257b)
:   alarms: add pool dead alarm

[bdf0fc9](https://github.com/dcache/dcache/commit/bdf0fc9101596969a7a5ef0ecd35a4a6ed8cfa7d)
:   [maven-release-plugin] prepare for next development iteration

[e3c1ffb](https://github.com/dcache/dcache/commit/e3c1ffb45e11557b44adcb48a1f1144c19ba6ad8)
:   pool: don't update atime on flush

[8dd48e4](https://github.com/dcache/dcache/commit/8dd48e4a4aabf2be73b296aa2dbcaac208926291)
:   scripts: fix 'dcache pool yaml' command

[d54104f](https://github.com/dcache/dcache/commit/d54104f66e8c083085a0bcc9b97fb554a7ff3011)
:   webdav: 401 for unauthenticated requests; message in status line

[0c8045e](https://github.com/dcache/dcache/commit/0c8045e5afcc60bdfe7f2801968d06c6b23d8de2)
:   dcache, frontend: release dcache-view version 1.4.8

## Release 4.1.33

### dcache-frontend

The current release added documentation concerning restores.

### ftp

The current release fixed MLSC command for non-small directories and Globus is now able to list directories with > 100 directories.


### Changelog 4.1.32..4.1.33

<!-- git log 4.1.32..4.1.33 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[26e32b0](https://github.com/dcache/dcache/commit/26e32b03562c775d69d736d3ac550834fda72a46)
:   [maven-release-plugin] prepare release 4.1.33

[12ea15a](https://github.com/dcache/dcache/commit/12ea15a41608a6af075fab9460b0ea1fd58ceb2c)
:   ftp: fix MLSC command for non-small directories

[534595a](https://github.com/dcache/dcache/commit/534595add38bf3606868149120f828c33c08d7aa)
:   dcache-frontend: add documentation concerning restores

[90310c1](https://github.com/dcache/dcache/commit/90310c1eafa7502dbc4496d60a84da1d8cf244c0)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.32

### billing

Database connection loss now is reported for billing.

### webdav

The current release fixed the problem where all but one requests fail, if multiple concurrent PUT requests have directories in the path that do not already exist. 


### Changelog 4.1.31..4.1.32

<!-- git log 4.1.31..4.1.32 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[65742b3](https://github.com/dcache/dcache/commit/65742b3a3e16f8d742f488000a16dd16556cbebe)
:   [maven-release-plugin] prepare release 4.1.32

[b0f6314](https://github.com/dcache/dcache/commit/b0f6314448307b54e56609272e24258071b90117)
:   dcache: wrap billing data source with AlarmEnabledDataSource

[06de91f](https://github.com/dcache/dcache/commit/06de91fd97f9333c697c90e1d08e78ac09ac9804)
:   common: fix random data generation in TimeseriesHistogram unit test

[dccb333](https://github.com/dcache/dcache/commit/dccb33339ced6bd41892bce531ba269c5c8d1e34)
:   webdav: work-around Milton racy API for creating collections

[789d99d](https://github.com/dcache/dcache/commit/789d99dd3220e9ceb7777b26a8a48c1b03c04f93)
:   webdav: fix name of root

[649d857](https://github.com/dcache/dcache/commit/649d857b86ecf8c9fbc7c0189746d50f264ae948)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.31

### dcache-view

The following new functionalities have been added for dCache View:
Now it is possible to use macaroon for file sharing.
Files can be shared by sending the generated link, QR code or macaroon for the files to the person you want to give access to your files.
Gravatar request is now make optional and how the images are stored are now more efficient to reduce the number of request made.


### gplazma

Since update to newer BC and voms-java-api libraries
sites report VOMS certificate validation errors like
This is now fixed.

### srm

iThe `dcache ports` command now includes the srm's TLS/SSL interface.


### Changelog 4.1.30..4.1.31

<!-- git log 4.1.30..4.1.31 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bd315b0](https://github.com/dcache/dcache/commit/bd315b06205f5c8368f735fb0aebaa30ee1c290e)
:   [maven-release-plugin] prepare release 4.1.31

[ba68f63](https://github.com/dcache/dcache/commit/ba68f63825d6c3c44f9f9537493e8419ba06c1b5)
:   gplazma voms plugin: add trust anchor refresh paramater

[b369668](https://github.com/dcache/dcache/commit/b3696683aacefd5c28a5ab15fdeda4155f7dd63f)
:   srm: include TLS/SSL port in 'dcache ports' command

[995f688](https://github.com/dcache/dcache/commit/995f6884569a48046a1b31b304364e3b9dcbf151)
:   dcache/frontend: release dcache-view version 1.4.7

[c276c9e](https://github.com/dcache/dcache/commit/c276c9eb73432fdfc5e3d4ea787ed60779bda63a)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.30

### Changes affecting multiple services

The current release corrected the properties for access-log.


### Changelog 4.1.29..4.1.30

<!-- git log 4.1.29..4.1.30 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[1a071a3](https://github.com/dcache/dcache/commit/1a071a39ebef6b540b507de41b5c021710cf8f13)
:   [maven-release-plugin] prepare release 4.1.30

[a84db5d](https://github.com/dcache/dcache/commit/a84db5d168c980811f7af3f150792b6fe5264439)
:   correct the properties for access-log

[7ce9e23](https://github.com/dcache/dcache/commit/7ce9e233b551a263b1eead798aeda03753504fe6)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.29

### Changes affecting multiple services

If a client specifies a checksum value with either a WebDAV or FTP upload,
a `Restriction check by-passed due to missing path` warning was logged occasionally.
This was fixed now, ensuring that restrictions are always applied.

### pool

Space reservations on pools that are connected to tape showed a problem with 
failing restore requests: If a restore failed, the space that was reserved to
hold the file that was supposed to come in from tape was not freed again but
kept in the 'sticky' state. This resulted in lots of unusable space on pools
that could only be reclaimed through a restart. 

With the current release, this issue is fixed and space is freed as soon
as possible after a failed restore request.

### resilience

A very rare race-condition is fixed where a failed upload results in
resilience recording a stack-trace.

### webdav

An issue with the Milton WebDAV library prevented Partial (or vector-read) GET requests
from succeeding. This was fixed now through both an update of the dependency and a local
patch while we wait for the proposed fix to be included upstream.


### Changelog 4.1.28..4.1.29

<!-- git log 4.1.28..4.1.29 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[69b1a98226](https://github.com/dcache/dcache/commit/69b1a98226a4a3a62e3346afb4a4394435d006f2)
:   [maven-release-plugin] prepare release 4.1.29

[f285e97109](https://github.com/dcache/dcache/commit/f285e97109460393a92e5b287128a1026465981b)
:   webdav: fix proxied partial (vector-read) GET requests

[239d9c38ea](https://github.com/dcache/dcache/commit/239d9c38eab87ae3c3938f017083c4f18ff22a83)
:   pool: fix pool space accounting on failed restores

[d6f3b6d1e1](https://github.com/dcache/dcache/commit/d6f3b6d1e160d389effb39ad7507dfc902da1d73)
:   resilience: fix NPE if file unlinked when resilience processes a broken file

[c399f14ebe](https://github.com/dcache/dcache/commit/c399f14ebe61239e41640cfafc4de5d94eea66b4)
:   ftp/webdav: fix bypass of restrictions

[ed5b2f2167](https://github.com/dcache/dcache/commit/ed5b2f2167ec54b1fac7cb51f42a6cdfce7a9e96)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.28

### alarms

An internal issue with the alarms configuration was fixed, which
should prevent a rare NullPointerException from occuring.

### dcap

Creating a file or directory using the DCAP protocol with a URL
as parameter, the file permissions were not set correctly. 

With the current release, this was corrected, and such files
use the client-supplied file permissions. If none are provided,
the default modes 0700 (for directories) and 0600 (for files)
are used. 

### xrootd

An uncaught exception in xrootd doors was fixed.


### Changelog 4.1.27..4.1.28

<!-- git log 4.1.27..4.1.28 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f4a8299da1](https://github.com/dcache/dcache/commit/f4a8299da1316d86f5d174071fae7c61b1484e1e)
:   [maven-release-plugin] prepare release 4.1.28

[10cd61f23d](https://github.com/dcache/dcache/commit/10cd61f23ddf7b5a96323cc5c3c1dff8999f5925)
:   alarms: fix persistence.xml configuration

[2f7260b151](https://github.com/dcache/dcache/commit/2f7260b151fb77a48f687d9469f1882a2772d74b)
:   dcap: fix permission propagation with DCAP

[19a502af5f](https://github.com/dcache/dcache/commit/19a502af5f224e74e2700a708fa0e11747f612c7)
:   dcache-xrootd: handle possible race condition in directory listing

[25aefdd9b5](https://github.com/dcache/dcache/commit/25aefdd9b5c1c601c3d2a99cdf3b407235beae36)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.27

### statistics

Metadata merge was using  max when it should had used min, this is now fixed.


### Changelog 4.1.26..4.1.27

<!-- git log 4.1.26..4.1.27 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[1fa662a](https://github.com/dcache/dcache/commit/1fa662af69e73a54b264975a5e400d03cf778e8d)
:   [maven-release-plugin] prepare release 4.1.27

[4fc7fba](https://github.com/dcache/dcache/commit/4fc7fbaabdfd936092c3700357ef1299a790ee6f)
:   common: fix histogram metadata merge

[a66a9e3](https://github.com/dcache/dcache/commit/a66a9e340c76004570b846b9bf0df4f79fe923d8)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.26

### dcache-view

The current release added several bug fixes and improvement to dCache view.


### Changelog 4.1.25..4.1.26

<!-- git log 4.1.25..4.1.26 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b68e311](https://github.com/dcache/dcache/commit/b68e3112bacac40d55a26ede92b1dad2f0cb4e54)
:   [maven-release-plugin] prepare release 4.1.26

[51ec9b6](https://github.com/dcache/dcache/commit/51ec9b6355e6a20cfdca659638392b2953a29710)
:   [maven-release-plugin] prepare for next development iteration

[113d961](https://github.com/dcache/dcache/commit/113d961db29b1b8f959151b97038524fec6a42b1)
:   dcache: release dcache-view version 1.4.6

## Release 4.1.25

### ftp

The current release provides better protection against leaking proxy/data TCP sockets if client
aborts a proxied transfer.


### pool

The current release fixed stopwatch error and now IO-statistics collecting is more robust,
 avoiding stack-traces with the message `This stopwatch is already stopped`.

### srm

Clients that use the gridsite protocol, such as davix, can now delegate
their credential.


### Changelog 4.1.24..4.1.25

<!-- git log 4.1.24..4.1.25 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[1d819ee](https://github.com/dcache/dcache/commit/1d819ee706ec8b7d980721788d00b04898ddbad1)
:   [maven-release-plugin] prepare release 4.1.25

[ef535ac](https://github.com/dcache/dcache/commit/ef535ac6fe2066b70f116cfdcf3c3a5cc656c978)
:   ftp: make shutdown more robust

[f303edf](https://github.com/dcache/dcache/commit/f303edffcdff26138a517f1ea5fa7c2bb93d7f90)
:   pool: fix stopwatch error

[72c7bb3](https://github.com/dcache/dcache/commit/72c7bb351068bf10e3bafb6c60ec4f5615b434cf)
:   common: fix bug in CountingHistogram index computation

[290a335](https://github.com/dcache/dcache/commit/290a335b5d143eeb751e4abf5122167933cd09bb)
:   [maven-release-plugin] prepare for next development iteration

[19150ba](https://github.com/dcache/dcache/commit/19150baa3d569c970892943adb61ea313c7b8b87)
:   srm: gridsite fix querying validity of delegated credential

## Release 4.1.24

### ftp

The behaviour of FTP transfers was made more robust in cases where a client
disconnects from the control channel prematurely.

The performance markers that dCache sends back to the client in FTP transfers
are now more robust against bugs.

### nfs

When transient errors in pools cause NFS transfers to have to wait and retry,
the system's behaviour is now more robust and no StackOverflowErrors should be logged any more.

### scripts

Maven's findbugs plugin is now granted more working memory in order
to make builds, especially on our continuous integration system, 
more robust.

### srm

Certificate lifetime considerations for VOMS proxy certificates are
improved in this release: if a
client delegates a credential where the VOMS AC expires before the X.509
proxies, dCache now will not use the credential beyond the AC expiry time. 
This avoids unnecessary authentication errors. 

### webdav

When the WebDAV door is considering an HTTP third-party-copy request
that uses grid-site delegation, there is a minimum 20 minute validity
that any existing delegated credential must satisfy. If this is not
satisfied then dCache will request a fresh delegated credential.

Until now, if the client failed to delegate a fresh certificate then the
subsequent COPY request was rejected. This release changes that behaviour
and enables such transfers.


### Changelog 4.1.23..4.1.24

<!-- git log 4.1.23..4.1.24 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[62456f1976](https://github.com/dcache/dcache/commit/62456f19761f7cf2899647cf1b7565888de8a359)
:   [maven-release-plugin] prepare release 4.1.24

[e8ffe81e2c](https://github.com/dcache/dcache/commit/e8ffe81e2c1eb54c9118d4ca7c5d93fb75ac01a8)
:   scripts: Avoid findbugs memory errors

[4f45c29f8e](https://github.com/dcache/dcache/commit/4f45c29f8e798420646074c6632042d1eb2fe52e)
:   nfs: increase request retry delay when selecting/starting  pool or mover

[9abaac003c](https://github.com/dcache/dcache/commit/9abaac003ca9ff12b3dbd608b9591c00d11ff484)
:   webdav: adjust minimum validity after requesting delegation

[4e7a6646c9](https://github.com/dcache/dcache/commit/4e7a6646c9ca296dd7d06dcce6d3ba86c8c5aeb1)
:   srmmanager/webdav: consider VOMS AC validity of delegated credential

[648e13e9cd](https://github.com/dcache/dcache/commit/648e13e9cdc1d5e64d59e2050126a7a868dd938f)
:   ftp: make performance marker task robust.

[650542c1b6](https://github.com/dcache/dcache/commit/650542c1b6b1c9fd6adf4c263d97b7f2bf8b7ce4)
:   ftp: avoid NullPointerException if adapter is not connected

[4bb1eb2cee](https://github.com/dcache/dcache/commit/4bb1eb2cee4b598445d6a535c17a23069aa8c90e)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.23

### pool

Diagnostic logging for failed HTTP third-party transfers was improved.

Billing records for failed transfers now show more detailed information.

The handling of cancelled flush requests for nearline media
was rewritten to be more efficient. This resolves issues where pools
report "Flush of 0000... failed with: CacheException" followed by
"Pool restart required: Internal repository error".

Compatibility with DPM was improved by increasing HTTP GET requests' timeouts.
This should allow more transfers to succeed.

### poolmanager

Supplying poolmanager with an unresolvable hostname as the target will
now result in an UnknownHostException instead of the previous behaviour
where an (unnecessary) NullPointerException was thrown.

### scripts

The format and content of the Storage Description JSON file have been updated
according to WLCG suggestions:

- 'capacity_id' field is renamed to 'name'
- 'total_space' and 'used_space' renamed to 'totalsize' and 'usedsize'
respectively.
- 'timestamp' field added
- 'vos' field added
- 'assignedendpoints' added.  Currently hardcoded to "all".

### srm

Logging of errors in the SRM credential store was improved.

### webdav

If a non-resolvable host name is given as the source or destination
of a third-party copy request, WebDAV will now fail the transfer
immediately instead of waiting for a Poolmanager timeout.

Diagnostic logging for failed HTTP third-party transfers was improved.

### xrootd

dCache allows xrootd clients to specify a query/opaque string in a
kXR_mv request's source path.


### Changelog 4.1.22..4.1.23

<!-- git log 4.1.22..4.1.23 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[c5596cbe10](https://github.com/dcache/dcache/commit/c5596cbe1044e547ec1cc7ab6b8c940d84abe22e)
:   [maven-release-plugin] prepare release 4.1.23

[412078eaee](https://github.com/dcache/dcache/commit/412078eaeeadae2ebdd6afd720371ffd10dd5482)
:   pool: HTTP TPC rework exception logging

[932b9e838c](https://github.com/dcache/dcache/commit/932b9e838c40e75b1eab7db1a414ff298644bf90)
:   pool: increase TPC socket timeout for GET requests

[0df6f3862e](https://github.com/dcache/dcache/commit/0df6f3862ea8eeb920f72604da0176de3a61f128)
:   srm: fix credential store logging

[acc5fee6c4](https://github.com/dcache/dcache/commit/acc5fee6c43caa84b114565df3acf711313489b2)
:   pool: update log status using exception class name if no message

[45067402ee](https://github.com/dcache/dcache/commit/45067402eed700739796d00f7d9e44dbebb6ff8b)
:   storagedescriptor: update information based on WLCG feedback

[0459c95bea](https://github.com/dcache/dcache/commit/0459c95bea6f4ed01f5766c17212faa1d21b8845)
:   xrootd: strip off query part from kXR_mv source

[4b91884fee](https://github.com/dcache/dcache/commit/4b91884feeb7889b761e2fc0f22f07592221db8b)
:   webdav: fail TPC request early on unknown hostname

[a5dac05b31](https://github.com/dcache/dcache/commit/a5dac05b31888728760a41ad9a2ed330b76da014)
:   nearline-provider: do not propagate thread interrupt flag

[0a5ff9e2fd](https://github.com/dcache/dcache/commit/0a5ff9e2fda777802b57d6e1b224d888ed769d88)
:   poolmanager: fix NPE on unknown host

[267bbc9938](https://github.com/dcache/dcache/commit/267bbc993895dd8660ec44b3cb4f46f0b88c6acd)
:   webdav: improve logging of TPC requests

[cb4b1bde42](https://github.com/dcache/dcache/commit/cb4b1bde42e6d66e7784ed1b19ad8bfa4ca24cb2)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.22

### Changes affecting multiple services

In order to more easily identify a rejected macaroon in the logs, its ID is now included in the log message.

An irrelevant stacktrace was logged on unexpected CacheExceptions. This 
was removed, leading to less clutter in the logs.

Different macaroons that were issued against the same secret are now discernible in the logs.

Users now get more information about the reasons why an invalid macaroon was
rejected: HTTP requests that are made with an invalid macaroon have a 401 HTTP
response with the status-line explanation phrase that describes why the
macaroon is invalid.

The access log file also logs why a macaroon was rejected.

### core

A library dependency was updated to avoid [CVE-2018-11771](https://nvd.nist.gov/vuln/detail/CVE-2018-11771). This patch introduces no user-visible changes.

### frontend

[Github issue #4242](https://github.com/dCache/dcache/issues/4242) was resolved; 
cell information can now be be gathered using the REST interface without
specifying domains.

### gplazma

Invalid macaroon logins no longer "spam" gPlazma.

### pnfsmanager

When creating a macaroon to allow uploading of data, the desired path
may not already exist. Without restrictions, WebDAV will auto-create
parent directory items that are missing, or the client can create these
directory elements explicitly with MKCOL.

With restrictions (such as from a macaroon) such directory creation
currently requires the MANAGE activity, which allows other actions
beyond the scope of this scenario. With this release, the behaviour 
was changed so that a user with a macaroon that authorises them to upload data into a
particular directory will be able to create parent directories to
achieve uploading the data.

### pool

A regression caused pools that had their size only specified in a layout file
to report a size of 8 Exabytes. This issue was fixed.

dCache now supports a DPM-specific HTTP extension that indicates the
checksum calculation is not yet complete, avoiding potential data
corruption with third-party copies: If DPM is calculating a checksum, then any RFC 3230 (i.e., with a
'Want-Digest' header) GET or HEAD request returns '202 Accepted' respond
status line and an HTML page as the response entity. Since dCache
considers any 2xx response as success, the HTML page was previously accepted as the
file's contents, resulting in data corruption.

dCache pools no longer log a stack-trace for non-bug P2P failures.

### srm

The domain '.access' log file now contains log information for grid-site
delegation activity, which facilitates debugging of http third-party-copying issues.

### transfermanagers

The "restriction check by-passed" warning for each WebDAV-initiated
third-party transfer is fixed.

### webdav

A user may request a macaroon by making an HTTP POST request to the
WebDAV door. This log entry was augmented by the ID and type of
macaroon used.

A previous patch needed a bit of an update to ensure that X.509-with-FQAN authenticated third-party transfers with macaroons work under all circumstances. This is now ensured.

### xrootd

The `--zip` option of xrootd clients is now supported.


### Changelog 4.1.21..4.1.22

<!-- git log 4.1.21..4.1.22 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[0f2fc8770e](https://github.com/dcache/dcache/commit/0f2fc8770ee277e7e9103206893ae48b61513b44)
:   [maven-release-plugin] prepare release 4.1.22

[fe89b26094](https://github.com/dcache/dcache/commit/fe89b2609418c5c786897eadbf614d795979fb26)
:   xrootd: add support for kXR_stat on open files

[430bf8a4b0](https://github.com/dcache/dcache/commit/430bf8a4b055114f3c2dc9bc9b8de6f9171a9bae)
:   pool: P2P failures trigger stack-trace

[4781474673](https://github.com/dcache/dcache/commit/4781474673cf75ca2c02bfd4fbfecd690ff1c306)
:   webdav: obtain FQAN from X.509 credential for gridsite

[f7e445ba77](https://github.com/dcache/dcache/commit/f7e445ba77646ec0ad02e579cd877e84c052ceb5)
:   core: avoid sending bad macaroons to gplazma

[aa0ba138ad](https://github.com/dcache/dcache/commit/aa0ba138ad81cd72a390940d3283a1281a9fedbe)
:   webdav: update access log to record macaroon request details

[27347cf925](https://github.com/dcache/dcache/commit/27347cf925b6bbe6714db8f1bbdd13541497473c)
:   transfermanager: fix missing path

[aaa65d8ec9](https://github.com/dcache/dcache/commit/aaa65d8ec94eb7bbf9590e5bb6479f8bb180460e)
:   libs: update to commons-compress-1.18

[8e5163de42](https://github.com/dcache/dcache/commit/8e5163de42ffc08a6cc6e499024e68ea261d035a)
:   macaroons: include macaroon id in error message

[fc8cf467bf](https://github.com/dcache/dcache/commit/fc8cf467bf78111ed8bfeef769d694705685e305)
:   pool: fix pool's runtime configured size regression (b70b0d9)

[a641fa61cc](https://github.com/dcache/dcache/commit/a641fa61cc13a1a96546f1ac6510f164d0321096)
:   core: provide better feedback and logging if a macaroon is rejected

[aeb4cee6ce](https://github.com/dcache/dcache/commit/aeb4cee6ce033bd9b8a8410c056c3cbdc8ab4467)
:   dcache-frontend: fix array out of bounds exception in cell info service

[edc17a507f](https://github.com/dcache/dcache/commit/edc17a507f949009159b19cec465a8e6b6cbc498)
:   pool: update HTTP TPC to support retrying GET and HEAD requests for DPM

[4aee9f201b](https://github.com/dcache/dcache/commit/4aee9f201b37aff4c10926629f0c4791ea99f419)
:   srm: add gridsite delegation interface access-log

[d1c13e24ea](https://github.com/dcache/dcache/commit/d1c13e24ea87ac31b61cad4ab9352b58a865b61b)
:   macaroons: fix logged id

[ea79980dc0](https://github.com/dcache/dcache/commit/ea79980dc0f83818a214c33cf550e8b355d83b5f)
:   core: avoid stacktrace on arbitrary CacheException

[0c1f3ae879](https://github.com/dcache/dcache/commit/0c1f3ae8796b031765a4952aef37df100d867e31)
:   [maven-release-plugin] prepare for next development iteration

[30cd18cdd1](https://github.com/dcache/dcache/commit/30cd18cdd183392720718f4c226f476672a5ebc3)
:   pnfsmanager: allow restricted user with UPLOAD to create parent directories

## Release 4.1.21

### frontend

When a user does not have the permission to read a file (or is simply
not logged in), dCache would previously report a 500 
Internal Server Error. This error reporting was improved, 
reporting 401 Unauthorized or 403 Forbidden
as appropriate.

### ftp

If the ftp client requests a proxied passive transfer with a different
IP family from the control channel (i.e., the client connects using IPv6
and requests an IPv4 data channel, or vice versa) the ftp server must
select which IP address it should return to the client.

As pointed out by Francesco Prelz (thanks!), the door currently selects
the first address from the same interface that has the desired IP
family. However, this may not be accessible by the client.

This release updates address selection so that only usable addresses
will be returned to the clients.

### info

Clients querying the info service (such as info-provider
and storage-report) are now informed
of the number of files stored in a space reservation.

The info service now displays the time at which the information it displays
was recorded.

### poolmanager

This release increases responsiveness for users that are not allowed to stage files, and for NFS users who access offline files. 
In cases where such a user issued a read request at the same time that Pool Manager handled
a staging request, the first request would block for the duration of the staging -- potentially
quite a while. From now on, users that are not allowed to stage receive appropriate error
messages as soon as possible, without having to wait for anyone else.

### xrootd

Support for xrootd `mkdir` was improved. 


### Changelog 4.1.20..4.1.21

<!-- git log 4.1.20..4.1.21 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[97108af956](https://github.com/dcache/dcache/commit/97108af95615768c52251c7359632ae98f5540e6)
:   [maven-release-plugin] prepare release 4.1.21

[0da2eb62e7](https://github.com/dcache/dcache/commit/0da2eb62e7dd7e66a0515e5ae25f8f2000a751a9)
:   xrootd: update to xrootd4j dependency to 3.2.3

[c1eafbd213](https://github.com/dcache/dcache/commit/c1eafbd213a1a5dcbebbd9e3f7c3d488b6145cfb)
:   dcache-frontend: fix error message for IdResource

[af3d35159e](https://github.com/dcache/dcache/commit/af3d35159e5c3a3710234d51675e9d9230ea4ff4)
:   ftp: better address selection for cross-family passive proxied transfers

[0919b25eab](https://github.com/dcache/dcache/commit/0919b25eabf9abff48e3657497bcdcfd1282388e)
:   info/space-manager: monitor number of files in reservation

[afe43d0f0c](https://github.com/dcache/dcache/commit/afe43d0f0c4d181ac631ccd61c1aa70d8b3aea17)
:   info: display the timestamps when metrics were collected

[4ea99a4997](https://github.com/dcache/dcache/commit/4ea99a49975dbd246176c9fd05ef0ef209448514)
:   poolmanager: do not squash request if state is not allowed

[664469b785](https://github.com/dcache/dcache/commit/664469b7858c5097774cce7d3dec6a295ef183b0)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.20

### sysytemd

Systemd did  not inherite the system-wide limits and was  completely ignoring  `/etc/security/limits.d/92-dcache.conf`.
This is now fixed and the limits successfully loaded and enabled as expected.

### vehicles

The current release has fixed serialization regression in `FileCorruptedCacheException`.

### Changelog 4.1.19..4.1.20

<!-- git log 4.1.19..4.1.20 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[de4acc9](https://github.com/dcache/dcache/commit/de4acc98363a6169fa657ae5a9cb68c9ae2898b2)
:   [maven-release-plugin] prepare release 4.1.20

[9faf17e](https://github.com/dcache/dcache/commit/9faf17e888086fb908a24c3400e91455f26db944)
:   vehicles: fix serialization regression  in  FileCorruptedCacheException

[883e2fd](https://github.com/dcache/dcache/commit/883e2fd20514768baf6cf332ae4584a1915072cf)
:   [maven-release-plugin] prepare for next development iteration

[8c67519](https://github.com/dcache/dcache/commit/8c675197547d38c58472d1767293bf34356629c8)
:   systemd: Add `/etc/security/limits.d/92-dcache.conf` in the dcache systemd unit and generator.

## Release 4.1.19

### Changes affecting multiple services

This rlease fixes an issue with WebDAV 3rd-party-copy requests that are
authorized using a macaroon that is only valid for writing a specific file.

NOTE: both the webdav door and transfermanagers must be updated before
the fix is effective. 

The timeout used by dCache when attempting to send a Kafka event is now
adjustable via the configuration properties dcache.kafka.maximum-block
and dcache.kafka.maximum-block.unit.

The default timeout for pools, and the xrootd, nfs and webdav doors is
now non-zero. This should fix the problem of kafka events being lost
under normal operational conditions.

### pool

In order to help with debugging issues with partial FTP transfers, 
dCache pools now are able to log considerable information about failed FTP
transfers. 

This is controlled by the new property `pool.mover.ftp.enable.log-aborted-transfers`.

### webdav

dCache can now transfer data with a remote site, authenticating with
that remote site using a delegated X.509 credential, but authenticating
locally with a macaroon.

### xrootd

This release updates xrootd4j, which should help fix occasional "pad block corrupted" issues with older clients.


### Changelog 4.1.18..4.1.19

<!-- git log 4.1.18..4.1.19 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5d7936f906](https://github.com/dcache/dcache/commit/5d7936f90659afa73e98d8f829d457852a21017d)
:   [maven-release-plugin] prepare release 4.1.19

[f78d25b72b](https://github.com/dcache/dcache/commit/f78d25b72bc57dac725ef7095b23119165e58a6f)
:   pom.xml:  update xrootd4j dependency to 3.2.3

[0b1cb2522a](https://github.com/dcache/dcache/commit/0b1cb2522a249f7081e217310921b2f3e5c3c2bd)
:   webdav: use TLS credential directly for gridsite

[00f7be99b4](https://github.com/dcache/dcache/commit/00f7be99b4ebc5e55c3a5e9afe9b245888e77157)
:   pool: instrument ftp mover to show partial transfers

[1703a800ed](https://github.com/dcache/dcache/commit/1703a800ed52da193b50c62947af9e68165d772b)
:   dcache: add configuration for the Kafka producer timeout

[9e8499a872](https://github.com/dcache/dcache/commit/9e8499a8726fd6b199a68e8d19dd26c4b6feb424)
:   webdav+transfermanagers: support TPC pull with targeted macaroons

[6cae12248b](https://github.com/dcache/dcache/commit/6cae12248b14e3c3375177b0e8587b811e295744)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.18

### frontend

The current release fixed broken directory QoS reporting and now frontend now more accurately describes the QoS of directories; i.e., the
QoS that newly written files will receive when written into this
directory, assuming none of the targeted pools are volatile.

### webdav

the macaroon creation with multiple path restrictions failed with a http error 500 and the error message.
 This is now fixed and the macaroon creation succeeds when multiple path restrictions are defined.

The current release improved  error handling for PROPFIND request.


### Changelog 4.1.17..4.1.18

<!-- git log 4.1.17..4.1.18 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[c905521](https://github.com/dcache/dcache/commit/c905521f834200f2813c43c81674fe0353f6b473)
:   [maven-release-plugin] prepare release 4.1.18

[377285e](https://github.com/dcache/dcache/commit/377285eedb4e74edc25637bda06e012b3d1a4e8d)
:   frontend: fix broken directory qos reporting

[c10aec8](https://github.com/dcache/dcache/commit/c10aec856054baa49c58263e848a0ec5776ac5de)
:   webdav: avoid throwing any exception when listing a directory for PROPFIND

[55d9429](https://github.com/dcache/dcache/commit/55d942902b4d14f6b99b13077a4b5ecea7fd4735)
:   webdav/macaroon: Fix macaroon creation with multiple path restrictions.

[c6c3b7b](https://github.com/dcache/dcache/commit/c6c3b7b6e81bbdcc44f991cf4fe4500a05c48e65)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.17

### dcache-view

Several fixes has been implemented  for  dcache-view:  openid connect redirect handling is fixed, fixed file download.

### ftp

dCache now has the ability to log the current status of a transfer at the point the client decided to abort an FTP transfer. 
This should support a post mortem investigation on why a transfer was cancelled.

### nfs

With the current release the timeout of pnfshandler is configurable and nfs door quicker
 recovers from situations, when a PnfsManager is not available.


### Changelog 4.1.16..4.1.17

<!-- git log 4.1.16..4.1.17 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4b873db](https://github.com/dcache/dcache/commit/4b873dbf68db7c6e06f52c5144fd4f2ff4b87ffa)
:   [maven-release-plugin] prepare release 4.1.17

[abf6008](https://github.com/dcache/dcache/commit/abf6008ad7930ad78077548d442844b1349c4711)
:   ftp: add ability to log client-aborted transfers

[a6b0293](https://github.com/dcache/dcache/commit/a6b0293759083b673e84219147bd13747472567f)
:   nfs: make timeout of pnfshandler configurable

[d1bc061](https://github.com/dcache/dcache/commit/d1bc061d54b81e0cc0ad489c1e1590e2fe3b57e6)
:   dcache: release dcache-view version 1.4.5

[384ce15](https://github.com/dcache/dcache/commit/384ce15ba2d7d4e2702cabd78c882ced0bf2585d)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.16

### NFS

When two clients A and B operate on a file in quick succession, A opening the
file and B deleting it before LAYOUTGET is called, dCache puts the 
transfer into the list of active transfers and returned NFS4ERR_NOENT. If a
client tries to optimize the corresponding CLOSE call away, as some do, 
the entries are never removed from the list, effectively creating a leak.

This problem was fixed. Clients now receive an NFS4ERR_STALE message in those
cases.

### core

Certain transfer failures, such as attempting to
use a space-reservation that has insufficient capacity, resulted in the
door eventually reporting a time-out problem to the client.

A typical error message would resemble

```Request to [>SpaceManager@local ... ] timed out.```

This problem was traced to an internal misconfiguration of a messaging
component and is fixed from this release onwards.

### frontend

The reporting of a file's QoS status in frontend was improved. Files
that are being scheduled for moving to tape are now reported as 
'tape' instead of 'disk'.

### pool

In some cases, storage info data was not included in messages issued during
a pool flush. This caused an irrelevant NPE to be logged. 

This problem was solved, and as a side effect of the fix, billing records
now have the correct format when reporting on flushes:

```08.24 15:24:41 [pool:dcache-lab002-A@dcache-lab002Domain:store] [00006BD12E8925744156AAE87641D4AF73BB,1362] [/] 100013 2 {10006:"Flush was cancelled."}```

vs.

```8.24 15:51:07 [pool:dcache-lab002-A@dcache-lab002Domain:store] [00005C1387649DD74E0491DFE9A98D97DC39,1362] [/] data:sla2@osm 100015 1 {10006:"Flush was cancelled."}``` 

A bug was fixed that occasionally caused problems with the pools' 
Berkeley DB. This could, for example, be triggered by removing files
which were in a flush queue. 

A typical error message was, e.g.

```
27 Aug 2018 12:09:33 (cat2_lhcbtape) [Frontend-dcacheview PoolDataRequest] Fault occurred in repository: Internal repository error. Pool restart required: : CacheExcept
ion(rc=204;msg=Meta data lookup failed and a pool restart is required: (JE 7.3.7) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: En
vironment invalid because of previous exception: (JE 7.3.7) /space/lhcb/tape/pool/meta java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause
incorrect internal state, unable to continue. Environment is invalid and must be closed.)
27 Aug 2018 12:09:33 (cat2_lhcbtape) [Frontend-dcacheview PoolDataRequest] Pool mode changed to disabled(fetch,store,stage,p2p-client,p2p-server,dead): Pool restart req
uired: Internal repository error
```

### webdav

Web clients (such as web-browsers) make OPTIONS pre-flight requests to
discover what they are allowed to do, according to the CORS standard.

Unfortunately, some web-browsers make the OPTIONS request without
presenting any credentials. If the resource is within a protected
directory then dCache currently fails the OPTIONS request.

This release introduces a new behaviour where such requests will always
succeed, so that browser pre-flight requests are not hampered.


### Changelog 4.1.15..4.1.16

<!-- git log 4.1.15..4.1.16 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[3117e40e20](https://github.com/dcache/dcache/commit/3117e40e208ac0f7a862bf6eeb9d77e9307c8c4f)
:   [maven-release-plugin] prepare release 4.1.16

[51316cf59d](https://github.com/dcache/dcache/commit/51316cf59dca054a19c50bce37e7fb1626a4382d)
:   nearline-provides: do not interrupt processing thread on cancel

[c903be8c6c](https://github.com/dcache/dcache/commit/c903be8c6c6257ed606618dd0883441b5a4b4316)
:   nfs41: invalidate open-state on layoutget if file is removed

[610802bae9](https://github.com/dcache/dcache/commit/610802bae996c171ba86bf4261ef590c11aacf65)
:   pool: fix NPE on flush

[09f8da57cd](https://github.com/dcache/dcache/commit/09f8da57cd8d027f9d0e11cda09b381da85da60d)
:   webdav: always respond to OPTIONS request

[3addbcf0cb](https://github.com/dcache/dcache/commit/3addbcf0cb71937fe0ea5824e1ca8a6b83e80077)
:   core: ensure pool/poolmanager communication receives errors

[302edf9436](https://github.com/dcache/dcache/commit/302edf9436dc14f74a13dc7159650900270736a1)
:   frontend: add targetQoS for not-yet-flushed tape files

[c07f1e2a8c](https://github.com/dcache/dcache/commit/c07f1e2a8c557fb0bf6a8d54d1c1ec274447bf81)
:   [maven-release-plugin] prepare for next development iteration

[cb86e6f1ad](https://github.com/dcache/dcache/commit/cb86e6f1ad212a5a6a38f11c4d07af9f51d83ea9)
:   dcache: release dcache-view version 1.4.3

## Release 4.1.15

### gplazma

The OidcAuthPlugin  plugin was  updated so that users whos op does not claim
 `name`, and does not claim `given_name` nor
`family_name` can use dCache.

### pool

This release fixed  the log stack-trace for `queue` admin commands and now bad admin input for the following admin commands no longer results in a stack-trace being logged:

* queue activate
* queue activate class
* queue remove class
* queue suspend class
* queue resume class
* queue remove pnfsid

### poolmanager

 NPE is fixed when staging files back from tape and
`poolmanager.enable.cache-hit-message` is true.

### webdav

The current release updated   default credential delegation for third-party copy so that now requesting a third-party copy using a macaroon does not trigger a failed
attempt to OpenID-Connect delegation.


### Changelog 4.1.14..4.1.15

<!-- git log 4.1.14..4.1.15 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d01d6ec](https://github.com/dcache/dcache/commit/d01d6ec3dc07579a47ce5f7009318d2251997c51)
:   [maven-release-plugin] prepare release 4.1.15

[69d3818](https://github.com/dcache/dcache/commit/69d3818eb76e1d5002eefc0038d3b9770e62cca8)
:   poolmanager: fix NullPointerException when staging files and reporting hits

[ccca569](https://github.com/dcache/dcache/commit/ccca56927868238e5cbca46f26a7ff0c84e43ccf)
:   gplazma: oidc fix FullNamePrincipal creation

[a3a2904](https://github.com/dcache/dcache/commit/a3a2904ef06d4b06332e17df5e2901b81b414d1a)
:   libs: update jetty to version 9.4.11

[0d8ef70](https://github.com/dcache/dcache/commit/0d8ef7012d37094c4ca185d757224175bd2e3d39)
:   pool: 'queue' admin commands not the log stack-trace on bad arguments

[fd3e041](https://github.com/dcache/dcache/commit/fd3e041850315bd181113b7b43820f8d8f59634e)
:   webdav: update default credential delegation for third-party copy

[50b839d](https://github.com/dcache/dcache/commit/50b839d91203079d662f46b6a089f413236602f9)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.14

### history

This release fixes a bug that could cause startup errors
in the history service in the face of network errors. 

### many

Remote pool monitor would occasionally log stack traces from exceptions  
when a domain shut down due to an interrupt. This has been fixed, reducing
the number of irrelevant log entries in such situations.


### Changelog 4.1.13..4.1.14

<!-- git log 4.1.13..4.1.14 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[e5285aa7f7](https://github.com/dcache/dcache/commit/e5285aa7f770f64ef2377d247c6809888116c5ba)
:   [maven-release-plugin] prepare release 4.1.14

[d56f0715a1](https://github.com/dcache/dcache/commit/d56f0715a1c8552268d7ade604e29a70ea089971)
:   dcache-history: handle Gson syntax errors explicitly

[98c303c423](https://github.com/dcache/dcache/commit/98c303c423591ce75cc8ee94434c85a6997facaf)
:   cells: add handling of RemoteProxyFailureException nested InterruptedException to UncaughtException handler

[8a629cf44a](https://github.com/dcache/dcache/commit/8a629cf44ad78f0144df424b54c8a7b3c55b94fb)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.13

### nfs

dCache 4.1 now uses nfs4j version 0.16.2, which includes a bugfix that should
help avoid some rarely observed deadlocks with current Linux clients.


### Changelog 4.1.12..4.1.13

<!-- git log 4.1.12..4.1.13 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4b67640b3c](https://github.com/dcache/dcache/commit/4b67640b3c8d466b8666b0824a4466626621a65c)
:   [maven-release-plugin] prepare release 4.1.13

[71b2c7023f](https://github.com/dcache/dcache/commit/71b2c7023fad56e8b25f88c31926f95e33c5e91c)
:   pom: nfs4j-0.16.2 bugfix version

[2664c4a163](https://github.com/dcache/dcache/commit/2664c4a163fd68cc2c00ee93c62f37bd7a22f1c4)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.12

### PNFS

### pool

HTTP responses now contain more meaningful messages along with the 
HTTP response codes, instead of only just showing stock messages
like "400 Bad request". 

### webdav

When the WebDAV door proxies a transfer and a transfer failure occurs, the
door previously always just reported "500 Internal Error". This reporting
is now improved, with any more detailed error messages from (possibly) 
other services taking precedence. For example, if a pool returns a 400 error code, 
thus complaining about the client's request, this code is reported instead, 
which should help with diagnosing the error's cause.


### Changelog 4.1.11..4.1.12

<!-- git log 4.1.11..4.1.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[39ef1bad70](https://github.com/dcache/dcache/commit/39ef1bad705db27f90e4289f302a5ccef624f5ab)
:   [maven-release-plugin] prepare release 4.1.12

[f16cdb0dd9](https://github.com/dcache/dcache/commit/f16cdb0dd9de6b9d1c830332c650b49d6ccf2e9b)
:   webdav: pass on status message phrase to client

[441f07ddd7](https://github.com/dcache/dcache/commit/441f07ddd7a2e006c8c42c497b598feb8641fb85)
:   pool: update HTTP mover to report errors as HTTP status message phrase

[97d62e96f9](https://github.com/dcache/dcache/commit/97d62e96f958b991d8f0d88deea2f9d2910d4a78)
:   pnfsmanager: fix digest name handling in `get file checksum` command

[7cbfb3ba88](https://github.com/dcache/dcache/commit/7cbfb3ba8827de8f765305f2ec43c138026b7d8c)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.11

### resilience

Resilience suffered from a bug that would lead to a NoSuchElementException when a pool name no longer 
mapped to a location known to the Resilience service. This issue has been fixed.

When multiple pools go offline it is possible that
all replicas for a given resilient file become unreadable.
If the file is not CUSTODIAL, and thus cannot be restored
from tape, the discovery of such a file during scanning
will generate an error in the 'history errors' listing,
in the resilience domain .resilience log, and will also
raise a general alarm concerning the pool.


There currently exists a command, 'inaccessible', which
generates a listing of the pnfsids on a given pool
which in the current state of dCache have no readable 
replicas.  However, this command takes a while to complete
(asynchronously), and the output is written to a file
which must be viewed by logging in.

This release introduces 'refering pool' information to the
error output so that grepping the resilience log for a given
pool becomes easier, and adds options to the command to check
further details.


### Changelog 4.1.10..4.1.11

<!-- git log 4.1.10..4.1.11 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[20b2619adc](https://github.com/dcache/dcache/commit/20b2619adc998d2ac2f7f76c3153baf449ed9489)
:   [maven-release-plugin] prepare release 4.1.11

[7f752ec2d8](https://github.com/dcache/dcache/commit/7f752ec2d8297720d9dfbb6f5c61ab6b078be0a2)
:   dcache-resilience: improve inaccessible file accounting

[d50e97549c](https://github.com/dcache/dcache/commit/d50e97549ca42d791fef56f74ce09a245ad1b3fc)
:   dcache-resilience: skip invalid cancel filters

[da6366ad2d](https://github.com/dcache/dcache/commit/da6366ad2dc36f3f44ce35ac28a846720d4e7a3b)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.10

### scripts

A regression in the `dcache pool convert` command was fixed; the command works again.

### scripts

The instructions that are printed out once `dcache pool convert`
completes successfully now correctly point to the 
property that needs to be updated, namely `pool.plugins.meta`.


### Changelog 4.1.9..4.1.10

<!-- git log 4.1.9..4.1.10 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5607cf0272](https://github.com/dcache/dcache/commit/5607cf02729ac80522645a72ba523c0c57025bad)
:   [maven-release-plugin] prepare release 4.1.10

[5544fb58cd](https://github.com/dcache/dcache/commit/5544fb58cdb7f3bf243b853c922631f7f1b5e32c)
:   pool: fix 'dcache pool convert' command

[88e9615ac8](https://github.com/dcache/dcache/commit/88e9615ac850b52514a9a8ad04c138030916412b)
:   scripts: update reference to configuration property

[cff48234a4](https://github.com/dcache/dcache/commit/cff48234a45d1a8327f14bedeef7324cc72a2727)
:   pool: fix metadata migration tool to use Path

[2278e32aa2](https://github.com/dcache/dcache/commit/2278e32aa2474c168cee61aa83e5c15e9c6f5084)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.9

### frontend

The frontend now correctly handles situations where a transfer that is already
completed is killed. Be aware that in order to make use of the bugfix, both
the pools and the head nodes need to be updated to at least 4.1.9. 

### ftp

Since commit [eefb964](https://github.com/dCache/dcache/commit/eefb9641e9c4c5ff0ee5f6793928e311b334a064),
3rd-party-transfers using ftp between two dCache endpoints had an issue
where connections were not reliably closed. This release fixes the problem.

### pool

This release improves dCache's robustness against network errors: In case 
registering a file with PNFS manager fails due to a timeout, the request
is retried transparently. 


### Changelog 4.1.8..4.1.9

<!-- git log 4.1.8..4.1.9 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[508e23b42e](https://github.com/dcache/dcache/commit/508e23b42eafa3be26900691c862bbf4c914ec8b)
:   [maven-release-plugin] prepare release 4.1.9

[1e26192be7](https://github.com/dcache/dcache/commit/1e26192be73b0f3a383f76faa27bd9c4511269eb)
:   ftp: always close proxied data connection if client closes their half

[1281d9b1b6](https://github.com/dcache/dcache/commit/1281d9b1b6a0e6743ba766ff35604e91e5849eba)
:   vehicles: fail-fast on invalid path

[2403b788a8](https://github.com/dcache/dcache/commit/2403b788a892b6750deec5817da0bdc6d5235b9f)
:   pool: retry request to pnfs manager if timed out

[e4d8bf9857](https://github.com/dcache/dcache/commit/e4d8bf9857293e7f354c32fc766eb3a050d5c57c)
:   dcache-frontend: invalidate transfer when killed mover not found

[588777f26f](https://github.com/dcache/dcache/commit/588777f26fcfc84a74996aae7e38126aa74fb683)
:   [maven-release-plugin] prepare for next development iteration

[51d4b79234](https://github.com/dcache/dcache/commit/51d4b792343e7194aa7fb416035becf4847831af)
:   dcache-frontend: add "Requires admin role" to alarms methods (Swagger)

## Release 4.1.8

### dcache-view

Now there is a live update of QoS when changed. The current release added the following fixes: fixed the upload toast to show the current status,
 fixed regression regarding the processing of click events on vaadin-grid tables and fixed path request in view-file. 

### door

The current release added  support for a door advertising multiple hostnames or IP addresses.
dCache doors can  now advertise multiple interfaces, including DNS aliases.

### webdav

Milton's OPTIONS handler was returning  a 404 error if an OPTIONS request
targets an entity that did not exist. This behavior deviated from
Apache httpd server and was resulting  in failed uploads for dcache-view.
The current release fixed.


### Changelog 4.1.7..4.1.8

<!-- git log 4.1.7..4.1.8 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a3c1971](https://github.com/dcache/dcache/commit/a3c19712d334905bf24f5e9ef7849222598a1ebe)
:   [maven-release-plugin] prepare release 4.1.8

[db227cd](https://github.com/dcache/dcache/commit/db227cda77880dd6f5c15b06cf8626cf91633820)
:   gplazma.properties: hint to enable roles

[768e3f7](https://github.com/dcache/dcache/commit/768e3f7388b91e0f5b79f27fc850d0c02cda3487)
:   doors: support advertising multiple addresses in LoginBroker

[e467725](https://github.com/dcache/dcache/commit/e4677256941de9062dfb4e212e1caf0001d88b08)
:   webdav: do not return 404 for OPTIONS request targeting absent entity

[7fc66fa](https://github.com/dcache/dcache/commit/7fc66fab6de2bd566bfe5dfd276e6ea345849eea)
:   dcache: release dcache-view version 1.4.2

[08eeef4](https://github.com/dcache/dcache/commit/08eeef480d8adc5fc94f4be89904c576a1aa3f8c)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.7

### pool

There was a regression resulting in the pool logging somewhat
useless information during start-up.

This is now fixed and during the `pool`s start-up, the `replica store`s locations are logged.


### Changelog 4.1.6..4.1.7

<!-- git log 4.1.6..4.1.7 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[7f9212b](https://github.com/dcache/dcache/commit/7f9212b8b50218c384355beee2cb043b58df5220)
:   [maven-release-plugin] prepare release 4.1.7

[89eb811](https://github.com/dcache/dcache/commit/89eb811eebe44bb77e512e215aa2c0948ad832a6)
:   [maven-release-plugin] prepare for next development iteration

[677cc2e](https://github.com/dcache/dcache/commit/677cc2e86ef3e6f1c63644805f7bdc2da79324d7)
:   pool: fix logging of replica-store on start-up

## Release 4.1.6

### dcache

The current release updated dcache view version. 
New v1.4.1 includes following fixes  and improvements:  redesign rename component, fix memory leakage in view-file, fix rendering & lazy-loading issue in view-file. change billing records and pool activity to use new provider and 
modify list-row element internal design.



### Changelog 4.1.5..4.1.6

<!-- git log 4.1.5..4.1.6 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[25dd502](https://github.com/dcache/dcache/commit/25dd5024965e4845e3cf0b8c48f25eddb90a79c3)
:   [maven-release-plugin] prepare release 4.1.6

[888012f](https://github.com/dcache/dcache/commit/888012f5d3eaed83ace732e78e8d94896b51d4a5)
:   [maven-release-plugin] prepare for next development iteration

[bfcaa5c](https://github.com/dcache/dcache/commit/bfcaa5c7293cf2947b767d4f2364985e7bee803a)
:   dcache: release dcache-view version 1.4.1

## Release 4.1.5

### dcache-resilience

There was a small regression in the way resilience computes
the number of operations necessary to adjust copies when
a storage unit definition changes.

The current rellease fixed  computation of operation count when storage requirements change.

### ftp

In order to aid diagnosing problems when FTP response being lost, now dcache  logs failures to wrap/encrypt responses.

### webdav

The current release improved error handling for client authentication with OpenID-Connect.
 A more complete set of information is now logged if OIDC delegation fails,
supporting the ability to discover why the delegation failed.


### Changelog 4.1.4..4.1.5

<!-- git log 4.1.4..4.1.5 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f5cfa0c](https://github.com/dcache/dcache/commit/f5cfa0c9f54d56983e202000ad4df26250d514ac)
:   [maven-release-plugin] prepare release 4.1.5

[fdf6d26](https://github.com/dcache/dcache/commit/fdf6d26d78b06ba772b7524d6f20b422c5cf421b)
:   scripts: add support for parsing ZooKeeper transaction logs

[19113dc](https://github.com/dcache/dcache/commit/19113dcb67d1a5787d1d022ba74b46c5f4c54e4a)
:   ftp: log failures to wrap/encrypt responses

[56086ff](https://github.com/dcache/dcache/commit/56086ff81c620d8f78b6862b9746024db7506de3)
:   dcache-resilience: fix computation of operation count when storage requirements change

[d2acb6c](https://github.com/dcache/dcache/commit/d2acb6c89d289148f08783364e0310a253bfe016)
:   webdav: log errors if OIDC delegation fails

[ab951e9](https://github.com/dcache/dcache/commit/ab951e9137e1fdb14f1ddae59940f8456158251a)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.4

### ftp

Error reporting in the FTP service has been improved: in some mixed IPv4 / IPv6 scenarios,
only unclear error messages were reported. 


### Changelog 4.1.3..4.1.4

<!-- git log 4.1.3..4.1.4 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[98193cf1b8](https://github.com/dcache/dcache/commit/98193cf1b8394be2560423f4bfc72bc50ea05064)
:   [maven-release-plugin] prepare release 4.1.4

[62553a82cd](https://github.com/dcache/dcache/commit/62553a82cd62ca0c30b65177cfc414ec6609bdac)
:   ftp: returned error is too vague for meaningful investigation

[715b6966d4](https://github.com/dcache/dcache/commit/715b6966d481545bb4f9f80831400ad141435f21)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.3

### frontend

The current release improved `REST API` swagger documentation that describes which aspects of
dCache are affected by related operations.

### nfs

Situations, where selection process was incomplete could not  be manually recovered
When selection process incomplete, due to `PoolManager` restart, there was no way  to trigger a new selection.
The current release added  two new commands to `nfs door`:  `transfer retry` and `transfer forget`.  

The first command manually re-activates  existing transfer by re-trying selection process. 
The second one should be  used to  completely 'forget' the stale transfer and let client to trigger a fresh selection process.


### Changelog 4.1.2..4.1.3

<!-- git log 4.1.2..4.1.3 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ee31290](https://github.com/dcache/dcache/commit/ee31290f10056b43c558dd4d3a23775c36975f72)
:   [maven-release-plugin] prepare release 4.1.3

[9fca38c](https://github.com/dcache/dcache/commit/9fca38c2ae6950a67fad23838190dcbcd780e640)
:   frontend: add swagger Tag descriptions

[97a6e1e](https://github.com/dcache/dcache/commit/97a6e1ef2a370f3c44f22e910218152c275ea2b2)
:   nfs: add commands to reactivate stale transfers

[07f5f7c](https://github.com/dcache/dcache/commit/07f5f7cad38b6073805a216abc7ea0c7d0a8ebcd)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.2

### ftp

A NullPointerException could occasionally occur in ftp. This issue was fixed in this release.

The ftp door now provides far more detailed proxy information (including 
ASCII-art diagrams of connection status).

FTP has received extra debug-level logging to ease debugging.

### gplazma

gplazma now supports a Fermilab-specific authorization data source in JSON format.

### pool

During active ftp transfers, connection problems would lead to the rather unhelpful error
message "451 General problem". This error reporting was refactored, so that diagnosis
of the cause is now greatly facilitated.

### poolmanager

A potential NullPointerException (that was not observed in real-world usage until now)
was fixed in Pool Manager.

### resilience

A correction to resilience's error handling results in no more reports on
non-resilient (but corrupted) files. 

### spacemanager

In order to facilitate debugging, Space Manager now logs link-group related content
in greater detail.


### Changelog 4.1.1..4.1.2

<!-- git log 4.1.1..4.1.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b2ee4ccbe3](https://github.com/dcache/dcache/commit/b2ee4ccbe331962fe26bcc39820a148c5e6511d2)
:   [maven-release-plugin] prepare release 4.1.2

[102f38bbe7](https://github.com/dcache/dcache/commit/102f38bbe76ae218dce71ee098092693c6ca0bac)
:   poolmanager: fix migration command if named pool is removed

[95053574d6](https://github.com/dcache/dcache/commit/95053574d6478b721565fea7a079e8c9a18c3505)
:   ftp: improve proxy logging to facilitate debugging

[c33c4390d4](https://github.com/dcache/dcache/commit/c33c4390d47b14ee978e6236243183a729b554c1)
:   dcache-resilience: repair over-aggressive handling of broken file messages

[11d215e903](https://github.com/dcache/dcache/commit/11d215e90304d53de05845487c6942d96b5b945b)
:   ftp: add detailed information about proxy status

[1d09af9b53](https://github.com/dcache/dcache/commit/1d09af9b5359d18f6bb10bb3fa9d95423c68e581)
:   pool: fix error message for failed active FTP transfers

[d7704546c8](https://github.com/dcache/dcache/commit/d7704546c85fb168458f1a0a8c874bf969d83588)
:   fix the project version in pom.xml

[2a5f421a08](https://github.com/dcache/dcache/commit/2a5f421a08c76031e7a384a9fd6b46619cd31609)
:   gplazma-fermi: fix last modified check in junit test

[791f03fde5](https://github.com/dcache/dcache/commit/791f03fde5853d406c00c3bcf9bc7bdb1787463e)
:   spacemanager: add remote pool monitor debug logging

[029bcc8817](https://github.com/dcache/dcache/commit/029bcc8817030b3fb36d1d31a0427cd40ca34eec)
:   ftp: avoid NPE if connection is closed.

[d2ae92d1dc](https://github.com/dcache/dcache/commit/d2ae92d1dc857e010b9f12ed771a819e98a6c468)
:   gplazma-fermi: add mapping plugin to support VO group and username from file

[85989a2471](https://github.com/dcache/dcache/commit/85989a247180a18470625bf5f9738d767ce68b8a)
:   [maven-release-plugin] prepare for next development iteration

## Release 4.1.1

### Changes affecting multiple services

This version removes the (by now unused) directory /var/lib/cell-info
from a default installation. The directory was previously used to store
cell info data. With the introduction of the history service in dCache 3.2.1,
this became obsolete.

A small bug-fix addresses wrong directory permissions on tar or Debian
packages, where the directory /var/lib/dcache/pool-history had the
wrong permissions.

The deprecated properties for configuring alarms have now finally been made 
unavailable.

### chimera

An internal update enables chimera to use PostgreSQL 10.

### nfs

A modification in IP address handling greatly increases the speed of 
NFS client access for Linux clients in mixed IPv4/IPv6 environments.

Prior to Linux 4.12, Linux clients with only an IPv4 address would wait
for (timeout * retry) seconds when connecting to pools with both a v4 and v6 
address. This was [fixed upstream in Linux 4.12](https://github.com/torvalds/linux/commit/6ea44adce91526700535b3150f77f8639ae8c82d), but that fix was not
backported to e.g. RHEL 7 yet.  


### Changelog 4.1.0..4.1.1

<!-- git log 4.1.0..4.1.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[986bde1cce](https://github.com/dcache/dcache/commit/986bde1cceb19de23dd5d2fa7b6e179de687ae30)
:   [maven-release-plugin] prepare release 4.1.1

[96fef30a55](https://github.com/dcache/dcache/commit/96fef30a552dd3f78c189ece7b1143a5842363e1)
:   nfs: filter out IPv6 DS addresses if client connected with v4

[0d5d837a66](https://github.com/dcache/dcache/commit/0d5d837a66329e15200ffdfdaaa3a89cb3ca4cb0)
:   chimera: adjust postgres driver provider to new version schema

[684780b296](https://github.com/dcache/dcache/commit/684780b29608082fcefebb186ef2913742df78cb)
:   [maven-release-plugin] prepare for next development iteration

[6e4e69c8a8](https://github.com/dcache/dcache/commit/6e4e69c8a8a798042e688a77b11b8cbfd5c37c89)
:   skel: remove extraneous cell-info dir

[cfeb7b1e48](https://github.com/dcache/dcache/commit/cfeb7b1e48fd085ecd803a1589de6f84b904d1c7)
:   packaging: add missing chown and chmod on pool-history

[bc834d029f](https://github.com/dcache/dcache/commit/bc834d029f031817d6344957447cb348c21311d9)
:   skel: make deprecated alarms properties forbidden

## Release 4.1.0


### Billing

A newly-introduced configuration property `dcache.enable.kafka` controls whether the Kafka messaging
system is used for message delivery.

Two new global options to control publishing via Kafka have been added:

```
dcache.enable.kafka = true|false
dcache.kafka.bootstrap-servers= host1:port,host2:port
```

The kafka topic is **billing** and is currently not configurable. The records are written as JSON 
objects, like:



    {  
        "msgType": "request",  
        "mappedUID": 0,  
        "date": "Fri Mar 02 10:48:41 CET 2018",  
        "cellName": "NFS-dcache-lab007",  
        "VERSION": "1.0",  
        "session": "door:NFS-dcache-lab007@core-dcache-lab007:AAVmauGezqg:1519984121401001",  
        "fileSize": 969,  
        "status": {  
          "msg": "",  
          "code": 0  
        },  
        "storageInfo":"test:public@osm"  
        "cellType": "door",
        "cellDomain": "core-dcache-lab007",
        "mappedGID": 0,  
        "billingPath": "/",  
        "sessionDuration": 9,  
        "queuingTime": 0,  
        "pnfsid": "0000328CE70CBAF24579BF5AD373C05AECC0",  
        "transferPath": "/",  
        "@timestamp": "2018-03-02T09:48:41.412Z",  
        "clientChain": "131.169.240.87",  
        "type": "dcache_billing",  
        "client": "131.169.240.87",  
        "subject": [  
          "UidPrincipal[0]",  
          "GidPrincipal[0,primary]",  
          "GidPrincipal[0]",  
          "Origin[131.169.240.87]"  
        ]  
      }  

### Frontend

The 4.0 release saw the introduction of a range of RESTful services which
provide an administrative overview of the system.  There have been
a few minor changes in the intervening releases. The API is now stable with 4.1.

To summarize:  these services provide overviews of file data,
poolmanager configuration, service state, pool configuration and activity,
and system alarms. One can obtain full information on individual files by pnfsid;
billing records for reads, writes, p2ps, stores, restores and removes of a
given file are also available if your system is configured to use the billing
database.  With the database also comes histogram data for tracking reads,
writes, p2ps, stores and restores over intervals of 24 hours, 1 week, 1 month
and 1 year.

Histogram data on pool queues and file lifetime is similarly aggregated over
pools and pool groups.  This data collection is actually done by the history
service (introduced in 3.2), with which the frontend communicates,
so it is only available if the former has been deployed.

Finally, information corresponding roughly to the poolmanager.conf file is
furnished by the selection service API, while the space management API
provides link group and space token information.

With 4.1 also comes integration with Swagger.  All RESTful services have been
provided with basic annotations in order automatically to generate API documentation.
A convenient web interface which allows exploration and testing of the API,
describing paths, parameters, error codes and JSON output, now runs at:

```
https://[host]:3880/api/v1.
```

Consulting this page is the easiest way to familiarize yourself with the API.

A number of properties have been added to the defaults for the frontend, most
of which have to do with communication with other services (timeouts, endpoints,
etc.).  Consult the frontend.properties file for details.

### FTP

GridFTP defines a set of different transfer modes, among them streaming mode (MODE S) and
extended block mode (MODE E). MODE E transfers now support keeping the data connection alive 
in between uploads, resulting in significantly higher throughput and providing better compatibility
with the Globus transfer service.

### gplazma
The LDAP plugin is updated to natively support **auth** phase. As a result,
there is need for an extra mutator plugin to use ldap based authentication
```
    auth     optional   ldap
    map      sufficient ldap
```
NOTICE, that even it's not required to use ldaps:// url, it STRONGLY avised to do so!

The configuration of LDAP-only-setups, which are becoming more important, is now much easier.
Previously, the plugins `jaas`, `mutator` and `ldap` were necessary for such a setup. Now, the 
`ldap` module is sufficient. An example of a new-style gplazma configuration file would be:

```
 auth     optional   ldap
 map      optional   ldap
 session  optional   ldap
 identity optional   ldap
```

This functionality relies on using either OpenJDK or Oracle JDK.


### NFS
New export option **lt=** to control layout types is added. The supported values are:
   - flex_files
   - nfsv4_1_files
While it is recommended to use the flex_files layout type, only modern kernel versions (and RHEL 7.5)
are supporting it. If kernel client capabilities are unknown, use nfsv4_1_files, which is the
default behaviour.


### Pool
Added configuration option to publish billing records into apache-kafka queue:

```
pool.enable.kafka = true|false
pool.kafka.bootstrap-servers= host1:port,host2:port
```

Added IO statistics to monitor storage performance.
Billing can now log, for read and write operations, the mean bandwidth
of each IO request and time that the disk system was handling requests
and idling.  It is important to note that the dCache configuration that describes the billing log
format must be updated before these values are actually recorded.


### Resilience

In the various 4.0 releases, resilience was improved in a number ways.  We
summarize them here.

First, a number of fixes have made it more robust:  uncaught
exceptions should no longer allow tasks to get stuck in the queue, and
the logic concerning available file sources when clear cache location messages
has been fixed.  In addition, we have fixed the way fatal error alarms
are generated so as to avoid spamming the alarm service and domain logs
(there is now a special resilience log for recording these errors on a
file-by-file basis, configured as usual via properties and logback.xml).

Two features have been added to resilience which enhance its usability.
The first involves a redefinition of what pools it considers to be accessible
as opposed to usable (writable) for making copies.  With this change it is
now possible to close off a resilient pool from external writes while still
allowing resilience to use it, i.e., by setting

```
\s resilient-pool-1 pool disable -store
```

Resilience no long considers such a pool 'inaccessible'.  The rule is now:
a pool is readable (by external clients) unless its disabled flags include
'fetch', and is writable (by resilience) unless its disabled flags include
-p2p-client.

The second new feature is integration of staging into resilience. Files
which are CUSTODIAL ONLINE (i.e., resilient but also stored on tape)
will now be automatically restored from tape if all their current replicas
are not accessible (e.g., because all those pools have gone offline). Since
this is achieved via communication with the Pool Manager, we have made sure that
a resilient group whose pools are connected to tape (viz. for stores) but for
which staging has been disabled will nonetheless receive the first restored
replica via p2p from some other eligible staging pool selected by the Pool
Manager.

The default sorting order for the admin history and history errors commands
has been changed from descending to ascending (more user friendly).

Resilience has now been running for almost a year on a number of systems at
DESY and elsewhere with reliable and performant results.


### Zookeeper
Updated external zookeeper libraries to version 3.4.11

### Changelog from 4.0.0 to 4.1.0

<!-- git log 4.0..4.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[684780b](https://github.com/dcache/dcache/commit/684780b29608082fcefebb186ef2913742df78cb)
:   [maven-release-plugin] prepare for next development iteration

[95875a4](https://github.com/dcache/dcache/commit/95875a4626d93bbe7304ac8bfb568c0dab7f18f1)
:   [maven-release-plugin] prepare release 4.1.0

[bbfc504](https://github.com/dcache/dcache/commit/bbfc5047feb9637eb2394cd2af9edde5b971776a)
:   pom: use nfs4j-0.16.1

[87c2340](https://github.com/dcache/dcache/commit/87c234001dc6d46b2f8031177c747d6eae574a7a)
:   dcache-frontend: revise Swagger annotations

[2411ac7](https://github.com/dcache/dcache/commit/2411ac7429f0f7782052f8649e758e66b0ed5154)
:   dcache: release dcache-view version 1.4.0

[30422a8](https://github.com/dcache/dcache/commit/30422a878b87266b58b627a228c1641e6e917cee)
:   webdav: support multiple RFC 3230 'Want-Digest' headers

[a1bc255](https://github.com/dcache/dcache/commit/a1bc25523fffb5259a968bcf77e27dd13e5b4acd)
:   ftp: ensure half-closed connections are fully closed on return

[81cc9df](https://github.com/dcache/dcache/commit/81cc9dfc53548c0a7378706d146e1297468ccdf7)
:   ftp: close pool connection with MODE-E proxy

[1f96951](https://github.com/dcache/dcache/commit/1f9695142cbf5ead773b044c1e4e6a7c43054a18)
:   dcache-frontend: avoid null dereferencing for incomplete pool history data

[9a24522](https://github.com/dcache/dcache/commit/9a245225ce4878862733e4818a83dc2681961e30)
:   dcache: avoid NPE from initialization race in RestoreRequestsReceiver in HttpPooMgrEngineV3

[4ae42e8](https://github.com/dcache/dcache/commit/4ae42e80beb2d3488f674ddc7f7be2bf18579ec2)
:   [maven-release-plugin] prepare branch 4.1

[d9e07f3](https://github.com/dcache/dcache/commit/d9e07f39f8dd9bce0cc2b2f85df944d173747339)
:   ftp: complete removal of ancient transaction log

[d01b05f](https://github.com/dcache/dcache/commit/d01b05f886264bc7e7570e27634daea5141fee6e)
:   dcache-frontend: fix predicates in spacemanager resource

[7679b60](https://github.com/dcache/dcache/commit/7679b60f1b546dc85a1da94f2bd533920bf146b7)
:   zookeeper: silence warning and log lifecycle state events.

[259ec4f](https://github.com/dcache/dcache/commit/259ec4fca75176d2f2f40744a5e8a390b537a48e)
:   alarms: fix broken path

[ad12325](https://github.com/dcache/dcache/commit/ad12325113ecb77b54b876ccc66b913b580c6e91)
:   Revert "cells: remove custom implementation of curator's PathChildrenCache"

[af4bfbf](https://github.com/dcache/dcache/commit/af4bfbfee38ba9290e799c7463047f74ec89b5c9)
:   config: unify kafka configuration

[edc9822](https://github.com/dcache/dcache/commit/edc98228fab41ae8bbb8e96883e7a3a0e12824c7)
:   dcache: Removed FTPTransactionLog class

[b477cf4](https://github.com/dcache/dcache/commit/b477cf4348680f6bebee56201000050d56dd1ad0)
:   ftp: Removed uses of FTPTransactionLog class

[eb3159a](https://github.com/dcache/dcache/commit/eb3159ada0f4a68a6281a3d05fd6f544f55ef206)
:   TransferManagerHandler: Removed FTPTransactionlog

[94e2a06](https://github.com/dcache/dcache/commit/94e2a0605142bb4e7a6b381758f47d4f2f3911cd)
:   migration: Remove org.dcache.pool.migration.ReverseOrder

[69729b5](https://github.com/dcache/dcache/commit/69729b5708085f7d445edbdeef787ca0113d12cd)
:   dcache-resilience: avoid spamming alarms with abort messages

[6f0b99c](https://github.com/dcache/dcache/commit/6f0b99c3c6503912409171510c3de38d7f34f1fb)
:   Revert "dcache-resilience: avoid spamming alarms with abort messages"

[7294198](https://github.com/dcache/dcache/commit/7294198a8a7f0540f04eb624ca0af8a8e96e2e5f)
:   dcache-resilience: avoid spamming alarms with abort messages

[f49cd17](https://github.com/dcache/dcache/commit/f49cd177d2de890a5ef9b37a176a23060e310c53)
:   ftp: update ProxyAdapter API

[3f30968](https://github.com/dcache/dcache/commit/3f309684b852787b474c027e52100b37e11c4a8a)
:   dcache-history: test git hub test

[f529653](https://github.com/dcache/dcache/commit/f529653d8a1716c7de1638ddf875559f43268108)
:   dcache-frontend: add RESTful space service (spacemanager info)

[b69d55d](https://github.com/dcache/dcache/commit/b69d55da4ca8026c3c289e7f87d491c9c1e65afa)
:   fir broken commit 96beb4184c

[a411e2e](https://github.com/dcache/dcache/commit/a411e2e0d724f6b38c8d7f61c940792d0fe9b0f4)
:   libs: revert "libs: update to  liquibase-3.5.4"

[cc0cbb1](https://github.com/dcache/dcache/commit/cc0cbb144bbc4cd923bac31e104acc1d0d64e9b7)
:   cells: remove compatibility with pre 3.0 releases

[db2a8b3](https://github.com/dcache/dcache/commit/db2a8b30fd0542556506075cade7403dcca1afc1)
:   pool: fix formating for StorageInfo data

[7554be3](https://github.com/dcache/dcache/commit/7554be3b8502cb4591f3903fbef626abfb6bb519)
:   nfs: fix wrong imports

[75d03b3](https://github.com/dcache/dcache/commit/75d03b3aee7c6b96ac72613e2c96783c864a0261)
:   dcache-resilience: handle properly RuntimeExceptions from tasks

[076edee](https://github.com/dcache/dcache/commit/076edee4f86dd9866fd9d7db03298d3841fb5f91)
:   libs: update to  liquibase-3.5.4

[5f97c5a](https://github.com/dcache/dcache/commit/5f97c5ab8c9aa414f04a1e605c9ae88bdad792c8)
:   nfs: add embedded Kafka producer

[eefb964](https://github.com/dcache/dcache/commit/eefb9641e9c4c5ff0ee5f6793928e311b334a064)
:   ftp: support keeping data connections between proxied MODE-E uploads.

[3f8fe3e](https://github.com/dcache/dcache/commit/3f8fe3e78800bc03b2c64a420de4f15444ff97b7)
:   ftp: update JavaDoc for adapter classes

[e31531f](https://github.com/dcache/dcache/commit/e31531ffe5c8c475d21cdb78e3f79a12b8bfbb77)
:   gplazma2-ldap: implement GPlazmaAuthenticationPlugin

[3564ec6](https://github.com/dcache/dcache/commit/3564ec6746311d9c1b42e965c5d5babc31dfcaa6)
:   gplazma2-ldap: re-write ldap plugin in Java

[cc7c87f](https://github.com/dcache/dcache/commit/cc7c87f6824ddfcb4c1a585c149336ae16203279)
:   dcache-resilience: restore proper log level for eviction message

[8534173](https://github.com/dcache/dcache/commit/85341735e6a6323b6b04a710b8f6dbed061839e9)
:   ftp: ensure adapter is closed

[96beb41](https://github.com/dcache/dcache/commit/96beb4184c9d65f7bbd25e111a54e7a1b6b22b97)
:   system-test: enable only nfs41 file layout

[3b71edb](https://github.com/dcache/dcache/commit/3b71edb4dbd03383bc84e3563cfc232423c7b343)
:   dcache-resilience: integrate support for staging files when no valid replicas accessible

[1fa0e4b](https://github.com/dcache/dcache/commit/1fa0e4b68be79c266c02ca6ec5be40b5027865ab)
:   dcache: add filter to pool manager to select a read pool from within a specified pool group

[e7c186b](https://github.com/dcache/dcache/commit/e7c186baea3e5b243b9bade9ccc32c15d98ed658)
:   idcache:exclude hidden dependency to master

[2445198](https://github.com/dcache/dcache/commit/2445198a637a600cff713661f9606db33d852386)
:   ftp: remove rare NullPointerException when proxying data

[886dbf0](https://github.com/dcache/dcache/commit/886dbf016e921ad72143401f6ef6d897edbede77)
:   httpd: do not log an exception if info cell not running

[cdfbdfc](https://github.com/dcache/dcache/commit/cdfbdfcfd486a499b5b7383e288927f7bd75c79e)
:   poolmanager: silence NoRouteToCell for stage queue topic

[deb1fac](https://github.com/dcache/dcache/commit/deb1facab91996904d6688c9b57ede583ea45efb)
:   poolmanager: fix poolmanager startup with certain poolmanager.conf content

[b243c5d](https://github.com/dcache/dcache/commit/b243c5d3faabb98c762723b44d8367ef359d798e)
:   dcache-frontend: change all JSON representations of pnfsid to String type

[37ff3a3](https://github.com/dcache/dcache/commit/37ff3a3430ce7e3bc9cef59402e42640c4f9b966)
:   dcache-resilience: repair faulty commit

[aab9309](https://github.com/dcache/dcache/commit/aab9309ec84617b87d534259d1a9a6517f2ca3ef)
:   pool: bug-fixfor commit@74880c32a97...

[74880c3](https://github.com/dcache/dcache/commit/74880c32a97d760e0eaff42967ea4f15b97d1840)
:   pool: add embedded kafka producer

[de97ecb](https://github.com/dcache/dcache/commit/de97ecb09f5907565f455cf26fb4cc534b8090e4)
:   core: remove getDatabaseId from PnfsId

[ba972b3](https://github.com/dcache/dcache/commit/ba972b33c9f7f614c0b58c70109c829fe593e7e8)
:   dcache-resilience: define non-writable pool to mean p2p-client is disabled

[ea0318b](https://github.com/dcache/dcache/commit/ea0318bc72503d19e7173ea91c5ea2e7a1f9f55d)
:   dcache: fix remote pool monitor wait bug

[e7773a1](https://github.com/dcache/dcache/commit/e7773a1ffbff57686128461070dd4bc1d7a7b36e)
:   cells: wait for zookeeper node before update the content

[a352dfc](https://github.com/dcache/dcache/commit/a352dfcad686b71a37fb7d5c6edb9378c6e6df3b)
:   dcache-resilience: repair handling of broken files*

[5b37a84](https://github.com/dcache/dcache/commit/5b37a8428fb064c21caa61d4d48e86650f95e8e9)
:   packaging: check 'services.sh' after old rpm removed

[2139302](https://github.com/dcache/dcache/commit/21393027999f50fd278e9d2b9c8b9228aa081ecc)
:   core: remove support for '*' PnfsIds.

[413e4ad](https://github.com/dcache/dcache/commit/413e4adcff0b550c21a7dc0efbf6ecbb948e8cd0)
:   core: remove support for 'domain' in PNFS-style PnfsIds

[fdd0731](https://github.com/dcache/dcache/commit/fdd073117595db5227cffa2581450716e77df0d3)
:   utils: do not iterate over certificates twice during validation

[1e3e96f](https://github.com/dcache/dcache/commit/1e3e96f7da8f98d7b0e0ffd7017da277b79e8c66)
:   core: tidy up unit-tests

[3c30323](https://github.com/dcache/dcache/commit/3c303239dfeb6dd6e22112d8cff4e8a152fcd2fb)
:   dcache-resilience: fix bug in source handling with Clear Cache Location messages

[4ff42f7](https://github.com/dcache/dcache/commit/4ff42f73b1a919188770ac31afdbf1e9dc080946)
:   src: remove unused diskCacheV111.util.UptimeParser

[5fec809](https://github.com/dcache/dcache/commit/5fec809fa7edb935c11090e5d4306d87b5d63848)
:   remove dead code from PnfsId

[90bab98](https://github.com/dcache/dcache/commit/90bab988b1803a6c6b43b647df141c5ad6685bba)
:   pool: use interface rather than concrete class

[d40d999](https://github.com/dcache/dcache/commit/d40d99917ed39d6689109027885ef4939cbf6580)
:   dcache-resilience: fix wrong assumption about error type in Message

[1d2f7ee](https://github.com/dcache/dcache/commit/1d2f7ee1908afc77e8f068ea6b245ca93b3f944d)
:   pool: add IO statistics to monitor storage performance

[ecc2c61](https://github.com/dcache/dcache/commit/ecc2c610c981b56cda310089e89193e89b6b2858)
:   cells: fix broken commit 0be9a678

[0be9a67](https://github.com/dcache/dcache/commit/0be9a6782af3890b0a886cb3721dd210ae10c15a)
:   cells: add explicit ZooKeeper/Curator monitoring

[33d603a](https://github.com/dcache/dcache/commit/33d603ac631241e60c55bd34d602b3ec38605646)
:   frontend: Map requests with bad JSON to HTTP 400 Bad Request status code

[0d8ac41](https://github.com/dcache/dcache/commit/0d8ac41ac25b7e5ff6b7d85fb0fc4d94ad7a8897)
:   pool-manager: use java8 streams to get Active or Enabled pools

[abc6bbb](https://github.com/dcache/dcache/commit/abc6bbb2cfac28d16e7bb3bfc7050a9489439fed)
:   pom: update zookeeper to latest stable release 3.4.11

[cfd0c9c](https://github.com/dcache/dcache/commit/cfd0c9ccfcf5536091e67a2c8a46fadb82ca1180)
:   pom: update apache curator version to 2.12.0

[1274b30](https://github.com/dcache/dcache/commit/1274b3006370108f00ff848f565d5428b0993536)
:   login-broker: replace LoadProvider interface with DoubleSupplier

[5c8562e](https://github.com/dcache/dcache/commit/5c8562ed71a88a3a9fda2fefe6026990fd20615a)
:   src: fix broken test after commit 4d564d2534

[4d564d2](https://github.com/dcache/dcache/commit/4d564d253418318cbe308655e4ac6093af2b2361)
:   cells: remove null checks for CuratorFramework

[47b7d51](https://github.com/dcache/dcache/commit/47b7d51f66b7af18a9b6a59d81267467b212e224)
:   cells: remove historical unused code

[e71f1fc](https://github.com/dcache/dcache/commit/e71f1fceea0d45ea1bf5ddb56b202686cb5648a7)
:   cells: remove custom implementation of curator's PathChildrenCache

[d0aa2c6](https://github.com/dcache/dcache/commit/d0aa2c679088ad5d3212de6fcaeec752cbb85350)
:   pool: use NFS internal reboot verifier for WRITE and COMMIT

[fbda58a](https://github.com/dcache/dcache/commit/fbda58acfc8d55bf1bd9c1ae290fa4e5fb15df8c)
:   dcache-resilience: change default sorting orders to ASC on admin history commands

[1ccc2cb](https://github.com/dcache/dcache/commit/1ccc2cbc35a6af43a7994f8c3bfb002d685f15bb)
:   gplazma: update multimap to support primary-agnostic matching

[86f6d1b](https://github.com/dcache/dcache/commit/86f6d1bc85d72c76a541ce15949cf37cd6ad552f)
:   pool: remove embedded nfs v3 server for felxfile layout type support

[4022844](https://github.com/dcache/dcache/commit/4022844c6d4a01323a6107379de28bdb2a2c94eb)
:   libs: switch to nfs4j-0.16.x

[5ad6fff](https://github.com/dcache/dcache/commit/5ad6fff79c0857ef4f994cd0b86e0d6ee8d2e63e)
:   nfs: return LAYOUTUNAVAILABLE for DOT files

[fe50695](https://github.com/dcache/dcache/commit/fe506955e48a5c641ef23a52cb32159f407d242d)
:   frontend: add remaining swagger annotations

[bd6a2fa](https://github.com/dcache/dcache/commit/bd6a2faaaf4f8de6b7d572e753becf3f38177a26)
:   star: fix printing exception error message

[81178fb](https://github.com/dcache/dcache/commit/81178fb6ed74c171db771f3b0010fada2aa0e97f)
:   storage-descriptor: add new binary to RPM manifest

[cf1cf65](https://github.com/dcache/dcache/commit/cf1cf653fe99ebe85d5863babd900dc1e785c4cf)
:   storage-descriptor: add support for generating new format

[d157b92](https://github.com/dcache/dcache/commit/d157b923e762a931f0e8b875b4d4e958a1de6c13)
:   star: update documentation to provide better description of script

[8a60269](https://github.com/dcache/dcache/commit/8a602696d6857a5a1928d48f047e85b9cdad8b84)
:   frontend: fix broken commit

[16739c5](https://github.com/dcache/dcache/commit/16739c5231ddca4e69613f84c9e6a9281954faf2)
:   frontend: add qos swagger annotations

[a56f887](https://github.com/dcache/dcache/commit/a56f8874d3489c3a977f52998a826afba79023ed)
:   frontend: add swagger namespace API annotations

[d101fc6](https://github.com/dcache/dcache/commit/d101fc6483b24d64a20f83eb710883bf828b3688)
:   frontend: add global swagger annotations

[3b54f8e](https://github.com/dcache/dcache/commit/3b54f8e0cb060234571bdaad8d1a6a72aa885fdf)
:   frontend: add swagger-ui support

[551ae71](https://github.com/dcache/dcache/commit/551ae718aa0b341efba1516b521efa7e4b0557ca)
:   frontend: add swagger annotation scanning

[40a43c4](https://github.com/dcache/dcache/commit/40a43c456854e0ac7046593ba5ec500d2e63d860)
:   frontend: convert tabs to spaces

[298f858](https://github.com/dcache/dcache/commit/298f85870bc45553fe0011966d751f4cb70af03f)
:   pool: refactor IO statistics

[4a05834](https://github.com/dcache/dcache/commit/4a05834931cc45fcf232b24cb97cab961d4c3cb0)
:   Revert "zookeeper: remove work-around for ZOOKEEPER-2809"

[0cad361](https://github.com/dcache/dcache/commit/0cad36105d59d8459c9725fe690a52992aef8111)
:   zookeeper: remove work-around for ZOOKEEPER-2809

[77d82c0](https://github.com/dcache/dcache/commit/77d82c0c724cef0f83b841202180068fcf7360e0)
:   nfs: fix ServerFault on FileNotFoundHimeraFsException

[646da1f](https://github.com/dcache/dcache/commit/646da1f1800e9c26bfabc037a769982b83a60aa2)
:   ftp: support non-ASCII filenames in LIST output

[0de9090](https://github.com/dcache/dcache/commit/0de9090c3cb27c5aeb0b3d2f3e1b0540a6e9422c)
:   ftp: update LIST output to be more like 'ls -l'

[1576d5e](https://github.com/dcache/dcache/commit/1576d5ef5a1c6c0ef1964874f724e620175478c4)
:   scripts: update reference to JDK to avoid mentioning specific java version

[efed757](https://github.com/dcache/dcache/commit/efed7579ef41c38e55cda6f242ebdbfe67776acd)
:   info: allow admin to control whether non-VO / non-FQAN identities are shown

[0010216](https://github.com/dcache/dcache/commit/0010216f5ad0129c22f0a12c0cacab99d55d32d0)
:   chimera: fix deadlock in Postgres driver

[77c85a1](https://github.com/dcache/dcache/commit/77c85a1fe86d434fd2712080c3a05d0f8dcd05ca)
:   gplazma: update multimap for generic match and add FQAN support

[4598f02](https://github.com/dcache/dcache/commit/4598f0228e564c1528fc17adcfcd04deddfff505)
:   authentication: update multimap to cooperate in generating primary gids

[c538064](https://github.com/dcache/dcache/commit/c5380647b8623ee730448f3826bc40c222daee2c)
:   pools: fix NPE from info command at startup

[7887ba9](https://github.com/dcache/dcache/commit/7887ba90d027bc96f3b50eedd5670c2e4ab8ede1)
:   systemd: stop all dCache service units in Debian prerm

[279c72f](https://github.com/dcache/dcache/commit/279c72f821f3de2885e036348083f8c8bad5a174)
:   chimera: correct previous attempt to fix 'lost+found' directory permission

[f31dfa1](https://github.com/dcache/dcache/commit/f31dfa17522b0de50078b0c520aff6078d8613ed)
:   [maven-release-plugin] prepare for next development iteration

[4bb2574](https://github.com/dcache/dcache/commit/4bb2574133ee1a09dd34ac19e1096cd7fb608509)
:   maven: fix dcache.service permissions

--

</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
