HTML header: <title>dCache 3.0 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 3.0<br/>
<small>The release notes</small></h1>
</div>

## Highlights

- Experimental CEPH support.
- Automatic detection of PostgreSQL master.
- Self describing billing files.
- Pool manager setup is stored in ZooKeeper.
- Pool manager read-only state is stored in setup file and ZooKeeper.
- New performance cost calculation for improved stability of hot spot replication.
- Allow batching of flush to tape to be "disabled". 
- Allow polling HSM scripts.
- Mover queues can be created at runtime.
- Abort upload when SRM TURL is invalidated.
- Allow xrootd clients to select mover queues.
- Support the HAProxy proxy protocol.
- Production ready support for high availability deployments.

## Incompatibilities

- Compatibility with pools older than 2.16 has been dropped.
- Properties marked deprecated in 2.16 are now obsolete.
- Several deprecated or obsolete admin commands have been
  removed.
- The admin door no longer supports DSA keys.
- The billing service no longer output records for 
  which no format string was defined.
- The pool manager and pool configuration files now only
  support the commands considered setup commands.
- Support for the legacy UDP discovery service used in 
  2.15 and earlier has been dropped.
- dCacheDomain no longer default are core domain.
- DCAP doors no longer supportthe `dcapLock` feature to
  halt new requests.
- Pool manager now automatically persists its setup in ZooKeeper
  uses it after a restart rather than `poolmanager.conf`.
- The way pool manager calculates performance cost has changed 
  and cost limits in pool manager may have to be retuned.
- The pool to pool client queue in pools no longer has a
  configurable limit.
- Return code 72 is now a special value for HSM scripts.
- The failure semantics for empty uploads has changed.
- The `https-jglobus` value has been removed for the 
  `webdav.authn.protocol` property.

## Acknowledgments

Thanks to Onno Zweers for several contributions to this release.

## Release 3.0.42

### ftp

A bug (that was not observed in real-world settings yet) that might have caused
NullPointerExceptions was fixed in the ftp service.

### poolmanager

dCache 3.0 introduced a regression where a dCache domain does not
start up if it hosts a poolmanager with poolmanager.conf containing
either the "rc set sameHostCopy" or the "rc set sameHostRetry" command.
This regression was fixed.

### resilience

Error handling within the Resilience service was improved.


### Changelog 3.0.41..3.0.42

<!-- git log 3.0.41..3.0.42 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d4a2df058a](https://github.com/dcache/dcache/commit/d4a2df058a25e5e3d459b7ac0cc8270a899a11d0)
:   [maven-release-plugin] prepare release 3.0.42

[f72123400d](https://github.com/dcache/dcache/commit/f72123400dab76ea250c6144a3e98b6371591044)
:   dcache-resilience: handle properly RuntimeExceptions from tasks

[8cb98d73c2](https://github.com/dcache/dcache/commit/8cb98d73c229e9347dccb229a2534c04b99e818a)
:   ftp: ensure adapter is closed

[f81c008965](https://github.com/dcache/dcache/commit/f81c0089652b801f709a17a12842c289a58cbfc3)
:   ftp: remove rare NullPointerException when proxying data

[40a1dcab5c](https://github.com/dcache/dcache/commit/40a1dcab5c0573a6400cf69821b37036b5718b8e)
:   poolmanager: fix poolmanager startup with certain poolmanager.conf content

[b31ade0690](https://github.com/dcache/dcache/commit/b31ade0690d2f5fbde6469cd95c47131c57e6d0c)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.41

### dcache-resilience

When a checksum or broken file message/error is generated,
Resilience makes a best effort to (a) remove the broken
copy and (b) make another replica. This, of course, is not always possible, particularly if
the broken file is the only accessible copy. This resulted in  faulty behavior 
 particularly the thrashing noted in the case of a restaging operation which results in a checksum error.
This is now fixed.

The current release improved error handling for resilience. 
It fixed  unnecessary Migration Task exceptions resulting from
source pools with no replica in the repository.

Now  it should be possible for Resilience to use pools blocked only for
writes from doors.


### Changelog 3.0.40..3.0.41

<!-- git log 3.0.40..3.0.41 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2ed30f8](https://github.com/dcache/dcache/commit/2ed30f866b214638604f98a5779bf7f42848a859)
:   [maven-release-plugin] prepare release 3.0.41

[1c8c56c](https://github.com/dcache/dcache/commit/1c8c56c17f670cc8ef8472ec74702837c44f1999)
:   bad commit put DOWN twice

[57c9ccd](https://github.com/dcache/dcache/commit/57c9ccd916e17dabba4ed9aed2233c6cc3b6cd59)
:   dcache-resilience: define non-writable pool to mean p2p-client is disabled

[71419a4](https://github.com/dcache/dcache/commit/71419a4795243756a588e10ab1a5f60fd34c82f8)
:   dcache: fix remote pool monitor wait bug

[c49e444](https://github.com/dcache/dcache/commit/c49e4441dbf9ae19dff862e58e6e06df15e00b6e)
:   dcache-resilience: repair handling of broken files*

[0d58321](https://github.com/dcache/dcache/commit/0d583217057528246e73bd6fef46fb3f543c322e)
:   [maven-release-plugin] prepare for next development iteration

[05a7853](https://github.com/dcache/dcache/commit/05a7853083a810c7bc9cecd57a9697d28b59da16)
:   dcache-resilience: fix bug in source handling with Clear Cache Location messages

## Release 3.0.40

### cells

The current release added explicit ZooKeeper/Curator monitoring. Events generated by ZooKeeper and Curator are now logged in a new, which  may help diagnose
problems that are suspected to come from bad ZooKeeper interaction.

### frontend

The current release improved the error handling to work with Jackson exceptions.


### Changelog 3.0.39..3.0.40

<!-- git log 3.0.39..3.0.40 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2fad831](https://github.com/dcache/dcache/commit/2fad831ca429d8a1ddfdf82a8cbc853fe566dfd3)
:   [maven-release-plugin] prepare release 3.0.40

[86ccd1c](https://github.com/dcache/dcache/commit/86ccd1c4ff63be83e0e7de0d637607c8a24a31d5)
:   dcache-resilience: fix wrong assumption about error type in Message

[bb5973e](https://github.com/dcache/dcache/commit/bb5973e1b471e86e055d4e08c0b821ec8e42f5d5)
:   cells: add explicit ZooKeeper/Curator monitoring

[e3140e3](https://github.com/dcache/dcache/commit/e3140e3dd996d0a2e9354f3805878c47f5db4812)
:   frontend: Map requests with bad JSON to HTTP 400 Bad Request status code

[74b5c02](https://github.com/dcache/dcache/commit/74b5c0213fb4f7b20892f623bc22e8793b0c6d98)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.39

### nfs

NFS door has been updated  to return NFS4ERR_LAYOUTUNAVAILABLE for DOT files.

### star

The current release improved documentation to help  dCache admins to  have a better understanding of how to generate StAR record.

The current release fixed fix printing exception error message for dcache-star script if there's a problem when run with newer versions of Python.


### Changelog 3.0.38..3.0.39

<!-- git log 3.0.38..3.0.39 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6b4180c](https://github.com/dcache/dcache/commit/6b4180c02a8562275c77e438928692a407cd5084)
:   [maven-release-plugin] prepare release 3.0.39

[2776992](https://github.com/dcache/dcache/commit/27769923a0d4a0dfc8b4d284261712dae98c7b31)
:   nfs: return LAYOUTUNAVAILABLE for DOT files

[73bdcf7](https://github.com/dcache/dcache/commit/73bdcf746a9cbea434349e89a7a0b0f590f1e945)
:   star: fix printing exception error message

[d40890c](https://github.com/dcache/dcache/commit/d40890c5ece00908d4e3e512a38098749efafd79)
:   star: update documentation to provide better description of script

[9b96b08](https://github.com/dcache/dcache/commit/9b96b08836889dd3014ad34a03e129d4d4ad060f)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.38

### info

The info service collects information about who is allowed to reserve space. 
Since some of this information, like VOs, usernames and gids, may be considered
sensitive information, this update allows admins to control whether or not 
to publish them. The default behaviour is unchanged from the previous behaviour,
i.e. info publishes everything. If a site admin wants to change this,
the `info.limits.show-only-vo-authz` property can be set to `true`.

### scripts

The dcache script and manpage still refered explicitely to Java 6. This patch
changes the phrasing of the respective text.


### Changelog 3.0.37..3.0.38

<!-- git log 3.0.37..3.0.38 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f4d6bc6511](https://github.com/dcache/dcache/commit/f4d6bc6511be3997a154d7bf6cfbbb54c80c1b21)
:   [maven-release-plugin] prepare release 3.0.38

[7b41e14c48](https://github.com/dcache/dcache/commit/7b41e14c4824807db6009946d3d6e84838235cba)
:   scripts: update reference to JDK to avoid mentioning specific java version

[17df369055](https://github.com/dcache/dcache/commit/17df3690555efd1013a8db113a2649bc2ab64a04)
:   info: allow admin to control whether non-VO / non-FQAN identities are shown

[b7bfc8b314](https://github.com/dcache/dcache/commit/b7bfc8b31493ec042a93060a01cdbeda4b54186f)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.37

### chimera


The current release fixed previously introduced issues for  `lost+found` directory permissions.
Now, the `lost+found` directory permissions is updated without causing
problems if that directory has been removed or permissions have been
modified.


### Changelog 3.0.36..3.0.37

<!-- git log 3.0.36..3.0.37 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[89c6a8b](https://github.com/dcache/dcache/commit/89c6a8b0892251c1ad4fa46627b9b6b2b1b6431c)
:   [maven-release-plugin] prepare release 3.0.37

[bdfb780](https://github.com/dcache/dcache/commit/bdfb780a4694678fc1898f5abaf9f780fe3973ef)
:   chimera: correct previous attempt to fix 'lost+found' directory permission

[a74b73f](https://github.com/dcache/dcache/commit/a74b73fb74377c70e6e5af04cdd814fe7ae618b5)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.36

### pnfsmanager

The current release improves documentation for `set log slow threshold` admin command help.

### spacemanager


When trying to upload into dCache using a space-token where there
is no selectable link for this operation then the user was presented with
a generic error message; for example,

`No write links configured for [net=131.169.71.98,protocol=GFtp/2,store=dot:user@osm,cache=,linkgroup=]`.

This behavior is changed now and an  improved error message is returned to the user if they attempt an upload data into dCache using a space-reservation in a way where
`poolmanager` configuration prevents the upload.

### webdav

The current release improved error handling when  dCache is full.


### Changelog 3.0.35..3.0.36

<!-- git log 3.0.35..3.0.36 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[38de80c](https://github.com/dcache/dcache/commit/38de80ceecb167cf8f974ca50c83fd43d53f2fcc)
:   [maven-release-plugin] prepare release 3.0.36

[d6d321b](https://github.com/dcache/dcache/commit/d6d321be7fb6fa7a2c4a3c2e014744df9bf196a1)
:   systemtest: work with new OpenSSL DN format

[a2a4534](https://github.com/dcache/dcache/commit/a2a45343b34baee0aad7c13cadd588f20e848eb7)
:   spacemanager: provide space-specific error message on bad upload

[1928311](https://github.com/dcache/dcache/commit/19283119a51ff7c0fd024f0f1b6fca58cae69844)
:   webdav: return 507 Insufficient Storage when dCache is full

[6351c8a](https://github.com/dcache/dcache/commit/6351c8a766d0fa880200c9b34206f2efa0adeb90)
:   pnfsmanager: update slow logging admin command help

[2fd15ed](https://github.com/dcache/dcache/commit/2fd15ed80db04e2d0fcace43722e9672f7407c48)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.35

### cells

dCache no longer logs stack-traces when running  multiple cells with the same name.

### pool

Closing dcap mover connection no longer logs a stack trace.

For certain failures,the pool was logging transfer failures twice. This is now fixed.

### rpm

dCache ensures now that user 'dcache' is a member of group 'dcache'.

### star

The current release Introduced new property `star.db.*`, which makes possible now  to run PostgreSQL on non-standard ports can use STAR.

### statistics

Timeout in contacting PoolManager no longer results in a stack-trace being logged.


### Changelog 3.0.34..3.0.35

<!-- git log 3.0.34..3.0.35 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f7547d7](https://github.com/dcache/dcache/commit/f7547d704ea464144f576097cc944285251c586a)
:   [maven-release-plugin] prepare release 3.0.35

[6c2cb7d](https://github.com/dcache/dcache/commit/6c2cb7d98b8d24b7649a67b1020e3db7f8ccfabc)
:   [maven-release-plugin] prepare for next development iteration

[a212275](https://github.com/dcache/dcache/commit/a212275d9a67275c99e962a4cc529353d9011d43)
:   pool: fix double logging on remote FTP transfer error

[e5ff9ab](https://github.com/dcache/dcache/commit/e5ff9ab1ef633e7cd2fad058c72a14f271d4bd39)
:   pool: Fix how certain bugs are logged

[dfc024b](https://github.com/dcache/dcache/commit/dfc024b85486ec0cdb767144866c3590342fc1a2)
:   star: support PostgreSQL running on non-standard TCP ports

[6c721e5](https://github.com/dcache/dcache/commit/6c721e5cd47fca54a864ca5077ab26f95810d51b)
:   rpm: don't assume existing dcache user is member of dcache group

[fc563b9](https://github.com/dcache/dcache/commit/fc563b9ebbf8fc2c9862fcaa4dd1bab52822ee8e)
:   cells: don't log stack-trace on starting cell with same name as running cell

[1c42791](https://github.com/dcache/dcache/commit/1c427912a0d9f92963cf2b25db64fb8195552b04)
:   statistics: avoid stack-trace on internal timeout

[2304f35](https://github.com/dcache/dcache/commit/2304f35659998915901abdf120e15d9bb522c931)
:   pool: fix stack-trace when closing dcap mover connection

## Release 3.0.34

### admin

The admin interface reported  an attempt to connect to an absent cell as  a bug. The current release fixed the issue.

### httpd

Requests to httpd targeting an unknown resource was returning  `200 OK` response code. Nevertheless  the `404 NOT FOUND`
 response would be closer fit. This is now fixed.

### nfs

The current release corrects inaccurate documentation of  `nfs.enable.pnfsmanager-query-on-move`.


### Changelog 3.0.33..3.0.34

<!-- git log 3.0.33..3.0.34 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bcd8d31](https://github.com/dcache/dcache/commit/bcd8d31e99fd895f861f975138edb382a39dc754)
:   [maven-release-plugin] prepare release 3.0.34

[e8014a2](https://github.com/dcache/dcache/commit/e8014a275a5ba87bf0ad93cf2b4795d0b99c03c5)
:   nfs: fix documentation of nfs.enable.pnfsmanager-query-on-move

[233b6fd](https://github.com/dcache/dcache/commit/233b6fda47074abc618c884daf8024e9370411fb)
:   admin: do not report attempts to connect to missing cell as a bug

[9a0752d](https://github.com/dcache/dcache/commit/9a0752d4206df17c0c1b9fa0b049203ef6d7b343)
:   httpd: return 404 status code on an unknown page

[1cd37d0](https://github.com/dcache/dcache/commit/1cd37d0012d6536b39080a6072f18d9fdc9c0c89)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.33

### Changes affecting multiple services

dCache no longer logs stack-traces if a Java VirtualMachineError occurs. This is unnecessary as dCache was (presumably) working fine until Java
discovered a problem.

### chimera

Sites updating to dCache 2.15 or later might observe that a lost+found directory with incorrect permissions was created during the update. This
patch ensures correct permissions. Since we cannot know if the current permissions in lost+found are
intended, this patch does not modify any existing lost+found directory
permissions.

### pool

The `sweeper free`command no longer logs a stack trace if it is started with incorrect input information.

An irrelevant stack trace was logged by the pool. This release corrects that.


### Changelog 3.0.32..3.0.33

<!-- git log 3.0.32..3.0.33 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[52aa1504eb](https://github.com/dcache/dcache/commit/52aa1504eb86a158714694447ac425a3eb7489d7)
:   [maven-release-plugin] prepare release 3.0.33

[ce3a5fae78](https://github.com/dcache/dcache/commit/ce3a5fae7842687743e80d0f2d17b702a510d1cd)
:   chimera: update schema migration when creating 'lost+found' directory.

[35db8236df](https://github.com/dcache/dcache/commit/35db8236df2bb912ac5a7a24cb4edce51da137ad)
:   pool: fix stack-trace on bad command input

[f6b22647da](https://github.com/dcache/dcache/commit/f6b22647dac19994f4833b4e765dcf2549d942ef)
:   pool: fix stacktrace on FaultEvent logging

[da4ba36bbe](https://github.com/dcache/dcache/commit/da4ba36bbe09f50b8f3f5df348120979d8e7118d)
:   system: Don't log stack-trace on fatal JVM error

[74b2e62277](https://github.com/dcache/dcache/commit/74b2e62277a350c0f67b9570fd1d9e05cd9c6f49)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.32

### alarms

Until now, the sorting order of alarms did not provide a correct ordering 
for all types of alarms. With this release, alarms are now implicitly ordered 
by at least their latest modification timestamp.

### resilience

One of the features of resilience is the enforcement of file
partioning on pools according to pool tags.   The pool tag
restrictions are observed whenever a file is copied.  In
addition, it is rechecked when a storage unit is updated,
in order to make sure the files are distributed correctly
according to the new requirements.  This is done by
removing the offending copies and recopying them in
a new location.

Should files get redistributed, however, by rebalancing or
a migration job, it is possible that the partitioning will 
be violated, since only resilience observes it. 

The resilience service now verifies that files are distributed according to the requirements
specified by pool tags while doing periodic scans (or scans initiated through the admin 
command). 

### statistics

A possible race condition was removed from the implementation of the `create stat` admin command.


### Changelog 3.0.31..3.0.32

<!-- git log 3.0.31..3.0.32 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b65e0caea0](https://github.com/dcache/dcache/commit/b65e0caea05e3c4a3f81c54affaafe4f37cd7e6c)
:   [maven-release-plugin] prepare release 3.0.32

[ce83a48128](https://github.com/dcache/dcache/commit/ce83a48128e5a179ed7dfdb97da40f5daeda4352)
:   statistics: fix race in "create stat" admin command

[a57ac478f7](https://github.com/dcache/dcache/commit/a57ac478f7c739df4a6209b5dfb527e2888c0ab1)
:   srm: fix stacktrace on database failure

[c47a65e81c](https://github.com/dcache/dcache/commit/c47a65e81c972f126fda260900bec30900cf6ade)
:   alarms:  revert LogEntry.compareTo() to throw NPE on null object

[049419c772](https://github.com/dcache/dcache/commit/049419c7723e59131833e783c7a1cb4376c919d7)
:   resilience: force tag partition checking on scans from admin command and periodic checks

[aaad9d2599](https://github.com/dcache/dcache/commit/aaad9d259901be5550a2bf86289f20ed8a8dfe24)
:   alarms: fix natural order comparator to use timestamp first

[ea6aed2009](https://github.com/dcache/dcache/commit/ea6aed20093ea20226779b6b9d853e3cdfb4307b)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.31

### dcap

A pool that has gone offline and comes back up again may become
very slow to respond due to a large amount of superfluous error
messages to dcap clients that disconnected in the meantime. This
patch ensures a more responsive reaction to these cases by 
introducing a time-to-live value for such messages.

### pool

Error reporting was improved for cases of IO errors in pools.


### Changelog 3.0.30..3.0.31

<!-- git log 3.0.30..3.0.31 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f7e46f453c](https://github.com/dcache/dcache/commit/f7e46f453c10da9a318212f7bbf77db43741746e)
:   [maven-release-plugin] prepare release 3.0.31

[d403eb76f7](https://github.com/dcache/dcache/commit/d403eb76f7ae95d4e11f7eecc0b0ae486f1a77bb)
:   pool: avoid 'null' and other nondescript error messages

[7008ae46a8](https://github.com/dcache/dcache/commit/7008ae46a85ee3c67fda111a751d5a5095c22850)
:   [maven-release-plugin] prepare for next development iteration

[7ae58e2bc8](https://github.com/dcache/dcache/commit/7ae58e2bc8294f7e1541ef8cc860897c4f6fb0db)
:   dcap: add TTL information to dcap messages

## Release 3.0.30

### Changes affecting multiple services

Many dCache components use RemotePoolMonitor to provide fast access to
the information that PoolManager has about pools. In order to facilitate
system diagnosis, the 'info' admin command was augmented by information
about the current status of the RemotePoolMonitor.

### admin

The Apache sshd library used by the admin interface was updated. 
Although we believe that dCache is not affected, some security vulnerability
scanners alert users to a potentially vulnerable library version.
The update serves mostly to avoid those false alarms.

### pool

A bug in gfal2 results in FTP transfers being aborted some 50 ms after
being initiated.  This results in the door killing the mover shortly
after the pool received the PoolDeliverFile message.  If the mover is
not queued, but not yet fully started, this may lead to the pool
disabling itself. This patch corrects that problem, ensuring that
the pool continues to run despite any aborted transfers.

### xrootd

In the 4.7 releases, the xrootd client started enforcing 
protocol requirements for kXR_login which, unfortunately, 
broke access to dCache. The xrootd client expects an answer 
with a 16-character session ID from the door and then the 
pool after the redirection. Without this ID, the client 
would retry (without success) repeatedly and appear to hang.

dCache's xrootd implementation has been augmented with the session
ID, enabling it to work with xrootd clients of version 4.7 and up.


### Changelog 3.0.29..3.0.30

<!-- git log 3.0.29..3.0.30 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[8aa487149e](https://github.com/dcache/dcache/commit/8aa487149e69c22024027e9f790e981bd1dcff7e)
:   [maven-release-plugin] prepare release 3.0.30

[a2aa5fc13b](https://github.com/dcache/dcache/commit/a2aa5fc13be5fc5dcf516899be12a878f260b6b4)
:   many: add diagnostic information about remote pool monitor

[666b22a5bb](https://github.com/dcache/dcache/commit/666b22a5bbc8177a592e002f5365ea6d20249506)
:   pool: dont disable pool if mover cancelled before open

[cdc124dce6](https://github.com/dcache/dcache/commit/cdc124dce66c6450e61db7addad8dc1f1a83e32c)
:   update apache sshd version due to security vulnerability

[b730eec759](https://github.com/dcache/dcache/commit/b730eec7597c6e960f1628b292edd03a983e110e)
:   [maven-release-plugin] prepare for next development iteration

[1322fd2dcc](https://github.com/dcache/dcache/commit/1322fd2dcce8ebe2fe21e150de20979c102c73a0)
:   dcache: fix bug in PoolSelectionUnitV2 match()

[eee56dee0a](https://github.com/dcache/dcache/commit/eee56dee0ab186ea7627fee02b70055853721d98)
:   dcache-xrootd: Fix login handshake to support xrootd clients (> 4.7.0)

## Release 3.0.29

### cells

The current release improved some problematic error messages has better error reporting to ensure bugs are understood.

### httpd

The curren release fixed the issue of change of format in transfers.txt after upgrading from 2.13 to 2.16.


### pool

The current release fixed log and alarms duplication when rebuilding broken entry.

### webdav

Regression fixed in OPTIONS output.

### Changelog 3.0.28..3.0.29

<!-- git log 3.0.28..3.0.29 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f265e50](https://github.com/dcache/dcache/commit/f265e5000df9990a96bdad991307581b61976c44)
:   [maven-release-plugin] prepare release 3.0.29

[0eec693](https://github.com/dcache/dcache/commit/0eec6936bd3d83e85f1b21ef92ea7e428311ca96)
:   httpd: restore millis to transfer time for transfers.txt

[539d3ed](https://github.com/dcache/dcache/commit/539d3ed1b2bb7fbca24ea909b2422c36792f27b6)
:   pool: fix log and alarms duplication when rebuilding broken entry

[38f5b2d](https://github.com/dcache/dcache/commit/38f5b2d61ffffdecebd0f8e6d9f3360cf54d555c)
:   cells: better error reporting to ensure bugs are understood

[c506caf](https://github.com/dcache/dcache/commit/c506caf56dede78ad5c4344704b21b3675c76aa7)
:   webdav: fix regression in OPTIONS response

[342e21b](https://github.com/dcache/dcache/commit/342e21bacf89f4dfaae358e70a2ea2dc2a679d91)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.28

### pool

The current release fixed regression in GridFTP OPTS CKSM command  and   GridFTP `OPTS CKSM` command is supported again.

The current release fixe  regression with third-party pull transfers using GridFTP, with
dCache acting as the GridFTP client that prevented data integrity
checks.

### resilience

When resilience tries to copy or remove a file, and it is no longer
in the namespace, this should be a fatal error, differently from
the discovery that a replica is no longer in cache. These two
errors, however, were  treated the same way. This is now fixed and the correct behavior is 
immediate abort of operation when file is not in namespace.

The current release improved error handling for file deletion during scan correctly it fixed bug in formatting and handling of cache exception types.


When doing a pool scan, the storage unit information must be
recovered for each file. This is done from the chimera attributes.
The code checks an internal map for an index number corresponding
to the unit it knows about from the PoolMonitor.

However, if the pool selection unit configuration changes such that
a storage unit is eliminated, that mapping will also be deleted
from resilience. In the case that the attributes stored in
Chimera still have the older storage class information, there
will be a NoSuchElementException thrown.

This is fixed now and Pool scans that encounter this situation do not get stuck
forever in the queue.

### webdav

In RFC 7230, section 3.2, it states that HTTP header names should be
case insensitive. Despite this, the standard milton mechanism for
acquiring header information is case sensitive, which (in turn) means
that several HTTP header values in dCache are similarly case sensitive.
There were reports that this case sensitivity has caused problems with certain clients (e.g., go).
The current release fixed this issue and headers that control third-party transfers are now case insensitive, so should work with more clients.


### Changelog 3.0.27..3.0.28

<!-- git log 3.0.27..3.0.28 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[70c3e94](https://github.com/dcache/dcache/commit/70c3e941a825fa08a055a364bce0c8cce0f7d489)
:   [maven-release-plugin] prepare release 3.0.28

[06fe64a](https://github.com/dcache/dcache/commit/06fe64a159eb1f643f1e5e36d92e4ec0b10c3075)
:   Update FileOperationHandler.java

[398244a](https://github.com/dcache/dcache/commit/398244a62f13a9247da3ba86e6e7367edf34a4c3)
:   pool: fix data integrity regression for 3rd-party GridFTP pull transfers

[c212dd4](https://github.com/dcache/dcache/commit/c212dd4caa48d6c9a566d00ccb46290f1b304ed1)
:   pool: fix regression in GridFTP OPTS CKSM command

[f86778a](https://github.com/dcache/dcache/commit/f86778a7625736e85518cd7748239eea7bada728)
:   resilience: handle file deletion during scan correctly

[1020c75](https://github.com/dcache/dcache/commit/1020c7543721af38d594618aba573808c132b7a1)
:   resilience: add pool operation logging

[3927e50](https://github.com/dcache/dcache/commit/3927e500771243522da0aca87e6bce2054a322b1)
:   resilience: handle storage unit NoSuchElement failure

[b9868d6](https://github.com/dcache/dcache/commit/b9868d6a725b84e2039a5dfd1de04fb4d8b6d310)
:   webdav: adjust header parsing to be case insensitive

[9512b10](https://github.com/dcache/dcache/commit/9512b10c174fc29ac53194ac295e6e5fcef16830)
:   resilience: handle all cases where no locations for file may be discovered

[05fd04d](https://github.com/dcache/dcache/commit/05fd04d38cffcb1e8dd953577acf805b5b7789f5)
:   resilience: distinguish correctly between file not in repository and file not found

[80175bf](https://github.com/dcache/dcache/commit/80175bf0351f571a666422d91c0609e4b96eed4c)
:   resilience: fix bug in formatting and handling of cache exception types

[73bd846](https://github.com/dcache/dcache/commit/73bd8469fede9ad5f44b971cbde63fa6cf52e674)
:   PoolManager : set return code to CacheException.PERMISSION_DENIED if staging is not allowed due to stage protection.

[04bef34](https://github.com/dcache/dcache/commit/04bef34c1df939946f0745fd9e14ba3eb294b100)
:   ftp: update exception logging to include context

[a5e8bd2](https://github.com/dcache/dcache/commit/a5e8bd20c61ec0e89445527d930ae732cf185888)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.27

### cells

The current release improved handling of rogue domains with badly formatted dCache versions.


### configuration

There are configuration options in zookeeper that may affect how well
the zookeeper cluster will work with dCache. The lack of documentation
of how dCache uses zookeeper prevents admins from tuning their zookeeper
instance. This is now fixed and zookeeper configuration is updated with
 hints on how dCache uses zookeeper, along with the corresponding zookeeper configuration properties.

### pool

The current release fixed loading `setup` that requires queues created by `pool.queues`.

### webdav

The current release fixed the stack-traces on bad client input.


### Changelog 3.0.26..3.0.27

<!-- git log 3.0.26..3.0.27 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2b591bf](https://github.com/dcache/dcache/commit/2b591bf1b52c65be8b3b94da73f228cfabcc66e9)
:   [maven-release-plugin] prepare release 3.0.27

[fa68a01](https://github.com/dcache/dcache/commit/fa68a01877fc88ea081eb5a51b06e12630f77dbd)
:   cells: better handling of rogue domains with badly formatted dCache versions

[c944c47](https://github.com/dcache/dcache/commit/c944c4710899485e5b483601475c7b203ee817aa)
:   configuration: update zookeeper configuration with hints

[cb033cb](https://github.com/dcache/dcache/commit/cb033cb74fcb703445023eab8825865634607b6d)
:   pool: fix loading 'setup' that requires queues created by 'pool.queues'

[545d072](https://github.com/dcache/dcache/commit/545d0721a3a2b86a120ac3eb07ecf09e091639db)
:   webdav: avoid stack-trace on bad user requests

[47d18d7](https://github.com/dcache/dcache/commit/47d18d7d9f5bbc2e0d533bfaf9d75fd7381eac1a)
:   alarms: guard against NPEs on LogEntry getters

[7eb6827](https://github.com/dcache/dcache/commit/7eb682771834201bc412e232a4f834e09889ff9a)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.26

### admin

While `migration move` tasks on pools were working correctly, for `migration info` command an error occurred,
 that the current user (root) wasn't allowed to execute anything (due to missing ACLs). This is now fixed.


### Changelog 3.0.25..3.0.26

<!-- git log 3.0.25..3.0.26 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[722f000](https://github.com/dcache/dcache/commit/722f000da8ea59599b057134eee81d4fbb45b915)
:   [maven-release-plugin] prepare release 3.0.26

[43fcf92](https://github.com/dcache/dcache/commit/43fcf9264c4fa0405abdc3dac6a43f0048395ac0)
:   resilience: restore extractor class value for extractor property

[00a2da1](https://github.com/dcache/dcache/commit/00a2da12da6b1ed79226006f6ba203d4846d48cb)
:   admin: Fix Inconsistent ACL enforcement, RT 9207

[2c0cb3a](https://github.com/dcache/dcache/commit/2c0cb3a70fe69ed3e912680711018096b1d2fd7a)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.25

### configuration

For some services it was unclear what were the admin's responsibilities in
terms of consistent configuration. The current release updated the documentation describing what is needed to deploy redundant services.

### resilience

The current relase improved configuration for namespace provider properties by making them immutable.

### srm

The current release improved configuration  for  `srmPing` responses.


### Changelog 3.0.24..3.0.25

<!-- git log 3.0.24..3.0.25 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ca0220a](https://github.com/dcache/dcache/commit/ca0220a55a9413d969a1d34e901355021acb92a8)
:   [maven-release-plugin] prepare release 3.0.25

[240fa42](https://github.com/dcache/dcache/commit/240fa42c37dfeb9a4ad4aae26c5b9ec683e1494c)
:   configuration: update description for replicable

[583eadb](https://github.com/dcache/dcache/commit/583eadbb2871992f04c0ae038b6af490f15e5036)
:   resilience: remove reference to pnfsmanager property

[c73bf8e](https://github.com/dcache/dcache/commit/c73bf8ebe62b67a39ff38164e10152fa11031d47)
:   srm/srmmanager: fix srmPing confusion

[da6bbf2](https://github.com/dcache/dcache/commit/da6bbf28f558c28740101caace6807b7eb8a5a45)
:   [maven-release-plugin] prepare for next development iteration

[99c08d4](https://github.com/dcache/dcache/commit/99c08d4e338e5f401914b4881a9ca81d9e5d41dd)
:   resilience: make namespace provider properties immutable

## Release 3.0.24

### billing

The current release added documentation that describes how a `CellAddress` and its fields
expand.

### config

The current release improves documentation for dCache admins by adding `obsolete|forbidden` annotation for dropped properties.
This helps admins to discover changes that might affect their dCache
instance. This is both through manual inspection and through the
`dcache check-config` command.

### ftp

It has been discovered that timestamp facts reported by dCache
GFTP server are expressed in local (to server) time. 
This is now fixed. Timestamp facts are reported in GMT.
 Clients like `globus-url-copty -sync`
work properly and ` ubefrtp -ls` returns correct timestamp.

### srm

The current release added new configuration properties to allow easy modification.

It  upstated  as well `srm/manager.properties`  documentation to describe the relationship between `srmmanager.root` and `srm.loginbroker.root`  properties.

### Changelog 3.0.23..3.0.24

<!-- git log 3.0.23..3.0.24 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[c92bfa3](https://github.com/dcache/dcache/commit/c92bfa3b0a3cdbe59b22f04ad675c970440dc918)
:   [maven-release-plugin] prepare release 3.0.24

[a775bcf](https://github.com/dcache/dcache/commit/a775bcf23f9bc7af28a84770cc9e3cc27b22f50c)
:   srm/srmmanager: update documentation about root path

[8ce10c1](https://github.com/dcache/dcache/commit/8ce10c14a1c1ce20b68b61f74dc9b1bca53c51c4)
:   ftp: convert timestamps to GMT (to follow RFC 3659)

[1521ad1](https://github.com/dcache/dcache/commit/1521ad11586fce17d629d2cb5c5dc5d6df3fc7a9)
:   config: use consistent terminology

[5f59a0f](https://github.com/dcache/dcache/commit/5f59a0fc029646f31cf604075400ea56ae7521f9)
:   billing: update documentation to describe CellAddress

[216b127](https://github.com/dcache/dcache/commit/216b127af82cc14c0de1375fb6da63c324a55858)
:   srm,srmmanager: add configuration property to allow easy modification of srm root

[7bbcbd3](https://github.com/dcache/dcache/commit/7bbcbd310200d0e2471dd01d7d73cfd982c47bb2)
:   logback: make socket appender construction depend on log level

[db2048a](https://github.com/dcache/dcache/commit/db2048af236dd953d8acce805f578b214a77ef34)
:   dcache: release dcache-view 1.1.5 for dcache 3.0

[e14e316](https://github.com/dcache/dcache/commit/e14e3166f8047e6a250ce7eaacdb3ae339d7a433)
:   config: add obsolete|forbidden annotation for dropped properties

[24c8a5f](https://github.com/dcache/dcache/commit/24c8a5fa100ab23c9013db42f94f0dba2c4ff7d7)
:   [maven-release-plugin] prepare for next development iteration

[454bb6d](https://github.com/dcache/dcache/commit/454bb6d847399e8dc83959fa701eeecebf525654)
:   config: add obsolete|forbidden annotation for dropped properties

[ea3c73d](https://github.com/dcache/dcache/commit/ea3c73d841946fb8f18f5e27f953532d41d28967)
:   pnfsmanager: remove obsolete comments from properties file

## Release 3.0.23

### Changes affecting multiple services

Christoph Anton Mitterer submitted several corrections to the comment string in properties files.

### zookeeper

A race condition in zookeeper caused irrelevant stacktraces to be logged on shutdowns.
Since this problem is not easily solvable with Zookeeper 3.4, we decided to change the log-level
threshold for NIOServerCnxnFactory. Note that the suppressed class is only used by ZooKeeper server (i.e.,
not the client). Therefore, only the 'zookeeper' service is affected.


### Changelog 3.0.22..3.0.23

<!-- git log 3.0.22..3.0.23 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2f93fd01a5](https://github.com/dcache/dcache/commit/2f93fd01a5bc24f3365f1afa00f9034e76783bc1)
:   [maven-release-plugin] prepare release 3.0.23

[9bd1cac672](https://github.com/dcache/dcache/commit/9bd1cac672cfa94d7ad49615c7e71533a213244a)
:   use correct terminology

[c3fe563c9e](https://github.com/dcache/dcache/commit/c3fe563c9e781903db810e67f40d5f283713b357)
:   fixed several typos in the documentation

[d3dfad0fe5](https://github.com/dcache/dcache/commit/d3dfad0fe542c9445f45bc2a1a16208ef1fc70c8)
:   added hint that pnfsmanagers must use the same DB

[c19e087029](https://github.com/dcache/dcache/commit/c19e087029d53c75d6fd475266e357c578e2b266)
:   zookeeper: work-around race-condition in zookeeper server shutdown

[f87dd852a8](https://github.com/dcache/dcache/commit/f87dd852a805109da2ae2d991b6462678dd326f3)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.22

### httpd

The "Disk Space Usage" webpage (`/usageInfo`) contains a table showing
information about each pool in the dCache cluster.  The "Layout"
column showed the capacity usage graphically, with different colours
showing how much of that pool's capacity is being used for different
tasks.  This release fixes the Layout heading to describe a previously
undocumented colour.


### Changelog 3.0.21..3.0.22

<!-- git log 3.0.21..3.0.22 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[9f91b2f](https://github.com/dcache/dcache/commit/9f91b2f8c436628530afb51ac2427dff1daf9736)
:   [maven-release-plugin] prepare release 3.0.22

[74c1bb2](https://github.com/dcache/dcache/commit/74c1bb29e9aeb909cd8d18cee39956a20f6453d9)
:   system-test: add series of functional test for frontend service

[1cef325](https://github.com/dcache/dcache/commit/1cef3259db619222c66474154ecf479d985aebec)
:   [maven-release-plugin] prepare for next development iteration

[872a906](https://github.com/dcache/dcache/commit/872a90670a0ade4a15c7debcfb2bd21f92357bd3)
:   httpd: Fixed table headers in usageInfo

## Release 3.0.21

### frontend

Several improvements are added to frontend such as
restriction usage is improved and easily configurable JSON is now available via frontend.

### srm

The current release enforced restrictions on `srmSetPermission` operations.

### zookeeper

The current release fixed race-condition when ZooKeeper server accepts requests before the server is fully
initialised.


### Changelog 3.0.20..3.0.21

<!-- git log 3.0.20..3.0.21 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6a0a31b](https://github.com/dcache/dcache/commit/6a0a31b8307a472214b27fc9dee552e48687c4d4)
:   [maven-release-plugin] prepare release 3.0.21

[d111193](https://github.com/dcache/dcache/commit/d1111930dd59642aab12a1b63464fe51e0bdcfe9)
:   frontend: refactor static (configuration) data

[6a48e13](https://github.com/dcache/dcache/commit/6a48e13c6a9507bad3ef19b564efd97e20f424b0)
:   spacemanager: dont try to release expired spaces

[52f2075](https://github.com/dcache/dcache/commit/52f2075c7ebd80c388f365eb6cb159c9ac659f9a)
:   srmmanager: use path to support srmSetPermission operations

[da19337](https://github.com/dcache/dcache/commit/da193372bbe0aa7f51250ab0050805c5d83e28c8)
:   frontend: fix Restriction usage

[29478e4](https://github.com/dcache/dcache/commit/29478e417b76c8ca5f69791a5c4f103b38754cfa)
:   zookeeper: work-around SessionTracker racy initialisation on startup

[d65d5b8](https://github.com/dcache/dcache/commit/d65d5b8f76b8c47990d958d47e28c5ebb661a3a4)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.20

### Changes affecting multiple services

dCache previously shipped both log4j and log4j-over-slf4j libraries. This patch simplifies deployment and prevents possible problems due to non-deterministic
library loading sequences by removing log4j dependencies.

### frontend

If frontend was asked to create a directory listing while a file was being uploaded into the directory being listed, 
previously, an error would occur. This patch addresses that issue.

This release includes a new dCacheView version.

### info

The info cell can occasionally send messages before it is properly registered. This can lead to `Cannot send message with callback in state...` messages that 
do not correspond to any valid error condition. This patch ensures that messages are only sent as soon as the cell is properly registered.

### pool

If the communication between a pool and PnfsManager times out, the error message is not well suited to diagnosing the problem: 
`Failed to instantiate mover due to unsupported checksum type: Request to [>PnfsManager@local] timed out.` The checksum type is 
not playing an important role here. Hence, this patch updates the error message.

### zookeeper

Embedded Zookeeper instances would occasionally log stack-traces on startup. This patch adds a work-around.

Zookeeper logs a stack-trace in cases where the client disconnects unexpectedly. This is unnecessary and potentially confusing, so this patch changes 
Zookeeper's behaviour to just logging the incident.


### Changelog 3.0.19..3.0.20

<!-- git log 3.0.19..3.0.20 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bb7d0aa838](https://github.com/dcache/dcache/commit/bb7d0aa83836942b7f76fd74aab9c7ebb3556377)
:   [maven-release-plugin] prepare release 3.0.20

[7af2a80aff](https://github.com/dcache/dcache/commit/7af2a80aff729424a6ac4aea9c604b323cd55bbe)
:   dcache: release dcache-view 1.1.4 for dcache 3.0

[3002758a02](https://github.com/dcache/dcache/commit/3002758a02823384ae944d70ce09872dc2490e01)
:   zookeeper: work-around racy startup

[0ee8801ff5](https://github.com/dcache/dcache/commit/0ee8801ff522a3c91018ccc053c798051896dccb)
:   zookeeper: silence ZK server errors

[67fc64b642](https://github.com/dcache/dcache/commit/67fc64b64268cd55163a1d393ac43d30dfb8477f)
:   dependencies: remove log4j jar

[47e98838a4](https://github.com/dcache/dcache/commit/47e98838a4ef75e29a3ab05d524e1e3f65c2a0bc)
:   frontend: fix "Attribute is not defined: SIZE" bug

[9f75784527](https://github.com/dcache/dcache/commit/9f75784527fd98ce9b8a1f683bcf2f9e181dbffe)
:   pool: fix error message on timeout

[6407eb9180](https://github.com/dcache/dcache/commit/6407eb9180350f086cf3ea80448dd0e6e7133598)
:   info: avoid sending messages too early.

[9c518fbedf](https://github.com/dcache/dcache/commit/9c518fbedf1929c809477fedb60a35be7ee73015)
:   frontend,webdav: add supress-wwwauthenticate to allow headers

[e65c4bedec](https://github.com/dcache/dcache/commit/e65c4bedec1226cd37ecdbd2778dd0d2107a5417)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.19

### frontend

Clients can now send a `Suppress-WWW-Authenticate` header in order to avoid the native login dialog in browsers.

### hsm

A potential space leak in staging requests has been mitigated.

### pool

Since there are various reasons for why a mover may be terminated, the previous log message "Transfer was
forcefully killed" is not detailed enough to deduce the reason behind the problem. This patch enables more
detailed error messages both in the log files and in billing. Note, however, that the door's report of the failed 
transfer may duplicate this information.

### webdav

A recent update, commit 5abc0e1c, improved the behaviour of the Milton WebDAV libraries if an IOException occurs
during an upload. That patch, unfortunately, did not address all issues, and when non-spec-conformant clients
are used against dCache, stacktraces can be triggered.

This patch corrects that behaviour. Also, in case of errors, the error code returned in case of any problems
was changed from 400 to 500, which should signal cliens that they are free to retry the transfer after a timeout.

In case of failing transfers, doors will log more accurate information.


### Changelog 3.0.18..3.0.19

<!-- git log 3.0.18..3.0.19 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b5a645ede8](https://github.com/dcache/dcache/commit/b5a645ede80bb3adb2e23cc77ed8fdf5cc5364d0)
:   [maven-release-plugin] prepare release 3.0.19

[32ee8c4542](https://github.com/dcache/dcache/commit/32ee8c45425e949e06cfc3fa35c963f03fd410e2)
:   authentication: suppress WWW-Authenticate if requested

[4506319d50](https://github.com/dcache/dcache/commit/4506319d50817297591d133251392d53a0ec83ef)
:   webdav: improve logging on transfer failures

[3758693ce4](https://github.com/dcache/dcache/commit/3758693ce475997844ee9e7e5cd1104dd5931e0b)
:   pool: log why a transfer was forcefully aborted

[3446c4b8da](https://github.com/dcache/dcache/commit/3446c4b8da79642b728687ffa941d4f26482af82)
:   webdav: make Milton work-around more robust

[0f5c9f7b17](https://github.com/dcache/dcache/commit/0f5c9f7b177e9c86ed0c0f8d5afa4b471d52d82a)
:   script-nearline-spi: fix space leak when polling script is used

[4466f0d37c](https://github.com/dcache/dcache/commit/4466f0d37c8674f41c51a00727887a3e6f918f17)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.18

### http

In an HA setup with multiple pool managers, the httpd (old) service failed to
fetch the list of restore requests from all instances. Instead the service
would query one of the instances, possibly alternating depending on the
grouping of services in domains. This behaviour has been corrected, so that
the http interface now shows all restored entries even in HA configurations.

### webdav

File transfers through WebDAV doors could potentially bypass any Restrictions
checks in PnfsManager. This patch ensures that Restrictions are always checked
and observed, and improves PnfsManager's logging to give information in case
a Restrictions check is not posssible.


### Changelog 3.0.17..3.0.18

<!-- git log 3.0.17..3.0.18 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[04ac75e09d](https://github.com/dcache/dcache/commit/04ac75e09d99e8ddfaabf8794f2a3625a9915282)
:   [maven-release-plugin] prepare release 3.0.18

[335b645fbf](https://github.com/dcache/dcache/commit/335b645fbf4a44e40625108cfbca2f54bf3f9256)
:   webdav: Fix restriction check when downloading a file

[5502db75af](https://github.com/dcache/dcache/commit/5502db75afc9fb9dcb7842630499938547ba3d10)
:   [maven-release-plugin] prepare for next development iteration

[79073fcda7](https://github.com/dcache/dcache/commit/79073fcda7cfd92056c524eede3501fbd0410163)
:   httpd: Fix incomplete restore list in HA setup

## Release 3.0.17

### frontend

OpenID connect can now be enabled from dCacheView. This change introduces three new 
properties in the `frontend.properties` file, 
`frontend.dcache-view.oidc-provider-name-list`, 
`frontend.dcache-view.oidc-client-id-list` and 
`frontend.dcache-view.oidc-authz-endpoint-list`, 
all of which are documented in the properties file.

### pinmanager

Upgrades from dCache 2.13 could occasionally fail during the Liquibase update stage. 
The database table `pinsv3` can not be dropped if it is still referenced by foreign
keys of other tables. This modification adds a `cascadeConstraints=true` modifier to 
the dropTable command used during the conversion process. Thereby, updates are possible
without errors and PinManager starts without issues after an upgrade.

### rest-api

Requests to /api/v1/user now include the username of the requestor. This is intended 
to make working with OpenID Connect tokens easier.


### Changelog 3.0.16..3.0.17

<!-- git log 3.0.16..3.0.17 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[44f602a94e](https://github.com/dcache/dcache/commit/44f602a94edae8162bdc6832da68bf8830f1bc8e)
:   [maven-release-plugin] prepare release 3.0.17

[33fd02c298](https://github.com/dcache/dcache/commit/33fd02c29820a9cac552e6301975e35ef48a8689)
:   httpd, admin: Fix some hard-coded cell names

[fb5520975e](https://github.com/dcache/dcache/commit/fb5520975e66acd57a4110a2f21a6f6852d93581)
:   frontend: expose open-id connect to dcache-view

[7fec3318d9](https://github.com/dcache/dcache/commit/7fec3318d9b1a35357f1c75e8e05cd6e8d292caa)
:   rest-api: include username to the user attributes

[3c465934ee](https://github.com/dcache/dcache/commit/3c465934ee2bec5d1ac20a653f98ed3559f66c5d)
:   Add cascadeConstraints="true" to liquibase dropTable action on pinsv3 table

[8083ea91bd](https://github.com/dcache/dcache/commit/8083ea91bdeb62054744a539f20e7775ab7256a5)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.16

### nfs

Invalidation of VFS caches has been improved, so that there is no stale information left for
dot files.

### pool

Error handling in pools was improved for systems using CEPH backends.


### Changelog 3.0.15..3.0.16

<!-- git log 3.0.15..3.0.16 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[37e2ad1eac](https://github.com/dcache/dcache/commit/37e2ad1eac4a0f35f3c7ea594e05eca22b2dda93)
:   [maven-release-plugin] prepare release 3.0.16

[6d56e52d2d](https://github.com/dcache/dcache/commit/6d56e52d2dddf44fcd23697960dba09ecd6651dd)
:   nfs: bind vfs cache invalidation with file's layout

[89a192ae18](https://github.com/dcache/dcache/commit/89a192ae18bb65c56e78055f2b6ad92d5456151c)
:   ceph: map RadosException to corresponding IOException

[63d766b889](https://github.com/dcache/dcache/commit/63d766b88995f955aaa61aa1cfb4cfd1381cd79c)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.15

### nfs

Debugging of stuck transfers has been facilitated by adding the status of transfers to the output of the `show transfers` command.

The assignment of movers to NFS doors has been made more robust.

### system-test

The system-test module, used for demonstration or testing purposes, comes with a built-in X.509 infrastructure. With this release, expired certificates are replaced by new ones.


### Changelog 3.0.14..3.0.15

<!-- git log 3.0.14..3.0.15 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[7c9d20a042](https://github.com/dcache/dcache/commit/7c9d20a04241bb26d9f3eec2fa310bc11f43cf0c)
:   [maven-release-plugin] prepare release 3.0.15

[a3005ede58](https://github.com/dcache/dcache/commit/a3005ede587331a1313884e210d4ce10cb70bd56)
:   nfs: show transfer status when displayed

[605db8097b](https://github.com/dcache/dcache/commit/605db8097b50d07cb6d7f2a4bee8e790890a735a)
:   system-test: update disposable-CA generated credentials

[a45eb26bb3](https://github.com/dcache/dcache/commit/a45eb26bb35b1de13b6d087af06dd3b2bc12324c)
:   nfs: fix loosing movers due to short timeout

[d17e6332f2](https://github.com/dcache/dcache/commit/d17e6332f2c28c8ba001ecee9cffa80b8c3a3e84)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.14

### Changes affecting multiple services

The version of the PostgreSQL driver used by dCache internally was brought up to 9.4.1212. This fixes the issue described in [liquibase bug 2939](https://liquibase.jira.com/browse/CORE-2939)
.

### chimera

In order to improve IO performance, the way dCache updates `atime` values was modified.

### nfs

An internal change in the NFS door code helps reducing irrelevant exceptions being logged.

### srm

SRM no longer times out file requests. 
This alleviates a rare race condition where timeouts for the file request and file access competed. 
Requests that time out now always return SRM_REQUEST_TIMED_OUT at request
level and SRM_FAILURE for the SURLs in that request.


### Changelog 3.0.13..3.0.14

<!-- git log 3.0.13..3.0.14 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[7a614f2ceb](https://github.com/dcache/dcache/commit/7a614f2cebf3e1085bbc8f302d3e7f4ea1d459df)
:   [maven-release-plugin] prepare release 3.0.14

[ace6b59de1](https://github.com/dcache/dcache/commit/ace6b59de139dc0b9c2a39beaeadd848ed44c591)
:   ceph: log repository IO error

[706795f5b6](https://github.com/dcache/dcache/commit/706795f5b66da163a0039a1fc362372bd7700c89)
:   update postgresql driver to version 9.4.1212 to address issue with liquibase changeset and postgresql 9.6 (see [liquibase bug 2939](https://liquibase.jira.com/browse/CORE-2939))

[f6b7af5112](https://github.com/dcache/dcache/commit/f6b7af5112172cd6c53597cb45a29ab5263b795f)
:   srm: remove file-level timeout

[95c465df9f](https://github.com/dcache/dcache/commit/95c465df9f3045b73e8ba6f621f48de8c308ec3a)
:   chimera: do not update inode generation on atime only update

[08a3b4cb10](https://github.com/dcache/dcache/commit/08a3b4cb104471b47c6dfb2d74411164c584dca2)
:   nfs: do not add Origin to read-only subject

[a3df429db1](https://github.com/dcache/dcache/commit/a3df429db1993acad06eeb1d87e4702f17284a5c)
:   [maven-release-plugin] prepare for next development iteration

[2434f8375a](https://github.com/dcache/dcache/commit/2434f8375ae0a935f45fe663a7a18feb6da50b46)
:   parent/dcache: add mail jar to deployment

## Release 3.0.13

### pool

Current release improves handling of CEPH exceptions, so that pools can react appropriately when request for a missing file.

Fixes double close on p2p.


### Changelog 3.0.12..3.0.13

<!-- git log 3.0.12..3.0.13 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[484a88d](https://github.com/dcache/dcache/commit/484a88dc3366177cd4237328cf546083e194f58e)
:   [maven-release-plugin] prepare release 3.0.13

[6562643](https://github.com/dcache/dcache/commit/65626432a3af17e5cab9630c40dcc44971a7a3d9)
:   [maven-release-plugin] prepare for next development iteration

[194c54a](https://github.com/dcache/dcache/commit/194c54afcbb36eda093182c4b5f1f92bc37fa1ed)
:   pool: handle CEPH exceptions

[7f7d6e2](https://github.com/dcache/dcache/commit/7f7d6e279288f40572835a7b12fe35e686d3f472)
:   pool: fix double close on p2p

## Release 3.0.12

### chimera

There was an issue with a symbolic link to a directory where destination
where destination contained trailing slash. This is now fixed.

### nfs

The current release fixed interoperability with RHEL7-based clients
 and  handling of invalid principals on SETATTR sent
by OSX client. 


### Changelog 3.0.11..3.0.12

<!-- git log 3.0.11..3.0.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4770eea](https://github.com/dcache/dcache/commit/4770eea602c44d14be92c56557fb68284d794468)
:   [maven-release-plugin] prepare release 3.0.12

[9acdb7e](https://github.com/dcache/dcache/commit/9acdb7e7f9685bd30417725df9fc6bac236f5098)
:   libs: update to bug fix release nfs4j-0.13.1

[bd98067](https://github.com/dcache/dcache/commit/bd98067743e80f9e2d6bc49b19c30e05ccadbef4)
:   srmclient: fix handling of checksum options

[be5101d](https://github.com/dcache/dcache/commit/be5101d4ae9eba3ad94775ba2052994cfe1400b2)
:   [maven-release-plugin] prepare for next development iteration

[0be5408](https://github.com/dcache/dcache/commit/0be540844e776a4c1f8d9b9c6569292f8884e5f3)
:   chimera : handle empty paths elements path2inumber stored procedure

## Release 3.0.11

### chimera

The current release fixed database query for storing multiple checksums for a file.

### ftp

The Socket `read` method may return zero to indicate that no bytes were
read. Although this is not an error, such occurances will result
in a transfer failing.

This is now fixed.

### srmclient

Directory listing for CASTOR was resulting in a `NullPointerException`  when the request
size is too large, due to the fact that the CASTOR SRM interface limits the maximum number of responses to 1024.
This is now fixed.


### Changelog 3.0.10..3.0.11

<!-- git log 3.0.10..3.0.11 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[57ebca3](https://github.com/dcache/dcache/commit/57ebca36e91b41d9c8c6466d8fd1c418ad54ac1d)
:   [maven-release-plugin] prepare release 3.0.11

[8e607b6](https://github.com/dcache/dcache/commit/8e607b660a1b3b938113c73cce1905f0f2c83f30)
:   srmclient: fix compatibility with castor

[3389013](https://github.com/dcache/dcache/commit/3389013f1806cfc3fdc510a896e5159a7cd8e940)
:   ftp: prevent execution of most commands when unwrapped

[c422b7a](https://github.com/dcache/dcache/commit/c422b7a9170c9c5c60078d99591f534a3ec1bb30)
:   chimera: fixed database query for storing multiple checksums for a file.

[71a6ac9](https://github.com/dcache/dcache/commit/71a6ac9f11d13b7650c4043b4d746eea89404618)
:   ftp: do not fail proxy transfer if read returns zero bytes

[c480738](https://github.com/dcache/dcache/commit/c480738e98f64b6cb225d508638fbded90a494ef)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.10

### ftp

The current release added implementation of MLSC. As a result Globus is able to query the contents of dCache directories using FTP and
without creating additional TCP connections.

### lm

The current release fixed the issue with duplicate location manager connectors.


### Changelog 3.0.9..3.0.10

<!-- git log 3.0.9..3.0.10 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2b4e595](https://github.com/dcache/dcache/commit/2b4e595f0125c2b45760bfead90a40849a3bb240)
:   [maven-release-plugin] prepare release 3.0.10

[301142f](https://github.com/dcache/dcache/commit/301142f95c5d288a2e2dd298a05f7bca1ad4c054)
:   lm: Do not rely on thread interrupt for shutdown

[6b93af9](https://github.com/dcache/dcache/commit/6b93af98ce68df9cb3e9db567db2308ca7a50ab4)
:   ftp: implement the MLSC command

[363149a](https://github.com/dcache/dcache/commit/363149a317488de19bbf2f74df45f5e26b14a742)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.9

### ftp

The current release improves compatibility between dCache FTP client and Globus GridFTP server.


### resilience

When a file has no readable replicas, the default behavior of resilience
is to raise an alarm. Files marked `CUSTODIAL` were excluded from this.
The current release fixed this in a way that an alarm is raised for all files without readable disk copies, whether the file is `CUSTODIAL`  or not.

### restful

dCache has the concept of a home directory: each user may have a
directory that is somehow "theirs". This information was not
available to clients accessing dCache via the REST interface.
The current release fixed this and querying `/api/v1/user` provides the user's home directory in addition to other user-centric information.

 The RESTful interface exposed some namespace-targeted
information through /api/v1/namespace, and QoS information through
/api/v1/qos-management/namespace. This was undesirable as dCache exposes
namespace-targeted operations in two places.
This is now fixed and the client may obtain information by querying
`/api/v1/namespace`.

The current release improves the error handling for RESTful interface. Currently the error JSON object contains potentially useful information in the message and the bugs are logged.

### srm

During an ATLAS stress-test of tape recalls, it was discovered that
various sites had relatively short request lifetimes. However, the SRM
spec provides the opportunity for the server to inform the client (FTS,
in this case) of what lifetime a request actually has.
The current release includes the requests remaining lifetime in the response from the server.

The current release improves the documentation to help Admins to have a better understanding how to configure dCache correctly.


### Changelog 3.0.8..3.0.9

<!-- git log 3.0.8..3.0.9 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b243cb0](https://github.com/dcache/dcache/commit/b243cb0c7a05265e2bb815b7413f11581bd0253b)
:   [maven-release-plugin] prepare release 3.0.9

[926bf7c](https://github.com/dcache/dcache/commit/926bf7cfd8a1f73c65d9e603b21f7edf16d95e62)
:   srm-client: use default GridFTP port if not specified

[6b65522](https://github.com/dcache/dcache/commit/6b65522be556c21a3b1aee42a056e7f03d34acc1)
:   ftp: Add support for SITE WHOAMI command

[d3d12b9](https://github.com/dcache/dcache/commit/d3d12b9435ecae950791db4ec1cb636ce01b9db6)
:   resilience: remove check on CUSTODIAL for inaccessible files

[8b4ab7c](https://github.com/dcache/dcache/commit/8b4ab7cd9d25a14685341e33bded1d7094df59bd)
:   ftp: update parsing of CLIENTINFO command

[5911a18](https://github.com/dcache/dcache/commit/5911a18376f3929e42607e7c67c68914f43045af)
:   srm: include remaining request lifetime in various responses

[c3662f2](https://github.com/dcache/dcache/commit/c3662f2417190e3cdf26d472864010d63a37f199)
:   srm: update srm request.*.lifetime configuration properties documentation

[0284bac](https://github.com/dcache/dcache/commit/0284bac4e37f36270cba5cce43e99ac8b81cd8e2)
:   ftp: modify facts describing namespace ownership

[4136c76](https://github.com/dcache/dcache/commit/4136c762cd0b612c0ab26770540017af39365686)
:   ftp: add support for SITE TASKID command

[f8c16f5](https://github.com/dcache/dcache/commit/f8c16f5a7fafd3328b29a2cd5d2fe42ae8ff4369)
:   ftp: add initial support for checksum performance markers

[031862e](https://github.com/dcache/dcache/commit/031862e90b60084baa392cfc8da82c687bd5b599)
:   restful: support querying QoS through namespace

[8d74684](https://github.com/dcache/dcache/commit/8d746846d82bb9067e423a4a645fdb3c7fac53ed)
:   [maven-release-plugin] prepare for next development iteration

[393ba5d](https://github.com/dcache/dcache/commit/393ba5dfdf5e4ac1c8db63d3008894d7a0f71098)
:   rest: add home directory to user info

[b5c8a70](https://github.com/dcache/dcache/commit/b5c8a70f74c1aff920f2ecdb6a26e07fd0d52cd1)
:   restful: improve error handling

[fccd7bf](https://github.com/dcache/dcache/commit/fccd7bfb2a352c954bd3f70365331c917d63e2f8)
:   ftp: add support in OPTS RETR for specifying performance marker frequency

[19367b7](https://github.com/dcache/dcache/commit/19367b779c1858ac003bc6f3efd83128f1866dec)
:   ftp: show SIZE facts for directories

[bbf1c08](https://github.com/dcache/dcache/commit/bbf1c08b2166fa8273ff67cf1fe14becee9e9375)
:   ftp: add support for paths relative to home directory

## Release 3.0.8

### frontend

This release of dCache ships with an updated dCache View version. 

### xrootd

In https://github.com/xrootd/xrootd/issues/459, it became apparent that dCache could improve xrdcp compatibility by sending
checksum information in lower case. This release contains this change, which should improve xrootd operations.


### Changelog 3.0.7..3.0.8

<!-- git log 3.0.7..3.0.8 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b856742](https://github.com/dcache/dcache/commit/b856742ad28ba4b14aae3492ae796236b56629e1)
:   [maven-release-plugin] prepare release 3.0.8

[2056dd7](https://github.com/dcache/dcache/commit/2056dd7b67a50cd7ef6dc7bbfcee523f2e631c9d)
:   xrootd  : use lower case for checksum algorithm names when replying           to checksum queries.

[a87a7c6](https://github.com/dcache/dcache/commit/a87a7c6994c0d35bac361e5271f71823b2c9f2b0)
:   [maven-release-plugin] prepare for next development iteration

[cb40a59](https://github.com/dcache/dcache/commit/cb40a599b2f79b6777de5b8057338e88e8be8b40)
:   dcache: update dcache-view version to 1.0.5

## Release 3.0.7

### cleaner

The list of Delete Notification targets that the Cleaner will inform when a file's content has been cleaned is admin-configurable. 
In order to facilitate this configuration, the 'show info' command has been modified to also show Delete Notification targets.

### srm

The SRM code has been made more robust against races between file deletions and copies.

### systemtest

The 'system-test' script was updated to ensure anonymous dcap tests succeed.


### Changelog 3.0.6..3.0.7

<!-- git log 3.0.6..3.0.7 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a6c0932](https://github.com/dcache/dcache/commit/a6c09328a14f65feeeef9fc5003fca5109829882)
:   [maven-release-plugin] prepare release 3.0.7

[4e25147](https://github.com/dcache/dcache/commit/4e2514735263439282d307e6685e9bf965a5bd1d)
:   cleaner: show delete notification targets

[4d70728](https://github.com/dcache/dcache/commit/4d707288a2004a02ff394e7f83042f8d9df8d60c)
:   systemtest: allow anonymous dcap activity

[fa18be9](https://github.com/dcache/dcache/commit/fa18be9a740b43d1f9d907a0205ffe86901e6a32)
:   [maven-release-plugin] prepare for next development iteration

[54038a3](https://github.com/dcache/dcache/commit/54038a326b3143254a020c60efde138ab58a4dea)
:   srm: fix recovery procedure in internal copy if source is deleted

## Release 3.0.6

### cells

Fixed a race condition and logging bug affecting cells relying on zookeeper. This
could affect location manager, space manager and pool manager.

### gplazma-ldap

Wrong quoting of two gplazma property strings could occasionally cause IllegalArgumentExceptions to be thrown when using LDAP-based logins. This problem has now been fixed.

### locationmanager

Fixed a problem in Location Manager in which it would fail to shut down
and could leave two overlapping connectors running.

### pool

The process of deleting files on pools has been made more robust against potential problems. This further decreased the likelyhood of repository corruption during file deletion.

This release improves transactional stability of the built-in Berkeley database in pools.

### srmclient

SRM Client v1 received improved error handling. Most noticeably, expired credentials no longer cause a RuntimeException but an IOException.


### Changelog 3.0.5..3.0.6

<!-- git log 3.0.5..3.0.6 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[92c752d](https://github.com/dcache/dcache/commit/92c752dab7db95ef2acb3fe187e1df89fd892051)
:   [maven-release-plugin] prepare release 3.0.6

[52becab](https://github.com/dcache/dcache/commit/52becab9cb3b8e2f2d98f559c32b53eae4895816)
:   pool: Fix race and nested transaction problem during deletion

[cc8eb74](https://github.com/dcache/dcache/commit/cc8eb746b46d88c26e267b526a3c5e331b9bb437)
:   pool: Fix transactional behaviour with Berkeley DB

[042c8ef](https://github.com/dcache/dcache/commit/042c8efb80345a9cf492c3be73af3e23e23ed80b)
:   lm: Fix lost thread interrupt that prevents shutdown

[b3d670f](https://github.com/dcache/dcache/commit/b3d670f30ca5582fcd596bf1fab0aea6dbb62907)
:   cells: Schedule watcher notifications on cell event thread

[b0bab0c](https://github.com/dcache/dcache/commit/b0bab0c4a482a737cbaeffc94a07db3ad61cdfe9)
:   gplazma-ldap: fix default properties for root and home

[a21d861](https://github.com/dcache/dcache/commit/a21d861e661f303e097dabfbcaf34287b2db63e5)
:   [maven-release-plugin] prepare for next development iteration

[ecdf153](https://github.com/dcache/dcache/commit/ecdf153644fe1a80a92ddf4fadf1f103cf1724e6)
:   srmclient: consolidate credential expiry, don't use RuntimeException

## Release 3.0.5

### frontend

Included a new version of dCacheView with minor improvements.

### nfs

The handling of NFS requests for offline files has been improved. 
Such requests will no longer attempt unneccessary retries.


### Changelog 3.0.4..3.0.5

<!-- git log 3.0.4..3.0.5 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6b4ef4c](https://github.com/dcache/dcache/commit/6b4ef4c641b21ff8c838c6dc7138f92d16f8423e)
:   [maven-release-plugin] prepare release 3.0.5

[0b6d777](https://github.com/dcache/dcache/commit/0b6d777e45ede71e7d05424deeb462948e17bc85)
:   dcache: update dcache-view version to 1.0.4

[123b47c](https://github.com/dcache/dcache/commit/123b47c187b185985db6b2df51c508dfe8b29b13)
:   resilience: fix fairness algorithm bugs in file operation map

[3c04c2d](https://github.com/dcache/dcache/commit/3c04c2d566a3964198d06b797211a6334b3b1ecc)
:   nfs: rework pool selection to get rid of too many retries

[61e8ed1](https://github.com/dcache/dcache/commit/61e8ed1a6ac1aa799682413f98a9011805f095f9)
:   minor typo corrections

[44ad5c2](https://github.com/dcache/dcache/commit/44ad5c2190f04e64c10fdb384ac261f2663516f4)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.4

### dcache

The current release updated dcache-view version.

### pool

In the current release changes  `hsm ls` command so that it lists all configured HSMs if no argument is provided.

The current release fixed URISyntaxException in ceph backend.

### poolmanager

Ability to restrict staging to specific protocol was missing in
stage protection specification. Additionally it was not possible to
specify DN, FQAN, storage group and protocol that are not allowed
to stage.  

This is now fixed and stage protection configuration can be used as a blacklist. 


### Changelog 3.0.3..3.0.4

<!-- git log 3.0.3..3.0.4 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[21783c2](https://github.com/dcache/dcache/commit/21783c203290401434c8ec1830a612420854cf80)
:   [maven-release-plugin] prepare release 3.0.4

[5314301](https://github.com/dcache/dcache/commit/531430143a8b7619be5255d883c1167716b46faa)
:   stage protection : minor correction for test to pass

[9882a8f](https://github.com/dcache/dcache/commit/9882a8f85bae8f4a27922ec5f589d75343eabc59)
:   3.0 compatibility changes for stage protection

[1f7e1c2](https://github.com/dcache/dcache/commit/1f7e1c2259189fd3ee4f56f01c55b2f7e1124155)
:   pool: fix URISyntaxException in ceph backend

[df629f2](https://github.com/dcache/dcache/commit/df629f2a200595ba8f7aff86115dc7b70b474074)
:   PoolManager : stage protection add protocol to the list of discriminators

[26c0f5f](https://github.com/dcache/dcache/commit/26c0f5fe582d40570a4e5a4e9cacc121b1b9304f)
:   dcache: correct the output directory

[efd258c](https://github.com/dcache/dcache/commit/efd258c78f71f5d5a0b94abb929114d3c49800d9)
:   dcache: update dcache-view version

[c850ff0](https://github.com/dcache/dcache/commit/c850ff0185b0afb0093f11feb342ee8beccd0436)
:   pool: 'hsm ls' must show all configured hsm if no argument is provided

[03d3434](https://github.com/dcache/dcache/commit/03d34348b933584a293bd7dd8b1c8db31140cab4)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.3

### cells

The current release fixed an issue causing doors to log a  stack trace on startup.

### nfs

Remote I/O error was generated on the client side accompanied by stack trace on server side when user fumbled .(get) command.
The is fixed now and  client side sees no such file or directory error and no stack trace in log file.

### srmclient

The current release fixed out of memory  issue for  `srmls -l`
 showing particular directory. 

### srm-common

The current release improved  user experience by ensuring that bugs and JVM-critical errors 
do not trigger a retry of the operation, but favour a fail-fast approach.

### transfermanager

The output of `info`, `queue`, `ls internal` and `ls external` admin
commands in RemoteTransferManager has been improved.


### Changelog 3.0.2..3.0.3

<!-- git log 3.0.2..3.0.3 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[e0c5ab9](https://github.com/dcache/dcache/commit/e0c5ab97e03e28f39159a9b395dacafbff0f082c)
:   [maven-release-plugin] prepare release 3.0.3

[a832e71](https://github.com/dcache/dcache/commit/a832e715757f3162976d67852bf8f8cb7044a7a5)
:   srm-common: don't retry when JVM runs out of memory

[104d79a](https://github.com/dcache/dcache/commit/104d79a50629106d1dc6d4fd32a4d887740e2865)
:   transfermanager: tidy up output from 'info' 'queue' and the two 'ls' commands

[c814f54](https://github.com/dcache/dcache/commit/c814f545ad6cc82bb4243eaf20b32f05787f79fb)
:   cells: fix 'This stopwatch is already stopped' error

[3859a07](https://github.com/dcache/dcache/commit/3859a07e893ec0732478eb6fca1ae82723a14c0c)
:   srmclient: use streaming deserialisation, allow more memory.

[a1e2ffb](https://github.com/dcache/dcache/commit/a1e2ffbb2da27a26b9ef724010c7762e8fe7e318)
:   chimera-enstore: specify fields order on insert

[90021dd](https://github.com/dcache/dcache/commit/90021ddb961b4d168bcd1a45f35f91404d299bce)
:   NFS: throw FileNotFoundHimeraFsException in case of fumbled ".(get)" command

[8768838](https://github.com/dcache/dcache/commit/8768838d79c9c7e6e7dec803aee6ed199291ee6e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.2

### cleaner

Users reported that they wanted to see space freed up by cleaner processes
to be reported as free as soon as possible. This patch sends notifications
about freed up space more often, resulting in quicker status updates.

### doors

Log when the list of auto-discovered NIC interfaces changes.  Support
logging the time taken to acquire NIC information.  Update logged
messages to indicate the context.

### nfs

The NFS implementation was updated, improving spec compliance.

### pool

A problem was fixed that could cause the csm check to fail on pools 
containing broken files.

When deleting files, the cleaner submits batches of files to delete to a pool,
but this batch is then processed sequentially. In order to improve deletion
performance, such deletion tasks are now run concurrently. The
increase in concurrency can reduce the overhead of syncing the meta data to
disk after every deletion, thus increasing the deletion rate.

### srmclient

While srmfs's '-debug' option already provided lots of information, 
including the SOAP request sent to the server, it did not provide 
the server's response until now. This has been added, making 
troubleshooting easier for some problem classes.

The SRM client has been updated to work correctly if it has been
installed in a path containing spaces.

Glob expansion in SRM client has been overhauled, allowing much faster namespace operations on DPM when globbing is in use.

srmfs would not work with paths that require special characters to be percent-encoded.
This included path names with spaces or hash symbols. After this update to srmfs,
such path names are permissible and all namespace operations and file transfers on them 
will succeed.

srmfs now accepts single commands directly as command-line arguments, e.g.
'srmfs srm://srm.example.org/path ls'

Exiting will block if there are ongoing transfers.  Notifications are
printed, which should provide feedback on activity.

The user can force an exit by using Ctrl+C, which will still result in a
clean exit.


### Changelog 3.0.1..3.0.2

<!-- git log 3.0.1..3.0.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6a23d46](https://github.com/dcache/dcache/commit/6a23d46c2816ab6a6a10a9b6bdaeee063d63a8db)
:   [maven-release-plugin] prepare release 3.0.2

[a2f59a5](https://github.com/dcache/dcache/commit/a2f59a5a6ecef7b81a03ece8b34d566537b495ed)
:   nfs41: fix open-stateid leak introduced in 0702d73

[affa1b4](https://github.com/dcache/dcache/commit/affa1b49169430b7f5e597b45a87ba50b37c47ac)
:   srmclient: support srmfs with command on command-line

[97f2f8d](https://github.com/dcache/dcache/commit/97f2f8dc875cd59b917d4218b407eb412c40c399)
:   srmclient: show SOAP response from server when debug enabled

[842f8f0](https://github.com/dcache/dcache/commit/842f8f0b877bd7e92513accaba0364f7838faf41)
:   srmclient: percent-encode paths that require it

[20ffed0](https://github.com/dcache/dcache/commit/20ffed08900fdff25088d67bfdc12f77c4a42399)
:   srmclient: fix stat/ls caching for glob expansion for DPM

[d2d4b4c](https://github.com/dcache/dcache/commit/d2d4b4c38f18d303af1d3b027a26673f492904c2)
:   srmclient: fix deploying srm-client in path with spaces

[192462c](https://github.com/dcache/dcache/commit/192462c23afe29cac5cac5896171b60c1eff29b1)
:   srmclient: fix Java 7 compatibility for srmfs

[ba8b836](https://github.com/dcache/dcache/commit/ba8b836c2040e5ff7e4520547270e1ae046b863e)
:   doors: add diagnostic information for NIC auto-discovery

[8a8b83d](https://github.com/dcache/dcache/commit/8a8b83d8d3b6e752c21e1e1cf51c13b75bfed4ba)
:   pool: Delete files concurrently

[8d77acc](https://github.com/dcache/dcache/commit/8d77acc785997229b7dfb98daeaf81bf0ed72ddf)
:   cleaner: Send notification more often

[7a542d2](https://github.com/dcache/dcache/commit/7a542d2542e7d9c331cfd9bf7138c45ece277dbc)
:   pool: Fix csm check command in the pressence of broken files

[1fdb643](https://github.com/dcache/dcache/commit/1fdb6438d11e6abab029e7a3e533f05df40470bc)
:   [maven-release-plugin] prepare for next development iteration

[a6f5d40](https://github.com/dcache/dcache/commit/a6f5d401a37d1f52180b2d1409ce718c7c9c87be)
:   nfs: discover open-stateid during layout return

## Release 3.0.1


### cells

The current release improves reply handling in batch processing.

### ftpclient

The current release improves compatibility between dCache FTP client and Globus GridFTP
server.

The dCache GridFTP client was  not working with Globus FTP server. This is now fixed.

### pool

The current release introduces a new pool.mover.nfs.thread-policy property, which add a spossibility to control  
nfs request processing policies. 
dCache admins could choose  one of the  strategies for nfs request processing.  
Please note, that by default the request processing policy is set to same-thtead strategy.

### srmclient

`srmfs` was issuing `SRM` requests that `DPM` did not accept. `srmfs`
also did not accept the responses from DPM. This was preventing any file
transfers for succeeding. 
This is now fixed and srmPrepareToGet and srmStatusOfGetRequest operations work as expected with DPM.

The two `ls` commands (`lls` and `ls`) was not supporting multiple
arguments or glob expansion. Both were taking an optional, single
argument, which was  limiting while discovering what content is
available and was not matching the expectation of the users.
The current releases fixes this limitation and  Multiple arguments and glob expansion are now supported for the `ls` and `lls` commands.

Correct information displayed about directories from DPM.

This release of dCache improves the readability of the error returned to the client when server declines to add an explanation.


### Changelog 3.0.0..3.0.1

<!-- git log 3.0.0..3.0.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[0f643c0](https://github.com/dcache/dcache/commit/0f643c0d9f2f22035d1700180fbd660858eaee17)
:   [maven-release-plugin] prepare release 3.0.1

[3e2e814](https://github.com/dcache/dcache/commit/3e2e814afb5acf88508c89abe84f30db57bf0fcf)
:   cells+dcache: fix Reply handling in batch processing

[9f5745f](https://github.com/dcache/dcache/commit/9f5745f82bbf50a4220a9ab598adc622b59181a4)
:   ftpclient: fix compatibility with Globus FTP server

[1670622](https://github.com/dcache/dcache/commit/16706228a76825ec156ffe1dcaa85c33d077ff30)
:   pool: optimize checksum channel calculation

[b6f591c](https://github.com/dcache/dcache/commit/b6f591c0dfffaa7c339d61dc97ef726be48fc03b)
:   pool: simplify checksum channel logic

[a2375f1](https://github.com/dcache/dcache/commit/a2375f18fa0f39a12961b360179b6c3c381b2a3f)
:   srmclient: ensure a reasonable error message

[330e9f5](https://github.com/dcache/dcache/commit/330e9f5b15523a59d1eb63013620c65681e0d66d)
:   srmclient: fix DPM compatibility with SRM transfer requests

[6d7b7e6](https://github.com/dcache/dcache/commit/6d7b7e604ba7fce08a050e2507e5621ec51b057d)
:   ftpclient: fix multiline ADAT reponses

[9abf787](https://github.com/dcache/dcache/commit/9abf787ee0fe1bb6b75ef6b31ab6df42ee9ec018)
:   ftpclient: encrypt SITE CLIENTINFO command

[7279b09](https://github.com/dcache/dcache/commit/7279b09222d9e9c7ee261029724795f61f66fe9d)
:   pool: add a possibility to control nfs movers threading policy

[8db0380](https://github.com/dcache/dcache/commit/8db0380b833cb3d50f8ca3ef3d06ac311172a942)
:   srmclient: add glob support for lls and ls

[8cb2378](https://github.com/dcache/dcache/commit/8cb2378d60aaa3c9ce1782edf1bcdf48ee1aa99f)
:   srmclient: avoid NPE when stat directory with DPM

[d12117a](https://github.com/dcache/dcache/commit/d12117ab68ab1c0f27652bbfe48317bae6cfb32e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.0.0

The most obvious change is the transition to a new versioning scheme
that better reflects our existing release and compatibility policy.

Once a year, dCache.org releases a golden release. The golden release
maintains compatibility with pools of the previous golden release and
any intermediate version. The release after the golden release drops
compatibility with pools older than the golden release it surpasses.
The new versioning scheme reflects the incompatibility by incrementing
the major version number in the release *after* a golden release. Thus
the golden release marks the last release of a particular major
version. Like before, patch level releases are identified by a third
number in the version.

As always, this dCache release contains many internal changes, many
performance improvements and many cosmetic changes that will not be
explicitly described in the release notes. The changelog at the end
contains the complete list.

As always in a release after a golden release (an .0 release in the
new versioning scheme), configuration properties previously marked
obsolete have been dropped. Configuration properties previously marked
deprecated are now obsolete. You should run `dcache check-config`
before upgrading and fix any warnings. Rerun `dcache check-config`
after upgrading.

The following are noteworthy changes or changes that you as an admin
should know about when upgrading. The changes are described in no
particular order.

#### admin: no longer supports DSA keys

Upon upgrade, the post installation script will automatically generate
RSA keys instead. Your ssh client may warn you about the changed
server key. The `admin.paths.dsa-host-key.private` and
`admin.paths.dsa-host-key.public` properties are obsolete.

#### Automatic detection of current PostgreSQL master

`dcache.db.host` and derived properties now accept a comma separated
list of host names when used with PostgreSQL. This is intended for use
with a cluster of PostgreSQL servers using streaming replication. The
JDBC driver automatically detects and uses the current master
server. In case a slave is promoted to master, the JDBC driver
automatically discovers and reconnects to the new master without
requiring a dCache restart.

#### caNl 2.1

Although this change should be transparent, the update of the Common
Authentication Library, the Bouncy Castle cryptographic library, the
ARGUS library, and the VOMS library is critical and you never
know if this breaks something. Keep an eye out for CA and client
problems.

On the positive side, this upgrade allowed us to update the Apache
SSHD library which hopefully fixes a number of compatibility problems
observed with some Python SSH libraries.


#### billing: empty format strings suppresses output

Previously, if a formatting string was undefined, billing records would
be logged using a default format. This has been changed such that
billing records with an undefined or empty formatting string are not
added to the billing file. This allows specific record types to be
suppressed.

#### billing: make billing files self-describing

Upon startup or when rolling over to a new billing file, the billing
service now outputs formatting instructions to the billing file. These
are lines starting with `##` followed by the message type and the
configured formatting string.  Parsers may make use of the
instructions to recognize the format. At the very least, third party
parsers should be updated to ignore lines starting with a hash symbol.


The billing indexing utility has been updated to recognize these
formatting instructions and thus can parse the billing files even when
the output format is changed and billing files thus contain a mix of
different formats.

Configuration properties with the common prefix
`billing.parser.format` were added to define the default format for
old billing files without formatting instructions. Thus the output
format can be changed while still maintaining compatibility with old
billing files.

#### billing: expose full address in billing record

Previously, some billing records were logged with a full cell address
while others only included a cell name. The default format retains
this behaviour, however the full cell address is now exposed in the
formatting string. The cell name and domain name are also exposed
separately, making it possible to output these as separate
fields. Check the instructions in `billing.properties` for details.

#### billing: make service replicable

It is now possible to add multiple billing services if all components
(including pools) have been updated to version 3.0. All instances of
`billing` receive all billing records.

Introduced `dcache.queue.billing` and `dcache.topic.billing`
properties and marked `dcache.service.billing` obsolete.

#### Setup files are now restricted to setup commands

The setup files of various services, in particular `poolmanager.conf`
and `setup` on pools, are now restricted to setup commands. These are
the commands the services themselves use when generating the setup
files. Previously any cell command could be included, even though the
command would be lost when the setup file was regenerated.


#### Setup file syntax is now checked before it is loaded

When reloading a setup file at runtime using the `reload` command, the
file is now checked for syntactic errors before being applied to the
running service. If an error is found, the file is not loaded and the
service is unaffected. Previously, such errors would leave the service
in an inoperable state.


#### Legacy cell topology support has been dropped

dCache 2.16 introduced the use of ZooKeeper for topology discovery as
well as the use of core domains as message brokers and satellite
domains connect to core domains. For backwards compatibility, 2.16
included the legacy UDP discovery service in `dCacheDomain` and
`dCacheDomain` was a core domain by default.  This UDP service is no
longer included and compatibility with pools older than 2.16 has been
dropped. `dCacheDomain` no longer defaults to being a core domain and
it is in fact no longer a special name - you may call it whatever you
like.

This however means that unless you define some domain as a core
domain, none of your dCache domains will be connected and you will be
left with an inoperative dCache. If you haven't already done so in
2.16, upon upgrade designate one of your domains as a core domain by
defining `dcache.broker.scheme = core` for it. Your former
`dCacheDomain` would be an obvious candidate for such a domain.

#### Lots of improvements to service life-cycle management

We made lots of changes to the life cycle of dCache cells. These
changes are mostly internal, but the short story is that we try to
improve how dCache starts and in particular how it can cleanly shut
down.

In the past, clean shutdown wasn't all that important as the service
would be inoperable anyway when shut down. With the addition of high
availability deployments, this assumption is no longer true and we
would like to be able to shut down cleanly. The goal has not been
achieved yet in dCache 3.0, as there are still plenty of issues
causing exceptions on shutdown, but the situation should be better than
in previous releases.

As an admin, the obvious change you will observe is that errors in the
log files have changed. In particular we log more stack traces when
detecting errors and we log cells that shut down slowly; even though
slow shutdown isn't necessarily an error as many services now do more
work while shutting down.


#### New wire protocol for cell communication

A new wire protocol for interdomain TCP connections for cell
communication has been introduced. This protocol has lower overhead
than the old protocol. Connections with 2.16 domains are detected
automatically and the old protocol is used as a fallback.

#### dcap: fewer threads and faster

The DCAP door was refactored. Compared to the earlier version it got:

- about half the number of threads than before,
- reuse of threads to reduce the overhead,
- detects client disconnects even if the door is busy,
- the legacy feature to block a DCAP door by defining the `dcapLock`
  entry in the domain context has been removed.


#### spacemanager: improved latency on non-spacemanager transfers

Space manager is sort of a proxy for pool manager. When enabled, doors
send requests they usually would send to pool manager to space manager
instead. This had the effect of adding a little extra latency to all
transfers, even reads and unmanaged transfers.

The interaction between pool manager, space manager and doors has been
heavily refactored. One consequence is that the space manager can
inject its own behaviour into the doors. This allows the requests to
be sent directly to pool manager if it can be determined that space
manager is not involved in processing it.


#### poolmanager: persist setup file in ZooKeeper

The pool manager setup is now preserved across restarts even without
saving the setup to disk. This is achieved by persisting the setup in
ZooKeeper whenever it changes. Upon restart, the setup is loaded back
from ZooKeeper.

The consequence is that `poolmanager.conf` is only loaded when either
no setup can be found in ZooKeeper, or when the admin explicitly uses
the `reload` command. Restarting pool manager will not reload
`poolmanager.conf`. As before, the `save` command is used to update
`poolmanager.conf` and the file is not updated automatically.

This feature forms the basis of synchronizing the setup between
multiple instances of the pool manager in a high availability
deployment of dCache: Whenever the setup changes in one pool manager,
the setup is stored in ZooKeeper and other instances discover the
change and apply the update locally.

#### poolmanager: persist pool read-only status in pool manager setup

When using the `psu set pool -rdonly` command to mark a pool as read
only, this restriction was not persisted in the pool manager
configuration file. Consequently, the read only status would be reset
by a pool manager restart.

The read only status is now stored in both `poolmanager.conf` and
in ZooKeeper and thus the read only status of a pool survives restarts.

Note that the read-only status in pool manager is a separate concept
from the `pool disable` state defined in pools.

#### poolmanager: make the service replicable

Pool manager is now a replicable service. This means one can create
multiple redundant instances of pool manager and the load will be
distributed over the available instances.  The pool manager
configuration is synchronized through ZooKeeper. For a given set of
pool managers, a particular file is always processed by the same
instance.

#### poolmanager: allow decentralized pool selection

Pool manager has traditionally been the central place in which all
pool selection (assigning transfers to pools) has been performed. Pool
manager allows great flexibility in how this selection is performed,
including cost based replication, load and space triggered fallbacks,
staging from tape or to export pools, etc.

To accurately enforce the different selection strategies and the
various cost limits, it was essential that pool manager had a
complete picture of the load of all pools. Cost updates from pools are
only distributed every 30 seconds, so to obtain the necessary accuracy,
pool manager would update its internal cost estimates whenever it
selected a pool and it would also intercept messages between doors and
pools indicating the beginning and end of a transfer.

This model falls apart if pool selection is distributed over several
components as any adjustments to the internal cost state would be
local to the component selecting the particular pool. Such distributed
pool selection could be found in a high availability deployment of
dCache in which multiple redundant pool managers each perform pool
selection for a shard of the files. Another, not currently
implemented, scenario is delegating pool selection to doors to reduce
the latency of pool selection.

dCache 3 reimplements how the various cost limits of pool manager are
enforced. Rather than assuming that a pool manager has perfect
knowledge, pool selection is performed under the assumption of
reasonably, but not perfectly, accurate data. Whenever the pool
manager selects a pool it also encodes the _assumptions_ under which
this pool was selected (e.g. load is below a certain threshold, pool
has enough free space, etc). This assumption is forwarded by the door
to the pool and checked by the pool before enqueuing a mover. If the
assumption fails, a cost update is prematurely submitted to pool
manager and the mover creation request is rejected. The door will
resubmit the pool selection request to pool manager, which now has
more accurate cost information.

This change is mostly invisible, although it may certainly affect the
dynamic behaviour of pool manager, replication and assignment of
transfers to pools.

By the way, the `cm info` command of pool manager has been removed as
there is nothing useful for it to report now. The commands `cm set
active`, `cm set update`, `cm set debug`, `cm set magic` are
obsolete. These should be removed from `poolmanager.conf` on upgrade.


#### poolmanager: improve stability of hot spot replication

Pool manager can be configured to trigger replication of files when
the source pool exceeds a certain load threshold.

Unfortunately, the load was defined in terms of the average relative
queue length of the various mover queues on the pool, including the
queues of pool to pool transfers. Since pool to pool queues typically
(and wisely) have low limits, the relative weight in the load
calculation of pool to pool transfers is often high. The consequence
is that triggering a replication may itself push the calculated load
of the pool higher, triggering even more replications. This is bound
to generate an unstable system.

dCache 3 changes how the load of a pool is calculated to exclude the
two pool to pool queues as well as the HSM stage queue from the pool
calculation.  Existing cost cut limits may have to be retuned as the
calculated performance cost has changed.

#### pool: drop the limit on pool to pool receive queues

A pool has two queues dedicated to pool to pool transfers; one for
sending files and one for receiving files. The receiving end does not
limit the number of concurrent transfers to avoid deadlocks in pool to
pool transfers. For purposes of calculating a performance cost, the
pool did however define a limit anyway (as the load was determined as
the average queue length _relative_ to the queue limit).

As described in the previous section, load no longer considers the
pool to pool queues and thus the unenforced limit on the receive queue
has been dropped. The pool `pp set max active` command has been
deprecated. The queued and max columns of the pool to pool receive
queue in `webadmin` and `httpd` are now empty.



#### pool: log why a mover is killed

The pool has been extended with support for injecting a message when
killing a mover. Components and services that kill movers make use of
this feature to document why the mover was killed. This information is
included in billing and depending on the protocol it may also be
propagated to the client.


#### pool: allow continuous flushing to tape

Traditionally, flush to tape on pools was batched by storage
class. Once a batch of files began to flush, new files arriving on the
pool would not begin flushing until the running batch would complete.
For HSM subsystems that do their own batching, the batching in dCache
is typically counterproductive as the driver or some external
component may wait for more files even though such files would be held
back by the pool to be included in the next batch.

To resolve this issue, dCache 3 adds an `-open` option to the `queue
define class` command in the `pool` service.  This option alters the
logic such that newly created files are added to an existing batch
immediately.

#### pool: support polling scripts with the HSM script driver

The classic `script` HSM driver invokes an external script to flush,
stage or remove files from tape. Usually, this operation is blocking,
meaning that many concurrent instances of this script will run at the
same time.

Some clever admins have found a workaround for this scalability issue
by letting the script poll for the completion of the operation. Rather
than block, the script terminates with a failure. This relies on
dCache pools retrying HSM operations. This works well, except that it
fills the billing files and log files with error messages.

To support this type of script, dCache 3 extends the `script` driver
to recognize 72 as a special return code. When the script exits with
this return code, the driver places the request back into its queue
and retries it without propagating the error to dCache. The result is
that the operation is retried without spamming the log files and
billing files. The retry period can be configured using the new
-p:delay option.

Note that for flush, the retry triggered by exit code 72 is within the
same batch. Thus new files will not be added to the queue until the
batch completes, except if the flush queue is defined with continuous
flushing (see the `-open` option in the previous section).


#### pool: alter failure semantics for empty files

When upload to a pool fails, the file is usually registered in the
name space like any other upload - if a checksum or file size was
predefined, the file may optionally be marked broken. In either case,
the file would be considered "complete" in the sense that no further
modifications to the file are allowed.

One common failure mode for uploads is when no data is uploaded at
all. This could be because the mover was killed before it could be
started, that is, while it is queuing; or because the client didn't
connect to the mover; or because the mover failed to connect to the
client. Networking issues could be a common source of such
failures. Due to the failure semantics, such movers could not be
retried by the door.

In dCache 3 the failure semantics for such empty uploads has changed
such that the replica on the pool is instead deleted and not
registered in the name space. The name space entry is left in its
"virgin state". Protocols like NFS and DCAP can open such files for
writing, allowing the upload to be retried.

Eventually, other doors will be updated to retry write mover creation,
but the current release doesn't do that yet.

#### pool: allow runtime management of mover queues

Pools allow movers to be placed on queues. Several queues may be
created, e.g. to treat internal and external transfers differently, or
to queue transfers by protocol.

Previously, custom queues were defined using the `pool.queues`
configuration property, requiring a pool restart to change the defined
queues.

In dCache 3, the admin shell commands `mover queue create` and `mover
queue delete` have been added instead. The existing `pool.queues`
property is deprecated. The queue definitions are persisted to the
pool setup file when issuing the `save` command.

By the way, the unused `mover remove` command has been removed.


#### pool: deprecated commands for HSM limits have been removed

The deprecated `rh set max active`, `st set max active` and `rm set
max active` are no longer support in pool setup files. Use the
equivalent provider specific options instead. Upon upgrade we
recommend running the pool `save` command before upgrading - at least
if this has not been done since upgrading to 2.9.


#### pool: optimize Berkeley DB meta data updates

The part of the pool abstracting file and meta data operations - the
repository - has been heavily refactored. One consequence is that
Berkeley DB updates are now transactional, improving consistency and
hopefully performance too as updates are batched together.


#### pool: allow CEPH to be used as a storage backend

One consequence of the heavily refactored repository component in
pools is that it has become easy to plug in alternative backends.
CEPH is a distributed block storage that has gained popularity in
recent years. In dCache 3, CEPH can be used as a backend for pools,
allowing the file data to be stored in CEPH. The meta data is kept in
the traditional Berkeley DB format.

See the documentation of the `pool.backend` property for choosing an
alternative backend. Several CEPH related properties starting with
`pool.backend.ceph` have been added. Consult the documentation in
`pool.properties` for details.

One consequence of the change is that HSM drivers can no longer expect
replicas to be stored as files on the local file system. Instead
replicas in a pool are now identified by a URI. When developing HSM
drivers or HSM scripts, this should be taken into
consideration. Backwards compatibility is however important to the
dCache team and as long as a local file system is used, the HSM driver
and HSM scripts are passed a regular path rather than a URI.

It has to be stressed that CEPH support is considered an experimental
feature. The more encouraging news is maybe that this shows that it is
fairly easy to hook alternate storage backends into dCache.


#### pool: sorted listing of movers

In the _nice to have_ category, dCache 3 supports options in the
`mover ls` admin shell command to sort the output by mover's last
access time and transferred data size.

#### ftp: port door to Netty

Netty is an non-blocking I/O framework used by xrootd doors and for
xrootd and http movers in pools. In dCache 3.0 ftp doors make use of
Netty too. This is pretty much transparent, but it allows the
door to scale to more concurrent connections with lower resource
usage.

By the way, we also upgraded to Netty 4.1 with buffer pooling enabled
- this should reduce Java garbage collection overhead.

#### ftp: abort upload if SRM invalidates TURL

Previously, when the transfer URL generated by the SRM was invalidated,
either because it expired, the request was aborted, or the SURL was
deleted, the underlying FTP upload would be allowed to continue. The
upload would eventually fail when the last byte had been transferred,
wasting bandwidth and generating a misleading error.


This has been changed such that the SRM will kill an FTP upload when
it invalidates a TURL.

#### srm: added extra fields to the srm access log

The srm access log contains a description of every client request. In
dCache 3, several extra fields have been added. In particular for
single file requests, the access log now contains the path of the file
to which the request applies.

#### webdav: use relative links in generated HTML

The default templates for the HTML view of the `webdav` door now use
relative links. This should make it easier to use the door behind a
reverse proxy or load balancer.

#### webdav: allow template to be reloaded at runtime

The `webdav` service generates the HTML view from admin configurable
template files. A `reload template` command was added to trigger the
template to be reloaded at runtime. The new
`webdav.enable.auto-reload.templates` configuration property may be
used to enable automatic reloading whenever the template changes.

#### xrootd: select mover queue by application name

The `xrootd` door can now select a pool mover queue by client application
name. See the documentation of the `xrootd.app-ioqueue` configuration
prefix in `xrootd.properties` for details.

It should be stressed that the application name is submitted by the
client and is easy to fake.

#### xrootd: recognize oss.asize parameter

Xrootd clients submit the file size upon upload as an `oss.asize`
property. dCache now recognizes this property and uses it in space
reservations, pool selection, and file verification. If the uploaded
file does not match the specified size, the file is marked as broken.

#### nfs: autodiscovery of nfs4domain for idmapping

For correct user id mapping nfs4 requires that server and client use
the same naming scope, called nfs4domain. This implies a consistent
configuration on both sides. To lower deployment overhead a special
auto-discovery mechanism was introduced by SUN Microsystems - a DNS
TXT record. Staring from version 3.0 dcache supports this discovery
mechanism. When `nfs.domain` property is set, it gets used. If it's
left unset, then DNS TXT record for `_nfsv4idmapdomain` is taken or
the default `localdomain` is used when DNS record is absent.

See [nfsmapid and DNS TXT Records](http://docs.oracle.com/cd/E19253-01/816-4555/epubp/index.html) for more information.

#### nfs: improved protocol compatibility and stability

Nfs door now can share a single mover between multiple transfers to a
file by the same user coming from the same host. This should improve
compatibility with existing clients as they expect such behavior which
is allowed by nfs protocol specification.

#### nfs: added support for flexfile file layout

Flexfile layout type aims to be an extension to pNFS to allow the use of
storage devices in a fashion such that they require only a quite limited
degree of interaction with the metadata server. The RHEL 7.2 and it's
derivatives are providing experimental support for flexfile layout
type. With this release, dcache starts to issue flexfile layouts if
requested by a client.

#### Add support for the HAProxy proxy protocol

The `ftp`, `xrootd`, `webdav`, `srm`, `httpd`, and `frontend` services
have been extended with support for the HAProxy proxy
protocol. HAProxy or similar load balancers are essential components
of a high availability deployment.

These load balancers act as frontends for redundant services in
dCache. One problem of using such a proxy is that the real IP address
of the client is hidden from dCache, thus obscuring dCache log files
and hindering network based pool selection.

The HAProxy proxy protocol is an adhoc standard supported by many load
balancers and proxy servers. It adds a small header to the connection
between the proxy and the backend service revealing the IP address of
the client to the backend. The new configuration properties
`.enable.proxy-protocol` enable support for this protocol. *Note*:
Once enabled, direct access from client to the respective door must be
blocked as clients would otherwise be able to conceal their real address
to the service.

Check the documentation in the relevant default `.properties` files
for information of which versions of the proxy protocol are supported.


#### New mechanism for determining services to monitor

The `httpd` service - both the old style and the newer `webadmin`
interfaces - monitor other services in dCache. The mechanism for
determining which services to monitor has changed. In the past the
list of services was configured in `httpd`; this has been replaced by
a multi-cast topic. Any service subscribing to this topic will be
monitored and shown in the web interface.


The name of the topic is defined by the property
`dcache.topic.watched`, although there shouldn't be a need to change
this (maybe if one wants to partition the services to be monitored by
multiple `httpd` instances, one could consider introducing multiple
topics, but why one may want to do this eludes me). The important part
is that this is the topic a service should subscribe to if it should
be monitored. By default, `gplazma`, `pnfsmanager`, `poolmanager`,
`spacemanager`, and `srmmanager` subscribe to this topic. Doors and
pools are discovered through other means and are monitored despite not
subscribing to the topic.




#### Production ready support for high availability deployments

As may have been obvious from several of the changes above, lots of
work went into enabling high availability (HA) deployments with
dCache. Some benefits of such a deployment are:

- No single point of failures
- Rolling updates
- Horizontal scaling
- Symmetric deployments

For most parts, there isn't much to configure for an HA deployment as
one can simply deploy several instances of the various services. There
are however several pitfalls, e.g. which databases should be shared
and which should not. Available documentation should be studied
carefully and any deployment should be tested before it is rolled out
on the production system.

Several external components are required for a true HA deployment to
load balance between doors (e.g. HAProxy) and handle HA for PostgreSQL
(repmgr).

Also, there are still a few components that do not handle redundant
deployments well, eg. resilience and replica manager. It may be argued
that redundancy of these components is not essential. 

Controlled draining of services is currently not automated and
requires some knowledge of the inner workings of dCache. Although
support for HA may be production ready, it should currently be
considered an expert feature.



- [alarms: convert log entry handling to use plugin extensions](http://github.com/dcache/dcache/commit/4e58e4c6377cd2ad3575975bef63c935fdd0760f)
- [alarms: force alarms-only-option](http://github.com/dcache/dcache/commit/39306c2e6b0ca019296d6910c9672d6cd3fb6d5b)
- [dcache-restful-api: change protocol to HTTP](http://github.com/dcache/dcache/commit/f356de5326df4de0a473a913f4850609954d210e)
- [dcap: bump max command size sent by client to 8MB](http://github.com/dcache/dcache/commit/5d0825d197d13c0cc18c625e3ebdf023f96491cf)
- [gplazma: Make gplazma.x509.use-policy-principals obsolete](http://github.com/dcache/dcache/commit/b40b8bdc1a16d1eae0ca6ab723bd8484a2aa9b20)
- [mespace/chimera: allow optionally disable move to directory having differnt storage class (and cache class)](http://github.com/dcache/dcache/commit/09abff118fa2a255d77568e213ddf558584f7432)
- [pool: close dcap accepter thread and server socket after client connects](http://github.com/dcache/dcache/commit/135522e3b97a059d021b29a9e07b7445aa7b6e4d)
- [restful-api: add create, move and rename resources](http://github.com/dcache/dcache/commit/91d183227dd04796c197b3edbda83bdcc7dc4a5d)
- [webadmin: remove error and autorefresh options from alarms page](http://github.com/dcache/dcache/commit/3b355d122a16118b9df48571b60e5fd5afd34f78)
- [webdav: add Spnego based Kerberos authentication mechanism for SSO capabilities](http://github.com/dcache/dcache/commit/159c42257703d227583268b59dbd3066ec9570a9)
- [webdav: add cors support for uploading files](http://github.com/dcache/dcache/commit/9969b3b7691f078ed985818b8543a2de5a50a67b)
- [webdav: add support for ownCloud mtime header](http://github.com/dcache/dcache/commit/b3594f06a2dbe3cd0773f185d968a2063cef350a)


### Changelog from 2.16.0 to 3.0

<!-- git log 2.16.0..3.0 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[45fed81](https://github.com/dcache/dcache/commit/45fed81acea1e6e7e565bf9afebd8ff4b4bb7807)
:   srmclient: by default show only CN of owner in 'ls -l' output

[10aa51c](https://github.com/dcache/dcache/commit/10aa51cb3588c5c20ae9838ffa72e41cb24bbea3)
:   resilience: python script for making database changes necessary for migration from old replica manager setup

[12a45fa](https://github.com/dcache/dcache/commit/12a45fa43215ba96781ffc72376621df85bf3908)
:   pool: Reduce lock contention in migration module

[564442e](https://github.com/dcache/dcache/commit/564442eca96c72c34418b25316f17cee6f548ece)
:   srmmanager: Adjust semantics of concurrent upload detection

[90e8d7b](https://github.com/dcache/dcache/commit/90e8d7b99cb7b6496fa57f02385e24b8ccb4da85)
:   spacemanager: Fix shutdown bug causing a file to leak from a reservation

[88ec2b3](https://github.com/dcache/dcache/commit/88ec2b3e27ebb9cfba59e04829322c75999ffdaf)
:   spacemanager: Fixes a message bounce bug

[bd00ac7](https://github.com/dcache/dcache/commit/bd00ac70eadcfa9bd51b53617f61956146bed4ff)
:   srmclient: add SRM call statistics

[4f1d904](https://github.com/dcache/dcache/commit/4f1d904864adad517073363ff1a47c095b34d548)
:   srmclient: update command names in srmfs

[71192e5](https://github.com/dcache/dcache/commit/71192e51db3d415a08448caa23bdb8a08a5e4650)
:   srmclient: fix srmfs 'get permission' command

[25c313e](https://github.com/dcache/dcache/commit/25c313e6e9f858461702778b3ee6eec4af6e588f)
:   srmclient: fix compatibility with Bestman

[951fb06](https://github.com/dcache/dcache/commit/951fb06a1d45efbd240ec055b6db88adadb1312b)
:   srm: Sumbit token less releaseFiles requests to all backends

[0d6e02f](https://github.com/dcache/dcache/commit/0d6e02f2b54bc52b943808a3268aea7f486c8a61)
:   srmmanager: Support upload detection in clustered environments

[28f79b6](https://github.com/dcache/dcache/commit/28f79b6f7fc2c8e74ba57ae643ba95c7b7812666)
:   srm: Redefine the semantics of active upload checks

[e320cee8c](https://github.com/dcache/dcache/commit/e320cee8c915ac80d7433d05373d0d8aad7f79fb)
:   srmmanager: Refactor how various operations handle active transfers

[321a380](https://github.com/dcache/dcache/commit/321a38000945a102f854b9a9c18cfd7bf4c1e6ea)
:   srmclient: probe for SRM endpoint parameters that the user doesn't specify

[2844429](https://github.com/dcache/dcache/commit/2844429bae23b0249d5f06ffca9395e49cd4d43d)
:   Resilience: separate out the data structures for handling storage units from those for pool groups

[ced4286](https://github.com/dcache/dcache/commit/ced428677e86a57ca3fc58dd13a54273d4e50f01)
:   Resilience: Support matching the universal and class default storage unit expressions

[87b5e57](https://github.com/dcache/dcache/commit/87b5e57f4f0165273c67a77808d87c2601c80406)
:   dcap: don't create stack-trace if tunnel fails due to bad client

[ce0b9e3](https://github.com/dcache/dcache/commit/ce0b9e34dc6741da22a4ada2f27fe35feb39dcda)
:   PoolManager : stage protection, fix error in stage.fragment

[26fa950](https://github.com/dcache/dcache/commit/26fa950d6d102c83f51c35cc36b9d0c7bc9da4d0)
:   webdav: fix thrown NPE when CORS is set

[c445044](https://github.com/dcache/dcache/commit/c44504431eb25d4e29b8a09b9c9de264f298ec82)
:   dcap: expose dcap client version limit

[d60ec26](https://github.com/dcache/dcache/commit/d60ec2666bb6c8dcb0c03ce2951edb09eee1ce95)
:   dcap: Register DCAP interpreter as a command listener

[8335057](https://github.com/dcache/dcache/commit/833505725ba98e5b8bfc1b72d57c75ec36118bd0)
:   dcap: fix Kerberos dcap if principal contains a '-'

[fd7b21c](https://github.com/dcache/dcache/commit/fd7b21c3df4483fa353cbbb33b75a736b2296b20)
:   dcap: fix regression in handling old version

[1d14d80](https://github.com/dcache/dcache/commit/1d14d809954c7f0ab36a627664fb363ef82fb297)
:   cells: Fix NPE in location manager

[a1d7b4d](https://github.com/dcache/dcache/commit/a1d7b4d41966de00e6ecae68064bb5ec088b3adb)
:   srmmanager: Add interface to query and abort transfers

[cee5a6a](https://github.com/dcache/dcache/commit/cee5a6a75925801033470e8b84dc590ce8545365)
:   cells: Remove resubmission to event thread in location manager

[5a08279](https://github.com/dcache/dcache/commit/5a082797bb2778aa27ab2eb392fd43bde339b53c)
:   cells: Add safe guards to connector create and process update events

[cc9b845](https://github.com/dcache/dcache/commit/cc9b845cb649db62afa8dbda699017a099d7c542)
:   srmclient: fix 'cd' compatibility with StoRM

[c35fc89](https://github.com/dcache/dcache/commit/c35fc89253468208c45168f2222d440a00b4642e)
:   poolmanager: Log pool name rather than SelectPool object id

[b6855d4](https://github.com/dcache/dcache/commit/b6855d43b7c1fe42d1221275e902641e5c0f663d)
:   pool: Suppress two stack traces in nearline storage handling

[802f2d8](https://github.com/dcache/dcache/commit/802f2d8b5339306446b925345bc3e3e6c43a1acd)
:   srm: Log correct request token in access log

[b75e224](https://github.com/dcache/dcache/commit/b75e224fe84b98e8f8a9dd7f5efd772a75750a9d)
:   httpd: Enable X-Forwarded-For processing in httpd

[4d5eed5](https://github.com/dcache/dcache/commit/4d5eed56f7a3d5209591df664e058d6162313a6f)
:   httpd: Don't insist on using http for unauthenticated webadmin pages

[a671d74](https://github.com/dcache/dcache/commit/a671d74ff78ec34660de6d485587a4a1678da8ef)
:   nfs: allow dCache to start up without DNS

[ad802f8](https://github.com/dcache/dcache/commit/ad802f85aec14b4b8079baff25165fd4d14913c0)
:   srmclient: add initial support for glob expansion

[f7007f1](https://github.com/dcache/dcache/commit/f7007f10e8a6a7184887356c066d7dfb392654b7)
:   billing: fix stacktrace and slow shutdown if in refresh

[1388162](https://github.com/dcache/dcache/commit/13881625794c19c4ea8e1bb06474463384247de7)
:   common: fix alignment of abbreviated byte column in ColumnWriter

[dc23d88](https://github.com/dcache/dcache/commit/dc23d883ee665b7666d9b024fbe07ed8aba0975e)
:   cleaner: Send notifications concurrently

[bb4f08b](https://github.com/dcache/dcache/commit/bb4f08bb0bd8f67294d50d837ddbdc03e0720823)
:   poolmanager,spacemanager: Do not reply to pool manager query replies

[cb41330](https://github.com/dcache/dcache/commit/cb4133066ca64ea9550b7b549fd08f42ed76b476)
:   doors: Allow setting an empty list of login broker tags

[5abed59](https://github.com/dcache/dcache/commit/5abed5917d831e90842f795d61435ebbf12a8700)
:   dcache: Add column to `dcache services` for proxy-protocol

[2072783](https://github.com/dcache/dcache/commit/2072783868433f1a1012e697bc3e6f04a9c65797)
:   srmclient: add additional help text to srmfs

[6b9b5db](https://github.com/dcache/dcache/commit/6b9b5dbc27562b689c06fae66d817bdd76f79d43)
:   common: update ColumnWriter to remove any trailing whitespace

[b661232](https://github.com/dcache/dcache/commit/b66123204174f2e0c639b953748704a4f232064b)
:   spacemanger: Fix interception of PoolAcceptFileMessage

[4031401](https://github.com/dcache/dcache/commit/40314011506ed2015229f5edfcfbdb02272b57fc)
:   xrootd: Upgrade to xrootd4j 3.2.1

[f631308](https://github.com/dcache/dcache/commit/f6313084cc867c7a4ce3637c965c652a3c782995)
:   admin: Send requests to a fully qualified address once connected to a cell

[46e4e17](https://github.com/dcache/dcache/commit/46e4e17a53a91f07cea9bbf0fc5f4e6e60c92b64)
:   webdav: Fix initialization of html template

[39a2bac](https://github.com/dcache/dcache/commit/39a2baceb31d33a718c684b1dc666e4e1bf1f84d)
:   common: do not markup ellipses as a user-value

[a6ad18a](https://github.com/dcache/dcache/commit/a6ad18ab900a1668fb84bedef5f73d3e0b9ad9e3)
:   frontend: reinstate support for truly anonymous access

[b567bc7](https://github.com/dcache/dcache/commit/b567bc7b4c3f6ea6f768d7ad08162f23773df4d4)
:   spacemanager: Propagate PoolManagerHandler errors as is

[b07f800](https://github.com/dcache/dcache/commit/b07f800b7879b265acf9e842f605f373168325e4)
:   dcache: Fix detection of message errors in doors and space manager

[08d69d6](https://github.com/dcache/dcache/commit/08d69d6328380f93a3e5452c64a64f5af8d9ce25)
:   dcache: Fix detection of message errors in poolmanager and admin

[54ba7fe](https://github.com/dcache/dcache/commit/54ba7fe3104575e34063fb29b612c60f26e2d8d5)
:   doors: Ensure that pool selection context survives between retries

[5458eff](https://github.com/dcache/dcache/commit/5458effef4c3d6030c2bc27cd84a446d801ba366)
:   poolmanager: Propagate subscriber failures

[61f6ea2](https://github.com/dcache/dcache/commit/61f6ea2c4d7fcf97eace82a2e776b50a4b481162)
:   cells: Avoid an infinite loop when executing deferred tasks

[494732c](https://github.com/dcache/dcache/commit/494732c08f93c23bce4ff5d42866ef00d20cc33b)
:   cells: Do not add source name when resending a message

[4be45bd](https://github.com/dcache/dcache/commit/4be45bd6a0882adb86db5c94f74dedbe5c90fb72)
:   srmclient: fix checksum mismatch when uploading small files

[7856802](https://github.com/dcache/dcache/commit/785680248fc05ec54534ceca4eb6ab085046ea4a)
:   libs: update to nfs4j-0.13.0

[1f6e347](https://github.com/dcache/dcache/commit/1f6e34794e8c6f20088b6af5dd5d44f13212b721)
:   srmclient: fix srmfs to shutdown cleanly if user issues Ctrl-C

[98fb6f6](https://github.com/dcache/dcache/commit/98fb6f6a0a27463a612b2c99c246c8ad343d7033)
:   srmclient: clean shutdown srmfs after transfer

[d93af74](https://github.com/dcache/dcache/commit/d93af74fd83305d91e13c3d4f9d6bcb1892e782e)
:   srmclient: avoid stack-trace if lcd with incorrect path

[79db347](https://github.com/dcache/dcache/commit/79db3472ecf06e4a1c7fafc929c1f8013584d7f9)
:   Active Transfers: substitute ? for &lt;unknown&gt; on html pages

[881a582](https://github.com/dcache/dcache/commit/881a582aae8a507fddf77662dde13e3ae08701a0)
:   dcache: Fix output of domain ports for 'dcache ports' command

[bffb248](https://github.com/dcache/dcache/commit/bffb2488241242c943d0ea59c79cebf02524b144)
:   dcap,ftp: Allow root path and socket address to be overridden for loginbroker info

[0a40230](https://github.com/dcache/dcache/commit/0a402301c95dbd94121d05ba8fc5d9ea277d2633)
:   cells: Minor optimization to routing manager when processing GetAllDomain requests

[666ddf3](https://github.com/dcache/dcache/commit/666ddf39a1e9025dac083c7cedc7dbd1246d3c48)
:   cells: Kill tunnel earlier in case of IO failures

[f38f906](https://github.com/dcache/dcache/commit/f38f9067c3951b9a8a17a56fdcb150de4b2cd5af)
:   cells: Fix a couple of locking issues in the routing manager

[a274ac8](https://github.com/dcache/dcache/commit/a274ac80a63670783a71ff7e8e5630faf582ff82)
:   cells: Less aggressive use of stack traces on slow cell shutdown

[290517d](https://github.com/dcache/dcache/commit/290517d8a9fd5b87b0d8635fe36e3d53e282b0e2)
:   cells: Fix race between publishing and killing a cell

[603bbce](https://github.com/dcache/dcache/commit/603bbce4c6a4a005df0736d76d27381dbd2f85d4)
:   srmclient: give meaningful error message if credential is missing

[07db10c](https://github.com/dcache/dcache/commit/07db10ce8581ac1a70f17c9db3d952bd60ccee6e)
:   common: add support for UserNamePrincipal as user:&lt;name&gt;

[b063e96](https://github.com/dcache/dcache/commit/b063e96c1126779169e10909931547f4bf6d7102)
:   srmclient: provide better error message if credential has expired

[a49cc50](https://github.com/dcache/dcache/commit/a49cc502b4638d198eb9dbcdd3b758169f7eef19)
:   Added 'explain login' examples to help text in Gplazma2LoginStrategy.java

[3e868c2](https://github.com/dcache/dcache/commit/3e868c2031763e005b4f72092cbf8534711c02b0)
:   info, webadmin: Check for null version

[3f56a0e](https://github.com/dcache/dcache/commit/3f56a0eefd58feb62d3335844e10caeab2857074)
:   httpd,srm,statistics: Parameterize billing service name

[2529275](https://github.com/dcache/dcache/commit/25292750d89d2b35058ec65ee2ea42c29e1dc122)
:   billing: Strip format string from attribute name

[90bc41c](https://github.com/dcache/dcache/commit/90bc41c1ba9e9e4f5e5cb7da9913f137640c357a)
:   transferObserverV1: replace Args with Joiner to construct transfers.txt lines

[67dea34](https://github.com/dcache/dcache/commit/67dea34fb170d715ca5f051c9f2914536df91727)
:   billing: Make billing indexer work with custom format strings

[2b262f6](https://github.com/dcache/dcache/commit/2b262f6c069943392cc6356b6d03000e80966e7a)
:   cells: Fix NPE in unit tests

[99babcd](https://github.com/dcache/dcache/commit/99babcdc6e60aae51e880dc4a108546b0ce74d1c)
:   dcache: update dcache-view version to 1.0.2

[417887f](https://github.com/dcache/dcache/commit/417887f9f5c47fcb6573bda59c1249143640ab4a)
:   Revert "dcache: update dcache-view version"

[4d8d122](https://github.com/dcache/dcache/commit/4d8d1221e2c39821456e4ef2e3c2636f3f6408a0)
:   dcache: update dcache-view version

[e8d6d40](https://github.com/dcache/dcache/commit/e8d6d400798d19c9c539ee831cddfdba58bc5bdc)
:   dcap: add support for clients presenting more version metadata

[7c2fdda](https://github.com/dcache/dcache/commit/7c2fdda9dc0db35c8e7ed15da6791eea2c312445)
:   srmclient: update checkPermissions to be more robust

[5fb5f46](https://github.com/dcache/dcache/commit/5fb5f465e60f1110af80ff3b4d460baabd8fcd79)
:   srmclient: print friendly message on SRMException

[f74b140](https://github.com/dcache/dcache/commit/f74b140a616bf12134b464039a69e3979551acf0)
:   srmclient: update ls to be more robust

[0a50d58](https://github.com/dcache/dcache/commit/0a50d58d7c3185c5631b23c2779c03ad1d016d1d)
:   commons: log bugs with stack-trace and instructions

[46f986c](https://github.com/dcache/dcache/commit/46f986c4ade14477fe1447c63c4088cf1c01ed7c)
:   webdav: support template reloading

[b3594f0](https://github.com/dcache/dcache/commit/b3594f06a2dbe3cd0773f185d968a2063cef350a)
:   webdav: add support for ownCloud mtime header

[8ade134](https://github.com/dcache/dcache/commit/8ade13437f5ca8b82d88a76bc8f526c9dfacb006)
:   gplazma2-xacml: remove erroneous creation of placeholder extensions

[91d1832](https://github.com/dcache/dcache/commit/91d183227dd04796c197b3edbda83bdcc7dc4a5d)
:   restful-api: add create, move and rename resources

[a63ae6a](https://github.com/dcache/dcache/commit/a63ae6a00ebf66221bb911b89c69e74ffb8a7856)
:   cells: add event logging on cell lifecycle events

[8aff852](https://github.com/dcache/dcache/commit/8aff8524e0fbfb9ec5c1c3e3075cfcf65c163795)
:   srm: remove trailing dot from reverse lookup result

[00d782e](https://github.com/dcache/dcache/commit/00d782e879d61fadd814b0135d22928b567bef93)
:   ftp: add support for SRM cancelling an active upload

[9969b3b](https://github.com/dcache/dcache/commit/9969b3b7691f078ed985818b8543a2de5a50a67b)
:   webdav: add cors support for uploading files

[c5aa25e](https://github.com/dcache/dcache/commit/c5aa25e91c8771ae1d3cce854edc545ba954d4ac)
:   srmclient: fix async stat command

[88a9fcf](https://github.com/dcache/dcache/commit/88a9fcf36ab69794f238a5284588fb679bd20e54)
:   srmclient: implement useful subset of local filesystem commands

[03cca24](https://github.com/dcache/dcache/commit/03cca243d4f8557f6895fe5c0e18e8160cf1d6c4)
:   srmclient: fix error message for ls

[7ce53ee](https://github.com/dcache/dcache/commit/7ce53ee079f826f914d9cb0f926481f6990a1303)
:   srmclient: refrain from adding default port to SURL in srmcp

[9f084d5](https://github.com/dcache/dcache/commit/9f084d5c5bcecc872677150dbfae5208569be26f)
:   namespace: fix permissions of auto-generated directories

[032f833](https://github.com/dcache/dcache/commit/032f833c2a9481855fe262c5b1d3b9619168e02d)
:   cells: New wire and payload protocols for cell message

[61d5753](https://github.com/dcache/dcache/commit/61d575313055703d13088b40d50ad0647e0d946a)
:   cells: Minor paranoia refactoring in shutdown

[f6cdc1f](https://github.com/dcache/dcache/commit/f6cdc1f1ddd53793df30394ca7411ce8226952f1)
:   cells: Deliver cell events from the cell event thread

[3b2ca6f](https://github.com/dcache/dcache/commit/3b2ca6f8406bc6f3979159ab2d4584a0ec4a0fee)
:   poolmanager: Stop adjusting pool cost

[4a70ec1](https://github.com/dcache/dcache/commit/4a70ec140a774b85d2bbf16a0277cb3a276d9fef)
:   poolmanager: Define assumptions on pool selection

[354aa1a](https://github.com/dcache/dcache/commit/354aa1a37c5a5b442f14a3cd57a154d104c566fe)
:   pool: Add infrastructure for pool assumptions

[095f1f5](https://github.com/dcache/dcache/commit/095f1f5ae494335c355c6f0ac80d38a9b395a65c)
:   cells: Stop ZooKeeper recipies in stopping rather than stopped

[6f89203](https://github.com/dcache/dcache/commit/6f892035e463a9bdbed1031fddb10293eba7dad7)
:   poolmanager: Delay zookeeper publication of pool manager

[0d0ea8f](https://github.com/dcache/dcache/commit/0d0ea8f3f4454370ae86856b393b5958f17358ac)
:   cells: Minor cleaning of location manager

[c0ac545](https://github.com/dcache/dcache/commit/c0ac545f7355db83a7f0fc866c2534c27845a27e)
:   srmclient: fix -debug mode

[05d3b56](https://github.com/dcache/dcache/commit/05d3b56ff8bb2a89b7d2dae732d032b294ac8c59)
:   srmclient: support SIGKILL

[03afafa](https://github.com/dcache/dcache/commit/03afafa15b8b54a2b5b49f30a14dd9e8a1210e60)
:   cells: Guarantee event order for cell even listeners

[d5f1fdb](https://github.com/dcache/dcache/commit/d5f1fdb00e66a45a037e33cef4ee8986333a9c65)
:   cells: Remove race in routing manager

[2e9e81c](https://github.com/dcache/dcache/commit/2e9e81c88eec2c08c9e56792b68fcd555e2c644e)
:   poolmanager: do not use string concatenation with logging

[e3503f4](https://github.com/dcache/dcache/commit/e3503f4ef205002382eeae12a9f16ec1743b3227)
:   replicamanager: Fix race during shutdown

[54b3a9c](https://github.com/dcache/dcache/commit/54b3a9c553005957f5b119e57f487312ca56cb59)
:   cells: Fix lost interrupt exception

[bd87c3d](https://github.com/dcache/dcache/commit/bd87c3de71eb3fe065bebc47f4aab7ab548fb277)
:   cells: Ensure that newly created threads are non-daemon normal priority threads

[ff53756](https://github.com/dcache/dcache/commit/ff537569e2a2f0ecaeecd11f17e4f6f981221f4e)
:   webdav: fix Unauthorized vs Forbidden response

[70f6602](https://github.com/dcache/dcache/commit/70f66028dd5fe16363cd65069414c5fe7d3727c1)
:   pom: Update third party dependencies

[ef0aaa1](https://github.com/dcache/dcache/commit/ef0aaa1a13611c24f89805637db1daaaea6558b0)
:   doors: Fix a minor race in LoginBrokerPublisher

[6d43a76](https://github.com/dcache/dcache/commit/6d43a767375748dbc279e604343cf546d2273ca2)
:   dcache: Fix more cells that do not shut down cleanly

[5809df2](https://github.com/dcache/dcache/commit/5809df2cc423ebd0556a3dad61a07fed2c2b9601)
:   cells: Add remote domain to NDC of location manager tunnel

[e96c0b2](https://github.com/dcache/dcache/commit/e96c0b22905f676b93c400e79cfa24affac05c6f)
:   cells: Increase timeout on tunnel shutdown

[ebfb1bc](https://github.com/dcache/dcache/commit/ebfb1bca95454398f0fc5d1f5cac2730f45ba686)
:   cells: Propagate startup failures to caller

[1509b2b](https://github.com/dcache/dcache/commit/1509b2b6d0e1bfba7f155ff261de533318f406b5)
:   cells: Fix race when adding routes

[e0b1195](https://github.com/dcache/dcache/commit/e0b11957e6b213175cfa6791dee970ad335b2a51)
:   cells: Remove delayed default route if tunnel shuts down

[c6358e3](https://github.com/dcache/dcache/commit/c6358e3d7a3b48500a9751ab4fddf257d68d04f9)
:   cells: Fix race in cell shutdown

[bf563f9](https://github.com/dcache/dcache/commit/bf563f9d8c11f327ba1e7b57cea63fea9e4d56ce)
:   srmclient: add support in srmfs for uploading and downloading files

[799698c](https://github.com/dcache/dcache/commit/799698cb6493719f8ceb71277962df927719001a)
:   poolmanager: Log errors in subscriber

[9f9bcfa](https://github.com/dcache/dcache/commit/9f9bcfacce60ad45d64a36833a710359aaf20254)
:   spacemanager: Revert decision to only import link groups in leader

[d0c3536](https://github.com/dcache/dcache/commit/d0c35361e5b3a8d378f3496cf269cb088c70651e)
:   dcache: Generate proper exit code for check-config command

[a474a77](https://github.com/dcache/dcache/commit/a474a77ee177ddb29f1649feb85b1c2e63d68051)
:   spacemanager: Fix SpaceManagerHandler#toString

[0806d87](https://github.com/dcache/dcache/commit/0806d879175acef23ad8f848ddba785135e6d2e7)
:   doors: Prevent PoolMgrGetUpdateHandler storm on shutdown

[077d1e5](https://github.com/dcache/dcache/commit/077d1e5598dbe383c70f477f38faec1640b47620)
:   pool: Drop pretend limit on p2p client queue

[3348726](https://github.com/dcache/dcache/commit/3348726f05578b0406d6ed4d3eb992e804f992d2)
:   poolmanager: Improve stability of cost cuts

[53d185b](https://github.com/dcache/dcache/commit/53d185b7531ba347109fde239bbe94c4a2e87dc1)
:   cells: Refactor interaction between LocationManager and LoginManager

[71796a5](https://github.com/dcache/dcache/commit/71796a5c0e7f861a4019df9ea6d28ceb12961bba)
:   cells: Fix potential deadlock in login manager shutdown

[3a251fd](https://github.com/dcache/dcache/commit/3a251fdc427416befb8b98e7784cfdcfa47d9f45)
:   cells: Fix regression in shutdown timeout

[a064ba9](https://github.com/dcache/dcache/commit/a064ba90a41c2a19c155b826d0a1217081b7917c)
:   srm: support configuring job expiry checking period

[cc806ed](https://github.com/dcache/dcache/commit/cc806ed16fd98bc496d460b4bdc94bfdb708d38b)
:   gplazma2-ldap: add embedded jdap server for unit testing

[05f327a](https://github.com/dcache/dcache/commit/05f327a3160857716b55305442346a86e4f191c7)
:   nfs4: autodiscover nfsv4 domain used by idmapper

[2fe6e94](https://github.com/dcache/dcache/commit/2fe6e945bc644dcb8ccd02a298355b3f9a27ab99)
:   commons: fix Args string parsing and toString method

[355fc08](https://github.com/dcache/dcache/commit/355fc086fa9537efb94897e85ed856615225032a)
:   pool: ReplicaStoreCache updated to describe inner ReplicaStore

[c08f8fe](https://github.com/dcache/dcache/commit/c08f8fe37e6aa44f2446f58c744c380a339d8e79)
:   vehicles: use FileAttributes when creating namespace entries

[366182b](https://github.com/dcache/dcache/commit/366182bffc8fbee454745a820f23e50afe4ae453)
:   Change version to 3.0.0-SNAPSHOT

[4fefd4d](https://github.com/dcache/dcache/commit/4fefd4d794bf6b82a4b2793187da93b635ebe4b4)
:   chimera: update postgres driver to recognize alpha/beta/rc builds

[9582a71](https://github.com/dcache/dcache/commit/9582a7107c5a56ff533d93cf120f0f1c6c9ba8f8)
:   ceph: make configurable rados pool name

[459ddce](https://github.com/dcache/dcache/commit/459ddceb57fd74bbbcc065e97fbe4e2d87421bf3)
:   dcap: use String.getBytes(UTF_8) to generate error reply

[d509d77](https://github.com/dcache/dcache/commit/d509d7734224993ae63c5fe26bb0320622abce0e)
:   ceph: use object's xattrs to store files creation and atime/mtime

[d56eee2](https://github.com/dcache/dcache/commit/d56eee290930c6c96b5a1c5f23081d9d8d620f24)
:   doors: Include IO queue in pool selection request

[a29ba61](https://github.com/dcache/dcache/commit/a29ba61b15bcceb887c2b03da14e1e385c8ee143)
:   ceph: cleanly close rados connection on pool shutdown

[5609c21](https://github.com/dcache/dcache/commit/5609c21e0f3b4be5aa4b0a0973d58284f48776ce)
:   ceph: use RadosClusterInfo to provide total and available sizes

[cc48200](https://github.com/dcache/dcache/commit/cc4820052628fdc70e1283b77fd6db9d92aff159)
:   ceph: use PoolInfo to check repository status

[59a0995](https://github.com/dcache/dcache/commit/59a0995336105c846ba6544ba5ff0b64b85f6958)
:   pool: added CEPH back-ended FileStore implementation

[5636347](https://github.com/dcache/dcache/commit/56363473cd37e9a1324d8c3c6bdec61bd0b248dc)
:   nfs: addresses returned to client must match clients address 'type'

[8a8a2ab](https://github.com/dcache/dcache/commit/8a8a2abc648f99f519b420d04d07119d41b81422)
:   nfs: add support for flexfile layout type

[a48496b](https://github.com/dcache/dcache/commit/a48496b47b1a360fb3c86bf3b920b35aad4aa205)
:   srm-manager: explain cancellation of upload

[e5068a1](https://github.com/dcache/dcache/commit/e5068a1a89a1e93f53437b57addcbf143b77ac94)
:   ftp: Fix unit test regression

[7bd0848](https://github.com/dcache/dcache/commit/7bd08481e46be05ec2a77e3a44efce44482d7eac)
:   cells: Drop some dead code

[c9d3b2c](https://github.com/dcache/dcache/commit/c9d3b2c94005aecb024c28d6d02ba2dbf12bff12)
:   cells: Add context information to connector cell

[bede5c8](https://github.com/dcache/dcache/commit/bede5c8dd1b7309aaf17f006462dca2fdba311ef)
:   cells: Let tunnel shut down wait for its processing thread to terminate

[182a655](https://github.com/dcache/dcache/commit/182a655f873eb356ff991cce71a32ebcc318cbc3)
:   cells: Add default methods to CellEventListener interface

[78db8cf](https://github.com/dcache/dcache/commit/78db8cf9762c3eb6ea7cd64d92cabe4b77c5e118)
:   pool: Make inner class of PoolCostInfo static

[7727b28](https://github.com/dcache/dcache/commit/7727b2828c1fa49cf32b863def2ad7170a2cab58)
:   pools: Drop legacy field in PoolCostInfo

[9854e5d](https://github.com/dcache/dcache/commit/9854e5d6924992d087edd8637daf10f10d2ff612)
:   ftp: Add support for the HAProxy Proxy Protocol

[4a8bc29](https://github.com/dcache/dcache/commit/4a8bc2939f04d480c77c722053ae72628d51b5ff)
:   ftp: Port FTP door to Netty

[9f59b05](https://github.com/dcache/dcache/commit/9f59b051d5582a158bb1ca4d452e1e715845038c)
:   cells: Decouple StreamEngine from LoginManager

[c8a1a38](https://github.com/dcache/dcache/commit/c8a1a38d27274bc3e05fbf2ad3ee1c04b026a109)
:   xrootd: Add support for the HAProxy Proxy Protocol

[6c76922](https://github.com/dcache/dcache/commit/6c7692258c8e378f284ccb479d65f48211618b91)
:   xrootd,pool: Upgrade to Netty 4.1

[b0e85c6](https://github.com/dcache/dcache/commit/b0e85c63ee9e608175c2f1d1b4cfc26f764aabc9)
:   webdav: optimise directory creation

[f0918e2](https://github.com/dcache/dcache/commit/f0918e2cbb55c6410524a0d9679890f9afe51ce1)
:   vehicles: add fluent and single-item construction to FileAttributes

[6612716](https://github.com/dcache/dcache/commit/66127161810dca9836e9145c290ce059f2339cd9)
:   cells: Fix more shutdown bugs and reject send with callback on shutdown

[2b0cbb4](https://github.com/dcache/dcache/commit/2b0cbb4ba46986ba4eddf6fc030ebb1f48b809a4)
:   cells: Use ConcurrentHashMap for callback objects

[f509447](https://github.com/dcache/dcache/commit/f509447b990a022b2017bc6b37926750799cdefb)
:   pool: Ensure that post transfer service shuts down before repository

[135522e](https://github.com/dcache/dcache/commit/135522e3b97a059d021b29a9e07b7445aa7b6e4d)
:   pool: close dcap accepter thread and server socket after client connects

[5679b20](https://github.com/dcache/dcache/commit/5679b208e90f24c4c0f32e187b0b708d79f109a7)
:   pool: allow sort output of 'mover ls' by access time and size

[26a2bd7](https://github.com/dcache/dcache/commit/26a2bd7d88b5444f7c35042aeba0b6d959ffda8d)
:   poolmanager,spacemanager: Do not log delivery failure of PoolMgrGetUpdatedHandler

[04c5a8c](https://github.com/dcache/dcache/commit/04c5a8c138df8177631a7caa716e4b0ce741f0d8)
:   cells: Fix regression in message ID in replies

[c5770fd](https://github.com/dcache/dcache/commit/c5770fd54f52ccf9f9a397830e2d8e9eb5b0023d)
:   cells: Fix several shutdown related problems

[e7323a0](https://github.com/dcache/dcache/commit/e7323a05327808c20d58b3639e763b6dd843bcce)
:   dcache-webadmin: synchronize client-side filtering with server-side selection of rows on pages using picnet table filters

[71034aa](https://github.com/dcache/dcache/commit/71034aaa796d1637de04143ffdb6175c09a6e719)
:   dcache-webadmin: disable saving table filter settings to browser cookies

[c8bc39d](https://github.com/dcache/dcache/commit/c8bc39dadabf82cdc05bde26d07da332b9cae3b1)
:   dcache-webadmin: disable AJAX autorefresh on pages using picnet table filter library

[dea1764](https://github.com/dcache/dcache/commit/dea17649349faf48086d1f58578182ddf672dc25)
:   namespace: support querying information about deleted objects

[7318a65](https://github.com/dcache/dcache/commit/7318a65f1398a0f1bd205002ab69af178fee0947)
:   doors: include explanation when killing mover

[249cb99](https://github.com/dcache/dcache/commit/249cb9927e8ef909ae1951d7156d7a4b1bacc689)
:   namespace: add nlink as an attribute

[f4e5691](https://github.com/dcache/dcache/commit/f4e5691a5144f502cdb9e735d68a013818a5d9e4)
:   pool: explain why a mover was killed

[ac50167](https://github.com/dcache/dcache/commit/ac50167d713d8991c4393de3a38208631b38f5d3)
:   alarms: reset count history on reopened alarm

[1eec7f5](https://github.com/dcache/dcache/commit/1eec7f572b729b2bcd41b7fb80a1a56a26720248)
:   pool: Resolved circular bean dependencies leading to bugs during shutdown

[eb31c0e](https://github.com/dcache/dcache/commit/eb31c0e2b0e0aa857cbf2c5c9597d811deadd1da)
:   cells: Lowered log level of failure to deliver delivery failure notifications

[bb4ddd1](https://github.com/dcache/dcache/commit/bb4ddd170c3752bca5ab7b187f3630d8a37f3471)
:   cells: Bind pre-removal notification to beforeStop lifecycle callback

[d16926e](https://github.com/dcache/dcache/commit/d16926e6c7b83a70c7c207984db32db2c47c7a70)
:   doors: Announce to login broker subscribers when a door is shutting down

[83c62ca](https://github.com/dcache/dcache/commit/83c62cab5a8ee32a41b5c6e4dd6a82d866992f14)
:   cells: Log killer threads too when cell shutdown is slow

[4a2f978](https://github.com/dcache/dcache/commit/4a2f9789b89b690a1498d4d1ffa783ca380036b0)
:   cells: Log when cells have to interrupt threads to shut them down

[f2b6b24](https://github.com/dcache/dcache/commit/f2b6b24f4dcfabba38d5139987b2079774d3b999)
:   doors: Abort transfer if file is deleted during pool selection

[ef5ff6a](https://github.com/dcache/dcache/commit/ef5ff6abb9d141a9181fa5864fb6e246e7833a2d)
:   chimera: Fix IllegalStateException in inode cache

[02c5b8b](https://github.com/dcache/dcache/commit/02c5b8b57d9e41fa33cdba7c9375294e8b741cd0)
:   poolmanager: Fix shutdown regression

[9d7493d](https://github.com/dcache/dcache/commit/9d7493d6ecf517cfb8844364faf9bc567956efb7)
:   cells: Add pre removal callback

[9f7752a](https://github.com/dcache/dcache/commit/9f7752a3bebfc00735f9800ba27b217a3b514b85)
:   cells: Ensure sequential execution of lifecycle callbacks

[42d8ccf](https://github.com/dcache/dcache/commit/42d8ccf6dca961df154d60efa13505e3b6243575)
:   cells: Guard shutdown of setup manager against partial initialization

[9285483](https://github.com/dcache/dcache/commit/928548332d148454ba684160f4f717d01a76ae42)
:   poolmanager: Fix design flaw in PoolManagerHandler implementations

[98f293f](https://github.com/dcache/dcache/commit/98f293fefb53f5ba40ec6ce4756f196aca985825)
:   cells: Expose SendFlag to suppress addition of a source path

[759a897](https://github.com/dcache/dcache/commit/759a8974b628afd0b570d1d5b042be3b594aad5f)
:   cells: Fix problem with duplicate entries in source path

[b43a705](https://github.com/dcache/dcache/commit/b43a7059fac47aa3b94d76059d1fef69dcb6816e)
:   Enable automatic detection of Postgresql master

[2c8ee66](https://github.com/dcache/dcache/commit/2c8ee66e6ea405926dc9bc91f200300735c574b4)
:   webdav,frontend: Drop support for https-jglobus

[5593c87](https://github.com/dcache/dcache/commit/5593c87cebc2e2335cf9baa19ee4b561891e9892)
:   webdav,frontend,httpd: Add proxy protocol support

[e69b0fa](https://github.com/dcache/dcache/commit/e69b0facb0dc0262c8fc3d370675390771936df6)
:   dcache: Extend CanlConnectorFactoryBean to also support plain connectors

[285a673](https://github.com/dcache/dcache/commit/285a673e0af0cfbc71847ca33bc309fd4294a4c0)
:   nfs: Upgrade nfs4j

[bbc5ea0](https://github.com/dcache/dcache/commit/bbc5ea0090f85901284132b2e3e9da7de0af81b2)
:   srm: make out-of-date historic data deletion more robust

[dffe01a](https://github.com/dcache/dcache/commit/dffe01a8b3189e6bd4dde48894daf70cb47cda34)
:   srm: Add support for the proxy protocol

[740f863](https://github.com/dcache/dcache/commit/740f86374f5429409a1fb3e7a0eb640a5e2bebcb)
:   cells: Do not call shutdown from message thread

[65a044f](https://github.com/dcache/dcache/commit/65a044f811f6d252b5ae0b3d798c9d547b0ee580)
:   xrootd: Remove serialization compatibility with pre 2.11 domains

[6e240c2](https://github.com/dcache/dcache/commit/6e240c28c6b8fcc744ebe3aadad80b1349c57d1d)
:   dcache-vehicles: Remove serialization compatibility with pre 2.15 domains

[16907b5](https://github.com/dcache/dcache/commit/16907b52d05acbd683e95165f253bdb3bd01611a)
:   dcache-vehicles: Remove serialization compatibility with pre-2.12 domains

[f8b06aa](https://github.com/dcache/dcache/commit/f8b06aa029e186393d2de2ddaf7b76a3ce0a6e78)
:   cells: Remove serialization compatibility with pre-2.16 domains

[c919c99](https://github.com/dcache/dcache/commit/c919c99159be5c3290600488daab83ad4e23c529)
:   pnfsmanager: Remove support for legacy pools

[2e255bb](https://github.com/dcache/dcache/commit/2e255bb5ff4bba432e84bfbf04cfd40fe2eaf7a2)
:   cells: Drop support for legacy route updates

[73d67b8](https://github.com/dcache/dcache/commit/73d67b87b9683214bbcdfea1d73bc27475c7e6f2)
:   billing: Make service replicable

[b5974a8](https://github.com/dcache/dcache/commit/b5974a8117fa4eaa81ca5846557c76d02e19db9f)
:   webadmin: Use topic to discover services to watch

[92b22f7](https://github.com/dcache/dcache/commit/92b22f794d80e1a7b295286e1e8ecaff152a1d8a)
:   httpd: Introduce topic for discovering services to monitor

[2a3e401](https://github.com/dcache/dcache/commit/2a3e40165ed9934fb58531eafb5a0b8d9f464a54)
:   zookeeper: avoid one race in shutdown

[ac036b4](https://github.com/dcache/dcache/commit/ac036b40d7fe23622ae23b6e41cef24be2663e17)
:   zookeeper: work-around slow shutdown of SessionTrackerImpl

[d3f34ae](https://github.com/dcache/dcache/commit/d3f34ae30a8e2e762c590267e5a3cfec38594640)
:   webadmin: silence warning about future change in wicket

[1ee61f9](https://github.com/dcache/dcache/commit/1ee61f9cb486ebe855c71a6738385b4cd6d2e19c)
:   poolmanager: Reduce risk of pool manager handler update during shutdown

[ee85984](https://github.com/dcache/dcache/commit/ee859847cb5add84f84290df193e7ef10e5b353e)
:   billing: Optimize regular expressions of billing parser

[b56ea8c](https://github.com/dcache/dcache/commit/b56ea8c2a9dbcb60d9f5b247d21151b08218d882)
:   billing: Minor optimizations to path prefix computation

[4f68ccb](https://github.com/dcache/dcache/commit/4f68ccb9ba8655a608b7aa15e36d37302d4a2f79)
:   billing: Extend billing parser to recognize formatting headers

[d9f086b](https://github.com/dcache/dcache/commit/d9f086b3c09b56c8f5c2d14f2973c764fe8e4ef8)
:   billing: Let ParallelizingLineProcessor consider comments as barriers

[aa74739](https://github.com/dcache/dcache/commit/aa747393f70b2440847c4a8d4c6eec6c3191b4e8)
:   pool: Adjust JavaDoc of ReplicaStore

[dd1f493](https://github.com/dcache/dcache/commit/dd1f4932c5d61ffa8889af31ef230faf4c5a673a)
:   billing: Make billing text files self describing with format headers

[1755681](https://github.com/dcache/dcache/commit/17556819468a3c40f0a99eff00d064aaa3c0fcab)
:   billing: Do not log record if format string is empty or undefined

[8601227](https://github.com/dcache/dcache/commit/860122710279ef7444822b6dc4554e2a3f3f74e1)
:   billing: Harmonize representation of cell name

[86dd4fe](https://github.com/dcache/dcache/commit/86dd4fece833a7f999d344b5460398c8e5cd90eb)
:   cells: Prepare to change representation of unqualified cell addresses

[92788e9](https://github.com/dcache/dcache/commit/92788e9103a8b4ed9ffc4d88706479ee371e79d9)
:   cells: Fix IllegalArgumentException when reversing a terminal cell path

[618c3b6](https://github.com/dcache/dcache/commit/618c3b6909191c54218a32aeb7529e4b708c3ea0)
:   cells: Fix RejectedExecutionException during shutdown

[2954441](https://github.com/dcache/dcache/commit/2954441c367a2ccc147b9602d31e14d0c4147b75)
:   billing: Removing erroneous stack trace output

[a2fd0be](https://github.com/dcache/dcache/commit/a2fd0be43648e5a9c3415220456c1b50ccdfd000)
:   billing: Wrap cellName attribute to allow access to the cell and domain components

[a81dec3](https://github.com/dcache/dcache/commit/a81dec3a23c0efeb1827df66913fbb77bc101eb2)
:   xrootd: add support for oss.asize on upload

[e74520d](https://github.com/dcache/dcache/commit/e74520d891af8a3cf3c7f86b4ad5ee23c5a22e6c)
:   xrootd: add per-application io-queue

[06a8baa](https://github.com/dcache/dcache/commit/06a8baa0dc948c57db5e44d8178b8666bef0707e)
:   pool: update FileStore interface to handle all back-end specific operations

[7d558ae](https://github.com/dcache/dcache/commit/7d558aeef5b7ac87ab39af746764f961512fca35)
:   ftp: improve compatibility with Apache Commons FtpClient

[7951b59](https://github.com/dcache/dcache/commit/7951b59309885436c8877a505e93cc614661d1a8)
:   srm: refactor container status update and readying turls

[ed44be4](https://github.com/dcache/dcache/commit/ed44be40a408db62df8440278ba9021dd509f847)
:   dcache-restful-api/pinmanager: modify  current QoS fom disk+tape to tape

[bd52f0a](https://github.com/dcache/dcache/commit/bd52f0ab88775e6bc277910b64105a310f07302a)
:   pool: Adjust failure semantics for empty client uploads

[410c9d7](https://github.com/dcache/dcache/commit/410c9d7217113e8b62282f47c6b23564db8e68c4)
:   dcache-nearline-spi: Add @since tags for newly added features

[07090fc](https://github.com/dcache/dcache/commit/07090fc4a1f1eb591a0607001bcedf1ba4b1ab15)
:   nfs: Fix pool manager subscriber startup

[798b7b6](https://github.com/dcache/dcache/commit/798b7b62d9caf815bded45a874c82d1e57b8fdf1)
:   chimera,nfs: avoid byte -> string -> byte conversions

[4e58e4c](https://github.com/dcache/dcache/commit/4e58e4c6377cd2ad3575975bef63c935fdd0760f)
:   alarms: convert log entry handling to use plugin extensions

[f8fcd31](https://github.com/dcache/dcache/commit/f8fcd311e08a825c514040b53e0aa07da94b3bbb)
:   pom: Update 3rd party dependencies

[27c8720](https://github.com/dcache/dcache/commit/27c8720e153785e312b5aff98b98b6bb796bec82)
:   srm: Include session identifier in error message when srmRm aborts an upload

[e2ff948](https://github.com/dcache/dcache/commit/e2ff948310d8bb965df2ccbdc99402706f4533ce)
:   dcache: IntelliJ code inspection refactoring

[e3d552b](https://github.com/dcache/dcache/commit/e3d552bc6b9ec5d4e3812d1b9b7b5ffd3a0e7312)
:   chimera: IntelliJ refactoring

[c27dcdf](https://github.com/dcache/dcache/commit/c27dcdf23762bc9d124ae9e8b5d517af3e489c41)
:   common-security,dcache-vehicles: IntelliJ refactoring

[4d132b0](https://github.com/dcache/dcache/commit/4d132b0d15f3a5703370cd1c903ae2262bb4a05f)
:   common: Various automated refactoring

[6b66b04](https://github.com/dcache/dcache/commit/6b66b04de1e5158af3a43d2f83b865401374210d)
:   cells: More semi automatic refactoring

[c7c5286](https://github.com/dcache/dcache/commit/c7c52860a0848cd84307bbef409f6934fabb78d7)
:   cells: Various automatic refactoring to clean up the code

[aa0bcb9](https://github.com/dcache/dcache/commit/aa0bcb94d72454cd7b989e65523397bc4d8b548e)
:   cells: Reduce reliance on AbstractCellComponent

[76cde04](https://github.com/dcache/dcache/commit/76cde04b0d3fb63eb3fffe3ab66c8ef8f2c505b8)
:   billing: Expose property to subscribe to topics

[bc33cdd](https://github.com/dcache/dcache/commit/bc33cddad4a12b9274bfd5e0cc94ff43435946f2)
:   dcache-nearline-spi: Move AbstractBlockingNearlineStorage to dcache-nearline-spi

[c1b2f5a](https://github.com/dcache/dcache/commit/c1b2f5a68af9b085dd05eb2757fed431793a6178)
:   cells: IOException is not a bug in create command

[4e1ce03](https://github.com/dcache/dcache/commit/4e1ce030894db560d3dfca1a3af4ba6dd9fb93e4)
:   cells: update CellMessage to work with initially empty messages

[f90ced0](https://github.com/dcache/dcache/commit/f90ced010b58e9a4f99ed80b2ad77bc16ffe975b)
:   transfermanager: fix querying of 3rd-party transfer

[8e449b6](https://github.com/dcache/dcache/commit/8e449b6ccd0099fb78e8464196f7e0e2c1f46d05)
:   pool: fix hsm unset command

[3f074dc](https://github.com/dcache/dcache/commit/3f074dc354c6bc3d87c5637a85a7bdb5e7935ebd)
:   doors: enforce restriction in all PnfsManager operations

[1390c0c](https://github.com/dcache/dcache/commit/1390c0c13472376a10997d7e757567bc6cd8f3b2)
:   srm: remove 'priority' support

[818b04b](https://github.com/dcache/dcache/commit/818b04ba1c7918cdbf9ed557cdd26f6472c8c3fe)
:   common: include filename in error message

[7f280f6](https://github.com/dcache/dcache/commit/7f280f60fcab370853e9c0fdc57489b6ab900d9c)
:   srmclient: do not rely on -f option of readlink

[8f472c0](https://github.com/dcache/dcache/commit/8f472c0ca6d1ee259df322d2b56b08181af008dc)
:   spacemanager: Refine errors sent on shutdown

[2de19e3](https://github.com/dcache/dcache/commit/2de19e3bc98bad2f324e0bd424fcb8d5d5da85d5)
:   poolmanager: Make pool manager replicable

[0b94ca0](https://github.com/dcache/dcache/commit/0b94ca041c657858cef2cb0e24d27e03a5ec2de7)
:   doors: Update doors to use PoolManagerHandler

[c68b781](https://github.com/dcache/dcache/commit/c68b78162c6a96f8d7bd5f082a7bf2d09ed8785b)
:   Upgrade to CANL 2.1 and BC 1.50

[73969aa](https://github.com/dcache/dcache/commit/73969aa5c84fd9faee92928704cdf2c226d01d5d)
:   scripts: update canonicalising function

[3b355d1](https://github.com/dcache/dcache/commit/3b355d122a16118b9df48571b60e5fd5afd34f78)
:   webadmin: remove error and autorefresh options from alarms page

[39306c2](https://github.com/dcache/dcache/commit/39306c2e6b0ca019296d6910c9672d6cd3fb6d5b)
:   alarms: force alarms-only-option

[0d6e9ab](https://github.com/dcache/dcache/commit/0d6e9ab4a888711eaf6b28630066736131011289)
:   dcache: Add framework for dynamic pool manager handlers

[7bcf592](https://github.com/dcache/dcache/commit/7bcf59280d79e019806072aafff9083142a39738)
:   poolmanager: Fix incorrect correction of pool cost

[a4ab7ed](https://github.com/dcache/dcache/commit/a4ab7ed2ccfad4ac8a90136a4575a885c2a3cda7)
:   dcap: Factor out configuration option parsing

[1a60fc0](https://github.com/dcache/dcache/commit/1a60fc09dfdb840d22b4147c7562d610857dbd7e)
:   dcap: Port DCAP door to the LineBasedDoor

[d4fb646](https://github.com/dcache/dcache/commit/d4fb646e1396f9fd991ed073541b114302bfc76a)
:   cells: handle empty string pool value on staging in TransferObserver

[ca19923](https://github.com/dcache/dcache/commit/ca199231933344fcab11646491a6639b9db5b2ab)
:   dcache: Move components of line based doors to dcache-core

[a266f9f](https://github.com/dcache/dcache/commit/a266f9f4ddfebfba59de623b41df51132ee3db5e)
:   cells: Refactor message forwarding logic

[5919c92](https://github.com/dcache/dcache/commit/5919c928a4d3a468862ce7e2e74e8806d5851c33)
:   cells: Retry RETRY_ON_NO_ROUTE_TO_CELL messages when a route is added

[731cf8d](https://github.com/dcache/dcache/commit/731cf8d2c445083ee97282d1168f4f0ea1cf55e0)
:   cells: Expose SendFlag in CellStub

[a90151e](https://github.com/dcache/dcache/commit/a90151e5c48177d2af0ecd572d14339b1f796f42)
:   cells: Add SendFlag parameter to CellEndpoint#sendMessage

[b482c56](https://github.com/dcache/dcache/commit/b482c562a3e84a0f08d96bb1b92e37675867b3ff)
:   dcache: Refactor message forward logic

[3f8cca5](https://github.com/dcache/dcache/commit/3f8cca5f51c29977d2bd9748e826b2d929105793)
:   pool: include the original IOException info DiskErrorCacheException

[e9bf69e](https://github.com/dcache/dcache/commit/e9bf69ead6c4b4a6c10fe444d957221605f8429c)
:   cells: Extend CellLifeCycleAware with setup change notification

[43c757c](https://github.com/dcache/dcache/commit/43c757c105732fb3ff7d5ed30a2411de8f3f74fa)
:   cells: Separate setup notifications from setup providers

[73846b1](https://github.com/dcache/dcache/commit/73846b1e3780c1a5638a66191223d96f13588065)
:   poolmanager: Persist pool manager setup in ZooKeeper

[16e72bc](https://github.com/dcache/dcache/commit/16e72bc4d0a678cc0bfa356b2ffca6a6ffeeb26a)
:   dcache: Allow UniversalSpringCell to persist setup in zookeeper

[d76e7d9](https://github.com/dcache/dcache/commit/d76e7d9a7977ccd1ce2f6f82f0152ef9a82217fd)
:   poolmanager: Persist pool read only status in setup file

[2e58fb2](https://github.com/dcache/dcache/commit/2e58fb2041130b70027f7b8414dddbb5157e89e1)
:   cells: Drop support for the setup manager

[adb5c04](https://github.com/dcache/dcache/commit/adb5c04c42d31f709b37f15bfe877ddafabc2ec0)
:   cells: Check setup file syntax before applying it to the running cell

[0254bf4](https://github.com/dcache/dcache/commit/0254bf4477e569a753d770dde83037f1ae6721ef)
:   alarms: add ndc info to alarm info

[25a125d](https://github.com/dcache/dcache/commit/25a125d47f46ef1b43bb7d17c9b39c547c3fd887)
:   resilience: fix alarm log level

[2baf078](https://github.com/dcache/dcache/commit/2baf078d9337f95ccf528f780c051242b7e80660)
:   packages/dcache-view: depolyment of dcache-view through nexus

[f356de5](https://github.com/dcache/dcache/commit/f356de5326df4de0a473a913f4850609954d210e)
:   dcache-restful-api: change protocol to HTTP

[e388703](https://github.com/dcache/dcache/commit/e3887032adf7b212d5b8ce74685c8761aee91bf2)
:   dcache-restful-api: RestfulAPI for QoS(CDMI) CHANGE current QoS for the specified file

[46d091d](https://github.com/dcache/dcache/commit/46d091d47f976955d85415cbd022c4db4f1580ec)
:   dcache-restful-api: RestfulAPI for QoS(CDMI) CHANGE current QoS for the specified file

[574cf49](https://github.com/dcache/dcache/commit/574cf496afec0ffc66dff89378f27d806c07ddaa)
:   dcache-nearline-plugin-archetype: Include correct service loader definition

[5d0825d](https://github.com/dcache/dcache/commit/5d0825d197d13c0cc18c625e3ebdf023f96491cf)
:   dcap: bump max command size sent by client to 8MB

[4a57c27](https://github.com/dcache/dcache/commit/4a57c27e1d21839a2866a0ac68980805c8de3117)
:   frontend/dcache-restful-api: remove www-authenticate header

[874661c](https://github.com/dcache/dcache/commit/874661c787f1dc02f8e49d95a5968580ddf151a8)
:   gplazma2-argus: Update to Argus client 2.2.0 to fix dependency on VOMS library

[9b23e68](https://github.com/dcache/dcache/commit/9b23e689acce0b9b46c9f0b3df495b02a9e3b553)
:   util: expose timestamp when the instance of Transfer is created

[09abff1](https://github.com/dcache/dcache/commit/09abff118fa2a255d77568e213ddf558584f7432)
:   mespace/chimera: allow optionally disable move to directory having differnt storage class (and cache class)

[2cd391f](https://github.com/dcache/dcache/commit/2cd391fdd9cf98f9c4fd6d0c8ac6c5fc40f42f53)
:   pom: use project.version instead of derived dcache.version

[767cf92](https://github.com/dcache/dcache/commit/767cf9260a2431a9d5b35dc586512b6923fa6f10)
:   cells: Introduce annotation to flag setup affecting commands

[d9316fd](https://github.com/dcache/dcache/commit/d9316fd6996063ae651d9e51d062622e25adb4a6)
:   cells: Preserve CommandThrowableException

[f113664](https://github.com/dcache/dcache/commit/f113664bff511ae1cb39240075d1831ea8708820)
:   cells: Add default methods to CellInfoProvider and CellLifecycleAware

[11720e4](https://github.com/dcache/dcache/commit/11720e41ce1012e1140c0e69374e0fbf83b28bfb)
:   pool: Cancel permanent migration jobs when reload pool setup file

[d12ce81](https://github.com/dcache/dcache/commit/d12ce817e74e9a4c35ac3c354fb4b8d7b618d7bc)
:   pool: Allow runtime mover queue management

[2fdbaf3](https://github.com/dcache/dcache/commit/2fdbaf39c2bda7039f24031fdc70f1c6fbbfe84d)
:   dcache-restful-api: fix data type for cdmi_geographic_placement

[5a5ed28](https://github.com/dcache/dcache/commit/5a5ed28f209332197a9efd341349ac6271b10a0f)
:   dcache-restful-api: RestfulAPI for QoS(CDMI) get current QoS for the specified file

[e8f091b](https://github.com/dcache/dcache/commit/e8f091b22e7eeb54b4d8b4e60400520dcf89efe9)
:   dcache-restful-api: RestfulAPI for QoS(CDMI)

[f433881](https://github.com/dcache/dcache/commit/f4338810627e505ebf9c3fe6e2adc59d245f69a7)
:   srm: add hint to escape IDs

[f4ad20b](https://github.com/dcache/dcache/commit/f4ad20be8272bedfd3e27feb04d0fb4ae9d178c4)
:   archetype: Add archetype for creating nearline storage plugins

[e71d9af](https://github.com/dcache/dcache/commit/e71d9afdcb56aaec13ed62c723aae6c7c0cc0c92)
:   poolmanager: Fix compilation regression

[9f991f4](https://github.com/dcache/dcache/commit/9f991f46dc1b0c4d94e1eeb63b125eaabcf51963)
:   nfs: Fix race condition in transfer startup

[ab358ba](https://github.com/dcache/dcache/commit/ab358bac3892a6ac171c81a40e4984281c4bc706)
:   poolmanager: Remove dead functionality from cost module

[2dcc9cb](https://github.com/dcache/dcache/commit/2dcc9cb7c40e7bd4cea00a30c849561f83e609b7)
:   pool: Port hsm commands to annotated command structure

[c434601](https://github.com/dcache/dcache/commit/c4346018a2a6a8696e311b81579cf73fc401cba4)
:   common-cli: Refactor allowAnyOption flag

[94af2f9](https://github.com/dcache/dcache/commit/94af2f903ed1dd4c57ea070770e2a11e26c9485a)
:   pool: Remove deprecated nearline concurrency limit commands

[b9f9c8c](https://github.com/dcache/dcache/commit/b9f9c8c1623be3b64d35b97938a3ce18966bbae4)
:   common-cli: Fix compatibility with Java 7

[a97221d](https://github.com/dcache/dcache/commit/a97221d736c2669a0be4bfe3834df3cd04fdd984)
:   cells: Minor refactoring of command interpreters

[87a0046](https://github.com/dcache/dcache/commit/87a0046b59c532c956859e1f9a125bf59113684f)
:   SrmShell.java: changed 'rx-' to 'r-x'

[83f0bff](https://github.com/dcache/dcache/commit/83f0bffe681a3901b96ca846d43a2a820905c4c2)
:   SrmShell.java: changed 'rw--' to 'rw-' in case TPermissionMode._RW

[5dcfbfb](https://github.com/dcache/dcache/commit/5dcfbfbb9821b304a7857ad378fe65917f38a45e)
:   info: fix broken unit-test

[b20cc35](https://github.com/dcache/dcache/commit/b20cc35d073d2a9a5bc6e35d70f7ab7c72dca401)
:   srm: Resolve message thead blocking issues with SRM third party copy

[197009c](https://github.com/dcache/dcache/commit/197009c7e471d369f23472706ff3aefa9507269d)
:   restful-api: make exception and error handling resful

[5473084](https://github.com/dcache/dcache/commit/547308408b240abbf03361b95b9c7bcf0c67688e)
:   pool: Fix compilation error

[12ab3b1](https://github.com/dcache/dcache/commit/12ab3b1486244a288224393607c69fc4e91d0f64)
:   spacemanager: Work around for doors resubmitting PoolAcceptFileMessage

[5a9db09](https://github.com/dcache/dcache/commit/5a9db09c1609abddb99711c32b6a8ce7e7b1dfd3)
:   pool: Rename repository and store related classes

[d1fab17](https://github.com/dcache/dcache/commit/d1fab177046cbeb97fdb8fe71bea8f6403ce3628)
:   pool: Eliminate thread in mover scheduler

[923fbe5](https://github.com/dcache/dcache/commit/923fbe5a150f95472ae054340cd211dfdf887c6f)
:   pool: Refactor BerkeleyDB meta data store to enable reuse

[dc45cb7](https://github.com/dcache/dcache/commit/dc45cb72e986c9211f732970ac9bf3f024150afc)
:   pool: Expose URI rather than File to NearlineStorage implementations

[8ebdb0d](https://github.com/dcache/dcache/commit/8ebdb0dfa96d1e9680a8cd045ec4f730a095adb3)
:   pool: Refactor MetaDataStore and FileStore to use Path rather than File

[f91e92a](https://github.com/dcache/dcache/commit/f91e92ac93a359cc402bef4f8f1b1fc0dc511802)
:   pool: Avoid direct file access in post processing

[6282e3e](https://github.com/dcache/dcache/commit/6282e3ede95eba24bbf3f64c2ce439de01c44b70)
:   pool: Extend script driver for polling scripts

[b8f961d](https://github.com/dcache/dcache/commit/b8f961d804f02f3517ea1df47b3d31012f841817)
:   vehicles: remove unused constructors

[30f36d0](https://github.com/dcache/dcache/commit/30f36d03fa7e2519ca83e42320557ec850e1b815)
:   cells: Propagate CommandExceptions as is on cell startup

[c246de6](https://github.com/dcache/dcache/commit/c246de6cefbe63633ec6f0e972672b33e19dadae)
:   pool: Fix several race conditions in migration module

[ca6c531](https://github.com/dcache/dcache/commit/ca6c53119f6a4d12421936e016b40544d86f54c8)
:   pool: Fix regression in mover set max active command

[9b7b679](https://github.com/dcache/dcache/commit/9b7b6799633216c114bc42627c0f086f272187d6)
:   pool: Fix mover leak

[c03c489](https://github.com/dcache/dcache/commit/c03c4893c7f6a055e68bf2c0e6783123dc9de782)
:   pool: Fix synchronization regression in jtm

[856f126](https://github.com/dcache/dcache/commit/856f126632aef74a114d7bddd19461376b101a08)
:   pool: Decouple checksum module from checksum scanner

[4deb002](https://github.com/dcache/dcache/commit/4deb0025107e747a020e0b7935a6f87240065936)
:   poolmanager: Move selection unit commands back into the selection unit

[d20dc63](https://github.com/dcache/dcache/commit/d20dc636ff3bc5bd4161e8abbf2345f128b9d459)
:   poolmanager: Drop resilience decorator of pool selection unit

[a6ed2e8](https://github.com/dcache/dcache/commit/a6ed2e8f99564f89f9b925bff0d7cd29a22d8f33)
:   pool: Let CellSetupProviders use setter injection

[94c738f](https://github.com/dcache/dcache/commit/94c738fd719a889d45a95068e1270c6202976ef5)
:   cell: Only implement CellSetupProvider if needed

[f2f35f1](https://github.com/dcache/dcache/commit/f2f35f131916e576034d1c8d4e26a384c562f148)
:   dcache: Isolate setup file processing from primary cells command interpreter

[de9fbf6](https://github.com/dcache/dcache/commit/de9fbf696656032b176248d28cf16f8fcc55b14a)
:   pool: Make RepositoryChannel extend SeekableByteChannel

[2f24b07](https://github.com/dcache/dcache/commit/2f24b071ce8f3eee721acb1ef671a8153a980217)
:   pool: Make checksum calculation independent of file system backend

[79138be](https://github.com/dcache/dcache/commit/79138be2e1e3d1a901878158b89f588e885b6489)
:   pool: Refactor handling of replica size in the repository

[4a7a21d](https://github.com/dcache/dcache/commit/4a7a21dd65906c0e9dc523e8de3abe629fab831b)
:   pool: Reduce number of stat calls in Bekeley DB backend

[40a06c1](https://github.com/dcache/dcache/commit/40a06c148e4738889a98a668549e8048f2cf0d7f)
:   pool: avoid NPE when querying status of a 3rd-party HTTP transfer

[c8cf229](https://github.com/dcache/dcache/commit/c8cf22989e412089cbda8944015dad369a7e494d)
:   resilience: finish the renaming of 'pnfs(id) operation' to 'file operation'

[077e8ec](https://github.com/dcache/dcache/commit/077e8ec2bbae066da30c2e5a8309e618b85281d8)
:   resilience: eliminate unnecessary update calls and fix synchronization of file op registration

[776c0f9](https://github.com/dcache/dcache/commit/776c0f91532b6675a59d891bfca68682f3a50d33)
:   resilience: repair (subtle) bug in target selection

[e2790b0](https://github.com/dcache/dcache/commit/e2790b07b2dbc955eba997cb733eaa3f1af5251f)
:   resilience: fix error in file operation updating

[99d74a9](https://github.com/dcache/dcache/commit/99d74a9b688e386d2b7a147d5ad5e0a418b8a566)
:   resilience: fix the way removal of a pool from a resilient group is handled

[63bf4f7](https://github.com/dcache/dcache/commit/63bf4f76cbaf290cd1174114f3ec47d7a5036db2)
:   resilience: fix several related bugs in transition checking when scheduling scans

[3f88a0a](https://github.com/dcache/dcache/commit/3f88a0a17a634d386fe41f2226016ff9ad485664)
:   resilience: remove restriction on storage unit linkage

[7114a15](https://github.com/dcache/dcache/commit/7114a15eca41d84836ac7b3fde3186822f1d24a5)
:   resilience: remove pool from operation table when it has been removed from a resilient group

[2e75f75](https://github.com/dcache/dcache/commit/2e75f7510b40acdde9ce6d86096a5167a0af8339)
:   resilience: allow file consumer to propagate Exception

[96abb3d](https://github.com/dcache/dcache/commit/96abb3d3f0a279e07032f7455981e63c2e9329ab)
:   httpd: change condition from numeric inequality to non-null check on TransferInfo value

[8c2b57f](https://github.com/dcache/dcache/commit/8c2b57f18c5c12169ba316e8f62aa2ed208be56a)
:   poolmanager.properties: mentioned creation of .bak file

[239ab6c](https://github.com/dcache/dcache/commit/239ab6c304f7f0665b89aa10828a278e856b5d4b)
:   alarms: fix NPE in type setter

[871e828](https://github.com/dcache/dcache/commit/871e82846fee94f237324d3d429f710943bd174e)
:   src: change literal package strings to org.dcache.util

[eca97e9](https://github.com/dcache/dcache/commit/eca97e9606bc0a77294929ac7874b5c56b5ffae0)
:   chimera: update unit-test to log ChimeraFsExceptions

[2ef6d44](https://github.com/dcache/dcache/commit/2ef6d449966eac872503caa0560b4a3a71e0f3fa)
:   src: consolidate org.dcache.commons.util, org.dcache.utils and  org.dcache.util

[ca60c87](https://github.com/dcache/dcache/commit/ca60c8761f674893c455da47d6dc1c8f122a7033)
:   admin: Deprecate DSA keys

[c43acae](https://github.com/dcache/dcache/commit/c43acae48323d29879ae3f6231068996736c1893)
:   pool: Transactional bulk update meta data state in Berkeley DB

[17575e4](https://github.com/dcache/dcache/commit/17575e44cd0f38c044df83332169ca505ccd5ad1)
:   pool: Eliminate MetaDataStore#copy method

[13a1c7a](https://github.com/dcache/dcache/commit/13a1c7aac39fafb690ed0d74ae4be6f984af98d0)
:   pool: Fix bug that disables pools on non-critical errors

[1ab5e5c](https://github.com/dcache/dcache/commit/1ab5e5cb90c83d3a35761140e81ea229ec91061f)
:   webdav: avoid NPE if client fails to send a User-Agent header

[472acb6](https://github.com/dcache/dcache/commit/472acb6a9a6c4345a907fd5302ea860173211b9d)
:   pool: use a single ByteBuffer when calculating the checksum of a hole

[7650505](https://github.com/dcache/dcache/commit/7650505cf4ae285addea5d0cffe6d26d041fed02)
:   chimera: avoid extra byte array creation during inode2bytes conversion

[e4f1b42](https://github.com/dcache/dcache/commit/e4f1b42cdf1a057ae51cb978f9572c29294425b5)
:   cells: Allow local delivery of messages through queue routes

[d3d5fc2](https://github.com/dcache/dcache/commit/d3d5fc2a42ca812c9ef70217a68d107b2abe213c)
:   zookeeper: avoid race in creating log directories

[08ee55b](https://github.com/dcache/dcache/commit/08ee55bfe42d5af4e3feb1055c97a4ba7fd58c3a)
:   cells: Improve indentation of help text

[b1a9edd](https://github.com/dcache/dcache/commit/b1a9edd440ebec18fc30822274a9fdb72b21957c)
:   Make FsPath Serializable

[3a943ef](https://github.com/dcache/dcache/commit/3a943efd68c0bee6e83377a6cc0dfb1cd0a2053e)
:   pool: Port remaining rep commands to annotated command framework

[5fc92a6](https://github.com/dcache/dcache/commit/5fc92a66dd8783e3e8bf1e00dd56874395ac18fb)
:   pool: Port list commands to new command structure

[af43905](https://github.com/dcache/dcache/commit/af43905ab69ec7043b8f7add51382a35b78347f6)
:   build: add code-coverage reports

[9830f2d](https://github.com/dcache/dcache/commit/9830f2d28c741136e82771ae5702af9d6d9985d7)
:   pool: Eliminate MetaDataRecord#touch

[7d600c5](https://github.com/dcache/dcache/commit/7d600c54a5b9b558ee46bf6992558f3b5e6b3b5b)
:   pool: Refactor meta data store interface to allow bulk updates

[39c05d1](https://github.com/dcache/dcache/commit/39c05d1fa2411f25ea2eb7c8142777aeb31675c4)
:   pool: Refactor IllegalTranstionException hierarchy

[259a34a](https://github.com/dcache/dcache/commit/259a34abc4691076f62399308337aaf849d0d623)
:   pool: Refactor callback executor for flush queues

[9e9a2ab](https://github.com/dcache/dcache/commit/9e9a2abec6d5fe169eb06b5bcfb5c62b1caa7538)
:   cells: Fix local delivery to queues

[7e0baec](https://github.com/dcache/dcache/commit/7e0baec7bfd6c26c2ff549b6b0b7098d2c4d5074)
:   pool: Report file in transient state as locked when setting sticky flag

[92fbe53](https://github.com/dcache/dcache/commit/92fbe53f16b302c91c88d2da22301d868eabfa44)
:   admin: Fix compatibility with OpenSSH 7

[219b970](https://github.com/dcache/dcache/commit/219b9700ac429a9d3ce4bd86202b94ed50c19457)
:   pool: Fix documentation error for -storage option of rep ls command

[5180b99](https://github.com/dcache/dcache/commit/5180b992f585278c1c54b532d49c0327eb30d8e8)
:   script: Do not claim success if meta data conversion failed

[942cca1](https://github.com/dcache/dcache/commit/942cca1feaa680d39ce2c5c0cdd7062780d0aded)
:   frontend: add support for user 'anonymous'

[a8d9592](https://github.com/dcache/dcache/commit/a8d9592fb768d1606f92cfce123131794a7d6b41)
:   httpd: check for null Subject in Transfer info

[dd15a13](https://github.com/dcache/dcache/commit/dd15a13ee24ea00d9eae397fdd2878bc3734efec)
:   resilience: fix incomplete behavior for pools intentionally marked "excluded"

[291dbb1](https://github.com/dcache/dcache/commit/291dbb10aa229863519797d2b88805705f879873)
:   admin: refactor login strategy

[1dbfbe5](https://github.com/dcache/dcache/commit/1dbfbe5a8e09da9d7e86d3c75d50c0fce5b0fa25)
:   webdav: fix bean creation in webdav.xml for spnego handler

[b21b4b4](https://github.com/dcache/dcache/commit/b21b4b45016c738f8ed0ec6c65c8b410a8880da7)
:   frontend: always fail request if wrong credentials are presented

[159c422](https://github.com/dcache/dcache/commit/159c42257703d227583268b59dbd3066ec9570a9)
:   webdav: add Spnego based Kerberos authentication mechanism for SSO capabilities

[7b770bc](https://github.com/dcache/dcache/commit/7b770bced8c87384cb05082483f69ffe29f0d3cf)
:   common: add ByteUnit enum and ByteUnits utility class

[e461d40](https://github.com/dcache/dcache/commit/e461d408adea551858e9f426d1e6ee6fa6b21d71)
:   restful: add ability to discover information about current user

[070a543](https://github.com/dcache/dcache/commit/070a543ae612f80d66eeeb4ae4744365f848fb19)
:   srm: enrich access log

[c93dc6c](https://github.com/dcache/dcache/commit/c93dc6cc2d21c4aad9aa09df4e22ab83fbd9148f)
:   resilience: simplify code for handling resilience requests on pools

[d154a5f](https://github.com/dcache/dcache/commit/d154a5fdb721d4d17cbe711c0aca53ebf37a33d3)
:   resilience: fix classification of file incomplete and other errors

[73bb943](https://github.com/dcache/dcache/commit/73bb943c989b2bd93e36b5b5d8362db26478e852)
:   pool: Don't use transient error for a broken file

[78ee625](https://github.com/dcache/dcache/commit/78ee625dbd0d4893af6eb6036e2f81c0394a6a2e)
:   admin: Drop old ssh 1 keys

[85811a2](https://github.com/dcache/dcache/commit/85811a2303115e3ff60efc1bfc714c68bdb2fc06)
:   pool: Add error codes to p2p failures

[61ee15f](https://github.com/dcache/dcache/commit/61ee15f577515fcd95848285083d4caeadcb282d)
:   pool: Make final state update after upload atomic

[586e62f](https://github.com/dcache/dcache/commit/586e62f60fb94fe30d5fc11080da6fe6357f3711)
:   pool: Lower log level of certain failures to create mover

[56fb782](https://github.com/dcache/dcache/commit/56fb782d5bc75b218ae55112bd49def78829cedf)
:   chimera-nfs: fix broken commit 4682fd3

[4682fd3](https://github.com/dcache/dcache/commit/4682fd3b77e122815f6eb4a208f24f8dc99b7a5e)
:   chimera: move byte <=> FsInode conversion into nfs specific part

[e5a0042](https://github.com/dcache/dcache/commit/e5a00425abc41e6feda3278aa98ddc811498bd84)
:   pool: fix staging for CopyNearlineStorage

[b34c3de](https://github.com/dcache/dcache/commit/b34c3de750d23b15a1abe6291403772f2c74118d)
:   REST-api: fix permission denied.

[8b1d1e1](https://github.com/dcache/dcache/commit/8b1d1e1784305a4af53c23622df0631253dfdd53)
:   frontend: remove prompt login onloading dCacheView

[e717ffe](https://github.com/dcache/dcache/commit/e717ffe42a1ebb804425bea58e96b98bb2de9b66)
:   resilience: add checked location selection exception

[8ddded0](https://github.com/dcache/dcache/commit/8ddded0b6dd829587bec3c4ed48ae054858a0e23)
:   resilience: fail when source retry is requested with only one possible source

[6f3dfc7](https://github.com/dcache/dcache/commit/6f3dfc7950888740f618e4a1f70f53dc1285be09)
:   pools: restore correct command names

[12eeda4](https://github.com/dcache/dcache/commit/12eeda4bdc98ba665b7e90635b12b928fc4d8eca)
:   pool: Add open flush mode

[b40b8bd](https://github.com/dcache/dcache/commit/b40b8bdc1a16d1eae0ca6ab723bd8484a2aa9b20)
:   gplazma: Make gplazma.x509.use-policy-principals obsolete

[ddfdbd0](https://github.com/dcache/dcache/commit/ddfdbd0d49657dc9ac3a7039c9baca5999acfdfe)
:   cells: Drop legacy cells communication

[459680d](https://github.com/dcache/dcache/commit/459680da7cb95dd5496e8da9106c4090a10aa18c)
:   Mark deprecated properties obsolete

[0d2f9c0](https://github.com/dcache/dcache/commit/0d2f9c06875e2232c192e269e165cc109b5d4ee3)
:   webdav: Fix error reporting when client is unauthorized

[61d13ef](https://github.com/dcache/dcache/commit/61d13ef39c81009693a32a450f0e8edb1356bc7f)
:   srm: Fix job expiration during service startup

[a7860b3](https://github.com/dcache/dcache/commit/a7860b37e654e488a426eca1aa41e5ea13ef4659)
:   pool: Minor refactoring of flush classes

[887b4d3](https://github.com/dcache/dcache/commit/887b4d339374589fa6054f53f162d756e8e6dd97)
:   Remove deprecated code

[abdae03](https://github.com/dcache/dcache/commit/abdae030555286716ebad6f13ce5c33bbc756bb6)
:   system-test: Enable automatic schema management for replicamanager

[b9792c7](https://github.com/dcache/dcache/commit/b9792c79d193ed5b9739c7223a9d801dd1836703)
:   billing: use in-memory buffer for hourly aggregate data

[13a009b](https://github.com/dcache/dcache/commit/13a009ba27262d0115e01c870b4e585986983699)
:   webdav: make links relative in standard template

[95b114e](https://github.com/dcache/dcache/commit/95b114ef2f650e668fc1e0273e7d7de5b9272dbc)
:   billing : fix issue wih HSQLDB backend

[d790aa8](https://github.com/dcache/dcache/commit/d790aa84b97ef48ab46b586c6b6b921ca4a2a217)
:   gplazma: don't generate a stack-trace if htaccess is malformed

[ff48c27](https://github.com/dcache/dcache/commit/ff48c27bdf2580ce1ae5087bc9ba93d8560237f8)
:   pool: Fix race in pool initialization

[62fd200](https://github.com/dcache/dcache/commit/62fd2004f8c942e50ca64dc20e4d07a7e223fb1b)
:   Revert "srmmanager: Enable multiple instances to share a database"

[7deb9f0](https://github.com/dcache/dcache/commit/7deb9f0a8e52dd680d33e13f9180b26d4e135f2f)
:   system-test: Fix Linux compatibility for populate script

[43e7ad0](https://github.com/dcache/dcache/commit/43e7ad0ae3e898298848bb4e82068f867369cb03)
:   system-test: Fix regression in populate script

[86c8c32](https://github.com/dcache/dcache/commit/86c8c322cc1e9b260333519e99e73602e23ed97e)
:   pool: Close stores after use in meta data utilities

[2900cf9](https://github.com/dcache/dcache/commit/2900cf9dc7d29289c61bd0981c63016cb456ef15)
:   Revert "pool: Close stores after use in meta data utilities"

[504e37f](https://github.com/dcache/dcache/commit/504e37fb13de86d353775e724cf31bed0d1911ac)
:   pool: Close stores after use in meta data utilities

[cc2eb79](https://github.com/dcache/dcache/commit/cc2eb798560574699ed24492315fc8e0d4a05ee7)
:   pool: Fix regressions in meta data utilities

[0d10b6d](https://github.com/dcache/dcache/commit/0d10b6d6281edeb7c08e8ca761372889552c5763)
:   system-test: Speed up liquibase update

[74f0917](https://github.com/dcache/dcache/commit/74f09171b7125f04cc3c12d651a57d995864a572)
:   Disable OCSP by default

[ec6df2f](https://github.com/dcache/dcache/commit/ec6df2f9489b4e0adc75da8b51b768908be30229)
:   srm: Fix listing of completed list requests

[8e4253d](https://github.com/dcache/dcache/commit/8e4253dd3c85bbee77dc7302e0f9af0666302554)
:   billing: re-implement population of aggregate tables

[97290f6](https://github.com/dcache/dcache/commit/97290f606c5090a38b84d61069adf2a8b4c291da)
:   dcache restful-api: adjust the response header

[6cf3f95](https://github.com/dcache/dcache/commit/6cf3f9566be94eba40f6e9c495dd859e6e2e51f7)
:   billing: Fix NoClassDefFoundError when invoking dcache billing command

[5b92ef4](https://github.com/dcache/dcache/commit/5b92ef434694a86b2a69f89185f5ae326d60d0a8)
:   httpd: Fail gracefully in case of missing options

[870a5b7](https://github.com/dcache/dcache/commit/870a5b7aac7f6fa54ee3badc6ea15ef77cdd8d7e)
:   httpd: Update cell info view for named queues and make srmmanager monitored

[2072541](https://github.com/dcache/dcache/commit/20725411a7f80e23ef69256be83d121201c35e59)
:   cells: Suppress RejectedExecutionException on shutdown

[93c223e](https://github.com/dcache/dcache/commit/93c223ed030ceb0aa768d156a4bbfade8b12ae96)
:   cells: Fix NPE during shutdown

[a09a461](https://github.com/dcache/dcache/commit/a09a461c98b9eebbeaa3b5e3046a623623bf98ff)
:   gplazma: Add PrefixRestriction and use it to validate root and upload paths

[1b7fb03](https://github.com/dcache/dcache/commit/1b7fb03ba50b26447dc336940144feb536f460ea)
:   zookeeper: Document ports used by embedded zookeeper

[f748eba](https://github.com/dcache/dcache/commit/f748eba241ea6f316b10ee8fdf3d8985b6c87543)
:   ftp: Fix regression in resolving path

[a31c5cd](https://github.com/dcache/dcache/commit/a31c5cdf862deaaf14b1e5d8910339efc3ea1a4a)
:   frontend: Expose dCacheView configuration in dCache configuration

[89be067](https://github.com/dcache/dcache/commit/89be067283805263096a251616e173e8b2259296)
:   zookeeper: Add automatic purging of old snapshots

[6623081](https://github.com/dcache/dcache/commit/6623081fa27009ccd6bc63d0d6b60cb608606143)
:   Remove example.org values from configuration defaults

[e63d821](https://github.com/dcache/dcache/commit/e63d821579a5e0adf355625c24ccfc787decb26e)
:   dCacheView: new end-user web interface for dCache

[f47224c](https://github.com/dcache/dcache/commit/f47224c6dd361648fc2577dfad8089fc8f4131a4)
:   api: Rename service to frontend

[1aa3afd](https://github.com/dcache/dcache/commit/1aa3afd3dcbe3ef564e4061a37e6fc0b359a577c)
:   api: Move rest API to separate service

[8cd3d3e](https://github.com/dcache/dcache/commit/8cd3d3e8aafd835b6d15c465a90ec6c578c51835)
:   billing: fix issue with database change rollback

[370fc72](https://github.com/dcache/dcache/commit/370fc72b60b44691e340511fa09bd05c24c520ad)
:   src: remove unused class AbstractNameSpaceProvider

[f7511cb](https://github.com/dcache/dcache/commit/f7511cbf0280dc840cc2923bd9de779635c66070)
:   srmmanager: Make scheduler ID configurable and compatible with older versions

[2f6abfd](https://github.com/dcache/dcache/commit/2f6abfd0305e01c3cac9e74248439c17adfc5164)
:   pool: Upgrade to Berkeley DB Java Edition 6.4.25

[b81732d](https://github.com/dcache/dcache/commit/b81732d96e95c7d79a2571c748f7f0871801301f)
:   httpd: restore original fields and format to the TransferObserverV1 ascii output

[d8ab725](https://github.com/dcache/dcache/commit/d8ab725f5cfb231fc4d27146aefd0b01d74b80e9)
:   [maven-release-plugin] prepare for next development iteration


</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
