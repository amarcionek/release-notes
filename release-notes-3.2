HTML header: <title>dCache 3.2 Release Notes</title>
             <!--#include virtual="/template/default-head.shtml" -->
             <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
             <!-- Bootstrap -->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
                   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"/>
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
                   integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"/>
             <!--link type="text/css" rel="stylesheet" href="jquery.tocify.css" /-->
             <style type="text/css">
             h5 {
                 font-size: 15px;
                 font-style: italic;
                 margin-top: 20px;
             }
             body {
                 padding-top: 20px;
             }
             @media (max-width: 767px) {
                 #toc {
                     position: relative;
                     width: 100%;
                     margin: 0px 0px 20px 0px;
                 }
             }
             @media print {
                 #toc {
                     display: none;
                 }
             }
             </style>

<div class="container">
<div id="banner">
   <div id="bird_large">
      <img src="/images/dcache-banner.png" class="bird"></img>
   </div>
   <div id="sidebar-b">
      <span class="dcache-nav-bar">
      <a href="/index.shtml">home</a>
      |
      <a href="/news.shtml">news</a>
      |
      <a href="/manuals/index.shtml">documentation</a>
      |
      <a href="/downloads/IAgree.shtml">downloads</a>
      |
      <a href="/feedback.shtml">feedback</a>
      |
      <a href="/manuals/googlesearch.shtml">search</a>
      |
      <a href="/imprint.shtml">imprint&#160;</a>
      </span>
   </div>
</div>
<div id="content">

<div class="row">

<div class="page-header">
<h1>What's new in dCache 3.2<br/>
<small>Release notes</small></h1>
</div>

## Highlights

In terms of security and access management, dCache 3.2.0 offers several significant new
features. This release introduces TLS encryption for domain communication, which will greatly 
facilitate setting up large distributed instances with WAN interconnections. On the 
client-visible side, macaroons can now be used as a means for detailed access control. 
And on a more admin-oriented level, the newly-introduced concept of roles makes privilege
management easier and facilitates the delegation of tasks to trusted users.

From an administrative perspective, perhaps the most outstanding change is the switch 
to systemd-compatible scripts on Debian systems.


## Incompatibilities

- Classic replica manager is no longer supported.
- Uses systemd only on Debian-derived systems if available.
- The admin door limits key-based login to the usernames listed in the `authorized_keys2` file.
- The output of the `ps` admin command has changed. External scripts must be updated.
- The `dcache.broker.port` property is deprecated.
- The `srmmanager.net.port` and `srmmanager.net.local-hosts` are no longer used.
- Upgrading nodes running `frontend`, `webdav` or  `httpd` to version 3.2.7 (or newer) requires upgrading
nodes  running `poolmanager`  at least  to 3.2.7 (or newer) version.

## Acknowledgments

Once again, we are pleased to have received contributions by several people who are not
members of our core team.

We would like to thank Ivan Kadochnikov for his patches to xrootd. 

For the first time, dCache was used in teaching a software development course 
at a university. We would like to thank the students of HTW Berlin who 
participated, and especially Fritz Heiden, Vuong Luu Minh, 
Stefan Moll, Lotta Rüger, Robin Wenzel, Yannick Vahldieck, Alena Schemmert, 
Marisa Nest, Martin Bürger, Sarah Schulte, Hasan Jahid and Max Patzelt, whose 
code made it into 3.2.0.

## Differences from dCache v3.1

The notes for [release 3.2.0](#release3.2.0) detail the differences
from dCache 3.1.  Please read this section *very carefully* when
upgrading from this version.


## Release 3.2.39

### ftp

The current release provides better protection against leaking proxy/data TCP sockets if client
aborts a proxied transfer.

Leaking server sockets were observed when a client aborted a proxied transfers
with kafka enabled. This is now fixed and No further server sockets leaked when a proxy is being used, kafka
notification is enabled, and the client aborts the transfer

### srm

Clients that use the gridsite protocol, such as davix, can now delegate
their credential.


### Changelog 3.2.38..3.2.39

<!-- git log 3.2.38..3.2.39 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[db287b9](https://github.com/dcache/dcache/commit/db287b9494732fb2033a7b4fd1ff6b95cd8d7640)
:   [maven-release-plugin] prepare release 3.2.39

[06d5bfe](https://github.com/dcache/dcache/commit/06d5bfe431ff137f9fe5e0682e80078240c75365)
:   ftp: make shutdown more robust

[1f83d3b](https://github.com/dcache/dcache/commit/1f83d3b0dd3ddf3410278b62f5d5cda25c075eb8)
:   common: fix bug in CountingHistogram index computation

[3dc7e59](https://github.com/dcache/dcache/commit/3dc7e5936cf17afc7b1e0cdb4d9326803e94bec6)
:   [maven-release-plugin] prepare for next development iteration

[e4d22d3](https://github.com/dcache/dcache/commit/e4d22d3452a64e4e8aed4b26502734fb15fa257f)
:   srm: gridsite fix querying validity of delegated credential

## Release 3.2.38

### ftp

The performance markers that dCache sends back to the client in FTP transfers
are now more robust against bugs.

### nfs

When transient errors in pools cause NFS transfers to have to wait and retry,
the system's behaviour is now more robust and no StackOverflowErrors should be logged any more.

### scripts

Maven's findbugs plugin is now granted more working memory in order
to make builds, especially on our continuous integration system, 
more robust.

### srm

Certificate lifetime considerations for VOMS proxy certificates are
improved in this release: if a
client delegates a credential where the VOMS AC expires before the X.509
proxies, dCache now will not use the credential beyond the AC expiry time. 
This avoids unnecessary authentication errors. 

### webdav

When the WebDAV door is considering an HTTP third-party-copy request
that uses grid-site delegation, there is a minimum 20 minute validity
that any existing delegated credential must satisfy. If this is not
satisfied then dCache will request a fresh delegated credential.

Until now, if the client failed to delegate a fresh certificate then the
subsequent COPY request was rejected. This release changes that behaviour
and enables such transfers.


### Changelog 3.2.37..3.2.38

<!-- git log 3.2.37..3.2.38 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[8d0835b43e](https://github.com/dcache/dcache/commit/8d0835b43eb38d11df18bd0a58ba4dfff9c3aeb9)
:   [maven-release-plugin] prepare release 3.2.38

[b64009c878](https://github.com/dcache/dcache/commit/b64009c8784d2913e8fabc7abcb1de5cbaf8fec0)
:   scripts: Avoid findbugs memory errors

[8cd739b36d](https://github.com/dcache/dcache/commit/8cd739b36d0b8a1d8aadd814f929591a1e3ba217)
:   nfs: increase request retry delay when selecting/starting  pool or mover

[8e4c745633](https://github.com/dcache/dcache/commit/8e4c74563363c27ddf2dd57271c352a01c731d88)
:   webdav: adjust minimum validity after requesting delegation

[6a026804e2](https://github.com/dcache/dcache/commit/6a026804e2bf70f8c1f89c25ea6c90643516dd62)
:   srmmanager/webdav: consider VOMS AC validity of delegated credential

[8c15015f63](https://github.com/dcache/dcache/commit/8c15015f63e57e3c7a1e5866995707d4fe670b51)
:   ftp: make performance marker task robust.

[8d877aec3b](https://github.com/dcache/dcache/commit/8d877aec3ba40c1ed12300cb43cec14c05e037d2)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.37

### pool

Diagnostic logging for failed HTTP third-party transfers was improved.

Billing records for failed transfers now show more detailed information.

The handling of cancelled flush requests for nearline media
was rewritten to be more efficient.

Compatibility with DPM was improved by increasing HTTP GET requests' timeouts.
This should allow more transfers to succeed.

### poolmanager

Supplying poolmanager with an unresolvable hostname as the target will
now result in an UnknownHostException instead of the previous behaviour
where an (unnecessary) NullPointerException was thrown.

### srm

Logging of errors in the SRM credential store was improved.

### webdav

If a non-resolvable host name is given as the source or destination
of a third-party copy request, WebDAV will now fail the transfer
immediately instead of waiting for a Poolmanager timeout.

Diagnostic logging for failed HTTP third-party transfers was improved.

### xrootd

dCache allows xrootd clients to specify a query/opaque string in a
kXR_mv request's source path.


### Changelog 3.2.36..3.2.37

<!-- git log 3.2.36..3.2.37 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[2015e44697](https://github.com/dcache/dcache/commit/2015e446970673463585e9ce680435ed97023847)
:   [maven-release-plugin] prepare release 3.2.37

[da040a2395](https://github.com/dcache/dcache/commit/da040a23950c3b3d1e1f532dcf75db0551640b70)
:   pool: HTTP TPC rework exception logging

[f2f359d250](https://github.com/dcache/dcache/commit/f2f359d2500663048057934f6893a78fc94d3cf3)
:   pool: increase TPC socket timeout for GET requests

[a3995fe5b7](https://github.com/dcache/dcache/commit/a3995fe5b7c98336d79e089632ca3edc553c488b)
:   srm: fix credential store logging

[1a474ac8f7](https://github.com/dcache/dcache/commit/1a474ac8f7db8a7c4b417ab6cd7fbe30b09c80c9)
:   pool: update log status using exception class name if no message

[08e79346ef](https://github.com/dcache/dcache/commit/08e79346efa4c9467768d487bf92cd6066b156ca)
:   xrootd: strip off query part from kXR_mv source

[fd0187db6c](https://github.com/dcache/dcache/commit/fd0187db6ca3d3235a51107055ddf15a028fca98)
:   webdav: fail TPC request early on unknown hostname

[1986a52bfe](https://github.com/dcache/dcache/commit/1986a52bfe4cc0b2e7058086fbbd7cc63dde78bc)
:   nearline-provider: do not propagate thread interrupt flag

[f1cde32f35](https://github.com/dcache/dcache/commit/f1cde32f35f1095ad5524220bb25fa4a0d2a6a4a)
:   poolmanager: fix NPE on unknown host

[632bd934dd](https://github.com/dcache/dcache/commit/632bd934dd1dda45d22f733df0f7df5336bc5460)
:   webdav: improve logging of TPC requests

[4c835638fa](https://github.com/dcache/dcache/commit/4c835638fab8c40f430e603b37c1e7f3d9177163)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.36

### Changes affecting multiple services

In order to more easily identify a rejected macaroon in the logs, its ID is now included in the log message.

An irrelevant stacktrace was logged on unexpected CacheExceptions. This 
was removed, leading to less clutter in the logs.

Different macaroons that were issued against the same secret are now discernible in the logs.

Users now get more information about the reasons why an invalid macaroon was
rejected: HTTP requests that are made with an invalid macaroon have a 401 HTTP
response with the status-line explanation phrase that describes why the
macaroon is invalid.

The access log file also logs why a macaroon was rejected.

### core

A library dependency was updated to avoid [CVE-2018-11771](https://nvd.nist.gov/vuln/detail/CVE-2018-11771). This patch introduces no user-visible changes.

### gplazma

Invalid macaroon logins no longer "spam" gPlazma.

### pnfsmanager

When creating a macaroon to allow uploading of data, the desired path
may not already exist. Without restrictions, WebDAV will auto-create
parent directory items that are missing, or the client can create these
directory elements explicitly with MKCOL.

With restrictions (such as from a macaroon) such directory creation
currently requires the MANAGE activity, which allows other actions
beyond the scope of this scenario. With this release, the behaviour 
was changed so that a user with a macaroon that authorises them to upload data into a
particular directory will be able to create parent directories to
achieve uploading the data.

### pool

A regression caused pools that had their size only specified in a layout file
to report a size of 8 Exabytes. This issue was fixed.

dCache now supports a DPM-specific HTTP extension that indicates the
checksum calculation is not yet complete, avoiding potential data
corruption with third-party copies: If DPM is calculating a checksum, then any RFC 3230 (i.e., with a
'Want-Digest' header) GET or HEAD request returns '202 Accepted' respond
status line and an HTML page as the response entity. Since dCache
considers any 2xx response as success, the HTML page was previously accepted as the
file's contents, resulting in data corruption.

dCache pools no longer log a stack-trace for non-bug P2P failures.

### srm

The domain '.access' log file now contains log information for grid-site
delegation activity, which facilitates debugging of http third-party-copying issues.

### transfermanagers

The "restriction check by-passed" warning for each WebDAV-initiated
third-party transfer is fixed.

### webdav

A user may request a macaroon by making an HTTP POST request to the
WebDAV door. This log entry was augmented by the ID and type of
macaroon used.

A previous patch needed a bit of an update to ensure that X.509-with-FQAN authenticated third-party transfers with macaroons work under all circumstances. This is now ensured.

### xrootd

The `--zip` option of xrootd clients is now supported.


### Changelog 3.2.35..3.2.36

<!-- git log 3.2.35..3.2.36 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4166b4b29b](https://github.com/dcache/dcache/commit/4166b4b29b7bb9ef05e2ef91278c8116ef7df3f0)
:   [maven-release-plugin] prepare release 3.2.36

[acd769fba0](https://github.com/dcache/dcache/commit/acd769fba0ad78e6a99555a21268bd32d8f13d66)
:   xrootd: add support for kXR_stat on open files

[9556512fa0](https://github.com/dcache/dcache/commit/9556512fa053dcd60b3fa6310e426f0112b0620c)
:   pool: P2P failures trigger stack-trace

[80dfa61625](https://github.com/dcache/dcache/commit/80dfa61625051f6684c5aba3b94e28e65915b7e6)
:   webdav: obtain FQAN from X.509 credential for gridsite

[c1b19f6443](https://github.com/dcache/dcache/commit/c1b19f644310600ce3146618b177af62e118b1b7)
:   core: avoid sending bad macaroons to gplazma

[4b26086b58](https://github.com/dcache/dcache/commit/4b26086b582c906ed04c5d20ad8a64f20097cccd)
:   webdav: update access log to record macaroon request details

[5cea320aff](https://github.com/dcache/dcache/commit/5cea320aff00cca75dc47550613e94c21ee83fdb)
:   transfermanager: fix missing path

[7ff01148cc](https://github.com/dcache/dcache/commit/7ff01148ccc1032355b39801aa9e38c7901da2cf)
:   libs: update to commons-compress-1.18

[1e84c57b12](https://github.com/dcache/dcache/commit/1e84c57b126c702cfd47e088e272f99aad64ad2d)
:   macaroons: include macaroon id in error message

[635dee7b22](https://github.com/dcache/dcache/commit/635dee7b22a02a36bfa97ad6ee140771a146804b)
:   pool: fix pool's runtime configured size regression (b70b0d9)

[e3e03a50dd](https://github.com/dcache/dcache/commit/e3e03a50ddc1dc039830617e126f1f2f55c54f64)
:   core: provide better feedback and logging if a macaroon is rejected

[eba086bd1a](https://github.com/dcache/dcache/commit/eba086bd1a789ef3caff3b9beae9c26da2dfb3e0)
:   pool: update HTTP TPC to support retrying GET and HEAD requests for DPM

[1ddd05ec66](https://github.com/dcache/dcache/commit/1ddd05ec66879024b867575cfd6d99d9a058c877)
:   srm: add gridsite delegation interface access-log

[06f235a099](https://github.com/dcache/dcache/commit/06f235a099c40a8e29f5277603b08e7f486d8b6c)
:   macaroons: fix logged id

[5bcd4d03a8](https://github.com/dcache/dcache/commit/5bcd4d03a8dc6c4b7fbf7a81634e0771dec47c78)
:   core: avoid stacktrace on arbitrary CacheException

[c5830a6522](https://github.com/dcache/dcache/commit/c5830a65224c65289649b0b28a5bd9b8c6dcb8e7)
:   [maven-release-plugin] prepare for next development iteration

[cdc0d5eb18](https://github.com/dcache/dcache/commit/cdc0d5eb18d3ecd552d116e6e4299aa514799c30)
:   pnfsmanager: allow restricted user with UPLOAD to create parent directories

## Release 3.2.35

### poolmanager

This release increases responsiveness for users that are not allowed to stage files, and for NFS users who access offline files. 
In cases where such a user issued a read request at the same time that Pool Manager handled
a staging request, the first request would block for the duration of the staging -- potentially
quite a while. From now on, users that are not allowed to stage receive appropriate error
messages as soon as possible, without having to wait for anyone else.

### xrootd

Support for xrootd `mkdir` was improved. 


### Changelog 3.2.34..3.2.35

<!-- git log 3.2.34..3.2.35 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[154c5445b1](https://github.com/dcache/dcache/commit/154c5445b1f30300c78d438cc37f9315225c44f4)
:   [maven-release-plugin] prepare release 3.2.35

[22aaf03765](https://github.com/dcache/dcache/commit/22aaf037659cfe794e24ad98dcbb50a097c9b7b3)
:   xrootd: update to xrootd4j dependency to 3.2.3

[1a1691e3fa](https://github.com/dcache/dcache/commit/1a1691e3fa631998bd614cc7bce748e1b92476ae)
:   poolmanager: do not squash request if state is not allowed

[25815d60f0](https://github.com/dcache/dcache/commit/25815d60f0c12d70f935d0c1b0dae26a098c5133)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.34

### sysytemd

Systemd did  not inherite the system-wide limits and was  completely ignoring  `/etc/security/limits.d/92-dcache.conf`.
This is now fixed and the limits successfully loaded and enabled as expected.


### Changelog 3.2.33..3.2.34

<!-- git log 3.2.33..3.2.34 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[fa184d2](https://github.com/dcache/dcache/commit/fa184d231292ce656c258c52565361824d67add6)
:   [maven-release-plugin] prepare release 3.2.34

[e465689](https://github.com/dcache/dcache/commit/e4656894fe0fa1e72b644f6098ebc68ac0a92664)
:   [maven-release-plugin] prepare for next development iteration

[529a5a2](https://github.com/dcache/dcache/commit/529a5a2598e1dc2d944c5cdf96d6e6f132d79d0e)
:   systemd: Add `/etc/security/limits.d/92-dcache.conf` in the dcache systemd unit and generator.

## Release 3.2.33

### Changes affecting multiple services

This rlease fixes an issue with WebDAV 3rd-party-copy requests that are
authorized using a macaroon that is only valid for writing a specific file.

NOTE: both the webdav door and transfermanagers must be updated before
the fix is effective. 

### pool

In order to help with debugging issues with partial FTP transfers, 
dCache pools now are able to log considerable information about failed FTP
transfers. 

This is controlled by the new property `pool.mover.ftp.enable.log-aborted-transfers`.

### webdav

dCache can now transfer data with a remote site, authenticating with
that remote site using a delegated X.509 credential, but authenticating
locally with a macaroon.

### xrootd

This release updates xrootd4j, which should help fix occasional "pad block corrupted" issues with older clients.


### Changelog 3.2.32..3.2.33

<!-- git log 3.2.32..3.2.33 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d390a16982](https://github.com/dcache/dcache/commit/d390a16982d6ad2788baade9263cd914d4d3af41)
:   [maven-release-plugin] prepare release 3.2.33

[f26c3650c1](https://github.com/dcache/dcache/commit/f26c3650c1ee0c6d0d6bb06bd4dce536e9759d66)
:   pom.xml:  update xrootd4j dependency to 3.2.3

[0c6f51c5e4](https://github.com/dcache/dcache/commit/0c6f51c5e42ef455c64ba609ffd076487124925e)
:   webdav: use TLS credential directly for gridsite

[bd13c21bc2](https://github.com/dcache/dcache/commit/bd13c21bc20499e3c0814a9f53abbe711f0655e8)
:   pool: instrument ftp mover to show partial transfers

[9663d40ae5](https://github.com/dcache/dcache/commit/9663d40ae5578014baed8a113134723359d2bf79)
:   webdav+transfermanagers: support TPC pull with targeted macaroons

[c5a6d0af64](https://github.com/dcache/dcache/commit/c5a6d0af64373ea0203157839b7b620de40bfa7d)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.32

### frontend

The current release fixed broken directory QoS reporting and now frontend now more accurately describes the QoS of directories; i.e., the
QoS that newly written files will receive when written into this
directory, assuming none of the targeted pools are volatile.

### webdav

the macaroon creation with multiple path restrictions failed with a http error 500 and the error message.
 This is now fixed and the macaroon creation succeeds when multiple path restrictions are defined.

The current release improved  error handling for PROPFIND request.


### Changelog 3.2.31..3.2.32

<!-- git log 3.2.31..3.2.32 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[117b68a](https://github.com/dcache/dcache/commit/117b68ae8aaa30876b0cb4b5addb4759c04f56a8)
:   [maven-release-plugin] prepare release 3.2.32

[40e9387](https://github.com/dcache/dcache/commit/40e9387595c4e2be2866f3c23d0be45cf877232f)
:   frontend: fix broken directory qos reporting

[c34cba3](https://github.com/dcache/dcache/commit/c34cba32675d688c2fb4ee785401afc555430717)
:   webdav: avoid throwing any exception when listing a directory for PROPFIND

[e370a41](https://github.com/dcache/dcache/commit/e370a4140909c5162862d059f96da1099b5512bf)
:   webdav/macaroon: Fix macaroon creation with multiple path restrictions.

[07924ed](https://github.com/dcache/dcache/commit/07924eda561237c70e140f5c432b188e74288f9e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.31

### ftp

dCache now has the ability to log the current status of a transfer at the point the client decided to abort an FTP transfer. 
This should support a post mortem investigation on why a transfer was cancelled.

### nfs

With the current release the timeout of pnfshandler is configurable and nfs door quicker
 recovers from situations, when a PnfsManager is not available.


### Changelog 3.2.30..3.2.31

<!-- git log 3.2.30..3.2.31 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ae85848](https://github.com/dcache/dcache/commit/ae85848e4170d9840c8624f010fbff3f9dcc47bb)
:   [maven-release-plugin] prepare release 3.2.31

[bd2e07b](https://github.com/dcache/dcache/commit/bd2e07b40e3b666ce6c68bd4a56a8c0e7a96d275)
:   ftp: add ability to log client-aborted transfers

[8e491e4](https://github.com/dcache/dcache/commit/8e491e44ccaabeddbaceeae190f6d0c270c2d80f)
:   nfs: make timeout of pnfshandler configurable

[1dffc9c](https://github.com/dcache/dcache/commit/1dffc9cce9352682b63343297dcf78d7f6d45560)
:   dcache: release dcache-view version 1.3.3

[c65318a](https://github.com/dcache/dcache/commit/c65318aeab0c58a233ad8a858c80fe98c02e7d49)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.30

### NFS

When two clients A and B operate on a file in quick succession, A opening the
file and B deleting it before LAYOUTGET is called, dCache puts the 
transfer into the list of active transfers and returned NFS4ERR_NOENT. If a
client tries to optimize the corresponding CLOSE call away, as some do, 
the entries are never removed from the list, effectively creating a leak.

This problem was fixed. Clients now receive an NFS4ERR_STALE message in those
cases.

### core

Certain transfer failures, such as attempting to
use a space-reservation that has insufficient capacity, resulted in the
door eventually reporting a time-out problem to the client.

A typical error message would resemble

```Request to [>SpaceManager@local ... ] timed out.```

This problem was traced to an internal misconfiguration of a messaging
component and is fixed from this release onwards.

### frontend

The reporting of a file's QoS status in frontend was improved. Files
that are being scheduled for moving to tape are now reported as 
'tape' instead of 'disk'.

### pool

A bug was fixed that occasionally caused problems with the pools' 
Berkeley DB. This could, for example, be triggered by removing files
which were in a flush queue. 

A typical error message was, e.g.

```
27 Aug 2018 12:09:33 (cat2_lhcbtape) [Frontend-dcacheview PoolDataRequest] Fault occurred in repository: Internal repository error. Pool restart required: : CacheExcept
ion(rc=204;msg=Meta data lookup failed and a pool restart is required: (JE 7.3.7) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: En
vironment invalid because of previous exception: (JE 7.3.7) /space/lhcb/tape/pool/meta java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause
incorrect internal state, unable to continue. Environment is invalid and must be closed.)
27 Aug 2018 12:09:33 (cat2_lhcbtape) [Frontend-dcacheview PoolDataRequest] Pool mode changed to disabled(fetch,store,stage,p2p-client,p2p-server,dead): Pool restart req
uired: Internal repository error
```

### webdav

Web clients (such as web-browsers) make OPTIONS pre-flight requests to
discover what they are allowed to do, according to the CORS standard.

Unfortunately, some web-browsers make the OPTIONS request without
presenting any credentials. If the resource is within a protected
directory then dCache currently fails the OPTIONS request.

This release introduces a new behaviour where such requests will always
succeed, so that browser pre-flight requests are not hampered.


### Changelog 3.2.29..3.2.30

<!-- git log 3.2.29..3.2.30 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a47eea0e8f](https://github.com/dcache/dcache/commit/a47eea0e8f7b059189c707e0c85923bf6325f7f6)
:   [maven-release-plugin] prepare release 3.2.30

[9bc218ab2a](https://github.com/dcache/dcache/commit/9bc218ab2adc403118c07e9892c81daa32c6de2d)
:   nearline-provides: do not interrupt processing thread on cancel

[303de641f9](https://github.com/dcache/dcache/commit/303de641f99d9eafb60351bf9876598cfdd27c2c)
:   nfs41: invalidate open-state on layoutget if file is removed

[73a5f72db9](https://github.com/dcache/dcache/commit/73a5f72db948172afe497ffeb375d3ed664ebd2b)
:   webdav: always respond to OPTIONS request

[129188e8ff](https://github.com/dcache/dcache/commit/129188e8ffef4d307fb16f5bd2e1d649c218ecdb)
:   core: ensure pool/poolmanager communication receives errors

[bb53e518f3](https://github.com/dcache/dcache/commit/bb53e518f3368d1eead237508de95550e5a5ff2e)
:   frontend: add targetQoS for not-yet-flushed tape files

[10d95ca99a](https://github.com/dcache/dcache/commit/10d95ca99adcc6e768dbbc0b59be635d80b12de9)
:   [maven-release-plugin] prepare for next development iteration

[4cbee39946](https://github.com/dcache/dcache/commit/4cbee399469ba4fdd2fecc9498d1af52c8c283ba)
:   dcache: release dcache-view version 1.3.2

## Release 3.2.29

### gplazma

The OidcAuthPlugin  plugin was  updated so that users whos op does not claim
 `name`, and does not claim `given_name` nor
`family_name` can use dCache.

### pool

This release fixed  the log stack-trace for `queue` admin commands and now bad admin input for the following admin commands no longer results in a stack-trace being logged:

* queue activate
* queue activate class
* queue remove class
* queue suspend class
* queue resume class
* queue remove pnfsid

### poolmanager

 NPE is fixed when staging files back from tape and
`poolmanager.enable.cache-hit-message` is true.

### webdav

The current release updated   default credential delegation for third-party copy so that now requesting a third-party copy using a macaroon does not trigger a failed
attempt to OpenID-Connect delegation.


### Changelog 3.2.28..3.2.29

<!-- git log 3.2.28..3.2.29 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[608c97c](https://github.com/dcache/dcache/commit/608c97c18729a2aef1f365d7d517a0acae7158b8)
:   [maven-release-plugin] prepare release 3.2.29

[63e6a6b](https://github.com/dcache/dcache/commit/63e6a6bc0468939f86663f7f1e3bb31462bfab56)
:   poolmanager: fix NullPointerException when staging files and reporting hits

[65a8d62](https://github.com/dcache/dcache/commit/65a8d62ef74671233d8b524ed3a967548f6ffdcd)
:   gplazma: oidc fix FullNamePrincipal creation

[7fb4034](https://github.com/dcache/dcache/commit/7fb4034eca2a7ccee1fa1f5457ae73336092a479)
:   libs: update jetty to version 9.4.11

[013c846](https://github.com/dcache/dcache/commit/013c846eb68368a05b49dcf3168a0e121e088575)
:   pool: 'queue' admin commands not the log stack-trace on bad arguments

[7711b70](https://github.com/dcache/dcache/commit/7711b701f7f63c1e36eafa8930a63becb502eb2a)
:   webdav: update default credential delegation for third-party copy

[28b9c34](https://github.com/dcache/dcache/commit/28b9c3471ef9a5417dffe7d58c518995f8cc424f)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.28

### history

This release fixes a bug that could cause startup errors
in the history service in the face of network errors. 

### many

Remote pool monitor would occasionally log stack traces from exceptions  
when a domain shut down due to an interrupt. This has been fixed, reducing
the number of irrelevant log entries in such situations.


### Changelog 3.2.27..3.2.28

<!-- git log 3.2.27..3.2.28 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ba9e256593](https://github.com/dcache/dcache/commit/ba9e256593b103e0cf6d9df0fc17e13d0da74d46)
:   [maven-release-plugin] prepare release 3.2.28

[11c703f059](https://github.com/dcache/dcache/commit/11c703f0597a4e0d0e539576480ac56bc3e6cf46)
:   dcache-history: handle Gson syntax errors explicitly

[5088923788](https://github.com/dcache/dcache/commit/508892378839a369ecdbb78212f6c0a1c1846639)
:   cells: add handling of RemoteProxyFailureException nested InterruptedException to UncaughtException handler

[7e1e2a4bf9](https://github.com/dcache/dcache/commit/7e1e2a4bf9cb8afb2d96eba8216f8224e418ba83)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.27

### nfs

dCache 4.0 and 3.2 now use nfs4j version 0.15.4, which includes bugfixes for rarely observed deadlocks
and incomplete directory listing over nfs.

### Changelog 3.2.26..3.2.27

<!-- git log 3.2.26..3.2.27 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[406a375f8f](https://github.com/dcache/dcache/commit/406a375f8f05fa91d396763bfd4260c1eb450449)
:   [maven-release-plugin] prepare release 3.2.27

[a638309921](https://github.com/dcache/dcache/commit/a638309921da6e7b4136d06c68a9d4ddd6a1d40f)
:   pom: update nfs4j-0.15.4 bugfix version

[79a88a12e4](https://github.com/dcache/dcache/commit/79a88a12e475f097232663b032ceea60f6c55c68)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.26

### pool

HTTP responses now contain more meaningful messages along with the 
HTTP response codes, instead of only just showing stock messages
like "400 Bad request". 


### Changelog 3.2.25..3.2.26

<!-- git log 3.2.25..3.2.26 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[86f0c693ff](https://github.com/dcache/dcache/commit/86f0c693ff064b329fffdb659b071eb2ddf8299c)
:   [maven-release-plugin] prepare release 3.2.26

[d77154fa4a](https://github.com/dcache/dcache/commit/d77154fa4ac3d925f550002e42830d9a562635a0)
:   pool: update HTTP mover to report errors as HTTP status message phrase

[6c809c0f4f](https://github.com/dcache/dcache/commit/6c809c0f4f3dd09df856b53c3f2d001009b4f07b)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.25

### resilience

Resilience suffered from a bug that would lead to a NoSuchElementException when a pool name no longer 
mapped to a location known to the Resilience service. This issue has been fixed.

When multiple pools go offline it is possible that
all replicas for a given resilient file become unreadable.
If the file is not CUSTODIAL, and thus cannot be restored
from tape, the discovery of such a file during scanning
will generate an error in the 'history errors' listing,
in the resilience domain .resilience log, and will also
raise a general alarm concerning the pool.


There currently exists a command, 'inaccessible', which
generates a listing of the pnfsids on a given pool
which in the current state of dCache have no readable 
replicas.  However, this command takes a while to complete
(asynchronously), and the output is written to a file
which must be viewed by logging in.

This release introduces 'refering pool' information to the
error output so that grepping the resilience log for a given
pool becomes easier, and adds options to the command to check
further details.


### Changelog 3.2.24..3.2.25

<!-- git log 3.2.24..3.2.25 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6f85108e66](https://github.com/dcache/dcache/commit/6f85108e66bef5ebf5fc6db94ccce1859ca30b55)
:   [maven-release-plugin] prepare release 3.2.25

[5419c0a8a3](https://github.com/dcache/dcache/commit/5419c0a8a3cb3a915d8b97e4946f0e97d109d756)
:   dcache-resilience: improve inaccessible file accounting

[bc803be5d0](https://github.com/dcache/dcache/commit/bc803be5d0be87cc9ccb57d75beed8946f8e8b54)
:   dcache-resilience: skip invalid cancel filters

[50ce7254b7](https://github.com/dcache/dcache/commit/50ce7254b72d444d229461888a914facd50dc429)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.24

### scripts

A regression in the `dcache pool convert` command was fixed; the command works again.

### scripts

The instructions that are printed out once `dcache pool convert`
completes successfully now correctly point to the 
property that needs to be updated, namely `pool.plugins.meta`.


### Changelog 3.2.23..3.2.24

<!-- git log 3.2.23..3.2.24 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[427f08e306](https://github.com/dcache/dcache/commit/427f08e3062e3a7f6f71b23308dc82a790eff3e8)
:   [maven-release-plugin] prepare release 3.2.24

[c06f09b136](https://github.com/dcache/dcache/commit/c06f09b1362a868ec83dacda2600a8e3fa825088)
:   pool: fix 'dcache pool convert' command

[90a41ca479](https://github.com/dcache/dcache/commit/90a41ca47960e8189fc1e9cb3c1af944b1dc42bb)
:   scripts: update reference to configuration property

[ce0430201e](https://github.com/dcache/dcache/commit/ce0430201eae04b6bdfba0ef0401ac25c75d5041)
:   pool: fix metadata migration tool to use Path

[c7772ea933](https://github.com/dcache/dcache/commit/c7772ea933a0d78f10c65615da803f6f0c66f076)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.23

### pool

This release improves dCache's robustness against network errors: In case 
registering a file with PNFS manager fails due to a timeout, the request
is retried transparently. 


### Changelog 3.2.22..3.2.23

<!-- git log 3.2.22..3.2.23 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bb4d51dd22](https://github.com/dcache/dcache/commit/bb4d51dd22fc28a39a002f3da64ec090b29ed90c)
:   [maven-release-plugin] prepare release 3.2.23

[a7739d65b9](https://github.com/dcache/dcache/commit/a7739d65b938d837b7899f0d0100cc26d519776d)
:   vehicles: fail-fast on invalid path

[11ed4c7cea](https://github.com/dcache/dcache/commit/11ed4c7cea83934edb3b7a76a3ade73c976e65b1)
:   pool: retry request to pnfs manager if timed out

[b76775f728](https://github.com/dcache/dcache/commit/b76775f728481a853a5ad016a9d60d1f86117941)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.22

### door

The current release added  support for a door advertising multiple hostnames or IP addresses.
dCache doors can  now advertise multiple interfaces, including DNS aliases.

### webdav

Milton's OPTIONS handler was returning  a 404 error if an OPTIONS request
targets an entity that did not exist. This behavior deviated from
Apache httpd server and was resulting  in failed uploads for dcache-view.
The current release fixed.


### Changelog 3.2.21..3.2.22

<!-- git log 3.2.21..3.2.22 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5b8e32b](https://github.com/dcache/dcache/commit/5b8e32b95a20f7bdc011258802735a66602e513f)
:   [maven-release-plugin] prepare release 3.2.22

[2aafba0](https://github.com/dcache/dcache/commit/2aafba0be48557bdd1ab28740597e73e74c58edf)
:   gplazma.properties: hint to enable roles

[7fe48f1](https://github.com/dcache/dcache/commit/7fe48f18cee979db0eb64b7a751a9b79c31a71d2)
:   doors: support advertising multiple addresses in LoginBroker

[7ded7cf](https://github.com/dcache/dcache/commit/7ded7cfe570255e06b868efe25e678f146f4e27d)
:   webdav: do not return 404 for OPTIONS request targeting absent entity

[64cf055](https://github.com/dcache/dcache/commit/64cf0556798339f83c60f3088dd96297d915dbcd)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.21

### dcache-resilience

There was a small regression in the way resilience computes
the number of operations necessary to adjust copies when
a storage unit definition changes.

The current rellease fixed  computation of operation count when storage requirements change.

### ftp

In order to aid diagnosing problems when FTP response being lost, now dcache  logs failures to wrap/encrypt responses.

### webdav

The current release improved error handling for client authentication with OpenID-Connect.
 A more complete set of information is now logged if OIDC delegation fails,
supporting the ability to discover why the delegation failed.


### Changelog 3.2.20..3.2.21

<!-- git log 3.2.20..3.2.21 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[e10182e](https://github.com/dcache/dcache/commit/e10182e07c72f6792a4a695e393c25fef1ae5cab)
:   [maven-release-plugin] prepare release 3.2.21

[163d4bb](https://github.com/dcache/dcache/commit/163d4bbe79c7518af3631c2b3aa9b1d4b94246c1)
:   scripts: add support for parsing ZooKeeper transaction logs

[38ae2b7](https://github.com/dcache/dcache/commit/38ae2b745ee26fd440be86fb1c4f1a34c4e982f7)
:   ftp: log failures to wrap/encrypt responses

[5b2ba4b](https://github.com/dcache/dcache/commit/5b2ba4b1053a3eb7221b45e52d5085740125eaf8)
:   dcache-resilience: fix computation of operation count when storage requirements change

[4ef97b8](https://github.com/dcache/dcache/commit/4ef97b8186f7f0a838a3887cb3c17a76737bea4e)
:   webdav: log errors if OIDC delegation fails

[7e86358](https://github.com/dcache/dcache/commit/7e86358306f0bf37ebf207597839249d267f9ec5)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.20

### ftp

Error reporting in the FTP service has been improved: in some mixed IPv4 / IPv6 scenarios,
only unclear error messages were reported. 


### Changelog 3.2.19..3.2.20

<!-- git log 3.2.19..3.2.20 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ecd42ce507](https://github.com/dcache/dcache/commit/ecd42ce50708841b02324c89647e67092b66cfef)
:   [maven-release-plugin] prepare release 3.2.20

[7827470210](https://github.com/dcache/dcache/commit/7827470210c1b974ef803415c3f8859a47c381af)
:   ftp: returned error is too vague for meaningful investigation

[77c9337778](https://github.com/dcache/dcache/commit/77c93377784b26b5344ba37bce7f4b87add726a1)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.19

### nfs

Situations, where selection process was incomplete could not  be manually recovered
When selection process incomplete, due to `PoolManager` restart, there was no way  to trigger a new selection.
The current release added  two new commands to `nfs door`:  `transfer retry` and `transfer forget`.  

The first command manually re-activates  existing transfer by re-trying selection process. 
The second one should be  used to  completely 'forget' the stale transfer and let client to trigger a fresh selection process.


### Changelog 3.2.18..3.2.19

<!-- git log 3.2.18..3.2.19 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[d580e01](https://github.com/dcache/dcache/commit/d580e016913f2fa80a9f669278810ce5d1e0b570)
:   [maven-release-plugin] prepare release 3.2.19

[df58f42](https://github.com/dcache/dcache/commit/df58f423574281f6e3f9e20452ef87aec7274d98)
:   nfs: add commands to reactivate stale transfers

[69d822a](https://github.com/dcache/dcache/commit/69d822aaf0d2454b9b02542e3c6d10eaa6f245ab)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.18

### gplazma

gplazma now supports a Fermilab-specific authorization data source in JSON format.

### pool

During active ftp transfers, connection problems would lead to the rather unhelpful error
message "451 General problem". This error reporting was refactored, so that diagnosis
of the cause is now greatly facilitated.

### poolmanager

A potential NullPointerException (that was not observed in real-world usage until now)
was fixed in Pool Manager.

### resilience

A correction to resilience's error handling results in no more reports on
non-resilient (but corrupted) files. 

### spacemanager

In order to facilitate debugging, Space Manager now logs link-group related content
in greater detail.


### Changelog 3.2.17..3.2.18

<!-- git log 3.2.17..3.2.18 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[3914a3e46b](https://github.com/dcache/dcache/commit/3914a3e46b894c9254a3d1aaccce546eac62f579)
:   [maven-release-plugin] prepare release 3.2.18

[9d01c5a804](https://github.com/dcache/dcache/commit/9d01c5a804e5c940aacc04a00a590cbc30511b3d)
:   poolmanager: fix migration command if named pool is removed

[ed541dbd38](https://github.com/dcache/dcache/commit/ed541dbd3808722deb46ab99672f4eac9e6aa407)
:   dcache-resilience: repair over-aggressive handling of broken file messages

[bce6a346d6](https://github.com/dcache/dcache/commit/bce6a346d60a8d5b3d64eb1c3581befb8d8f1edc)
:   pool: fix error message for failed active FTP transfers

[1e73d5f6a4](https://github.com/dcache/dcache/commit/1e73d5f6a4c466acc4c1b020dbe7cdf76fa8803b)
:   fix the project version in pom.xml

[e58062e696](https://github.com/dcache/dcache/commit/e58062e69624a5a12da2e2678c7b53a63dfaacaf)
:   gplazma-fermi: fix last modified check in junit test

[fef97c5dd1](https://github.com/dcache/dcache/commit/fef97c5dd17bc067bc9b2949b3e3b974228a9640)
:   spacemanager: add remote pool monitor debug logging

[abf7548dd2](https://github.com/dcache/dcache/commit/abf7548dd281a304039fe6993579328be9f3d9b3)
:   gplazma-fermi: add mapping plugin to support VO group and username from file

[8b228e192a](https://github.com/dcache/dcache/commit/8b228e192a43a1637b83d90b476bdca792e28d10)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.17

### Changes affecting multiple services

This version removes the (by now unused) directory /var/lib/cell-info
from a default installation. The directory was previously used to store
cell info data. With the introduction of the history service in dCache 3.2.1,
this became obsolete.

A small bug-fix addresses wrong directory permissions on tar or Debian
packages, where the directory /var/lib/dcache/pool-history had the
wrong permissions.

The deprecated properties for configuring alarms have now finally been made 
unavailable.

### chimera

An internal update enables chimera to use PostgreSQL 10.

### nfs

A modification in IP address handling greatly increases the speed of 
NFS client access for Linux clients in mixed IPv4/IPv6 environments.

Prior to Linux 4.12, Linux clients with only an IPv4 address would wait
for (timeout * retry) seconds when connecting to pools with both a v4 and v6 
address. This was [fixed upstream in Linux 4.12](https://github.com/torvalds/linux/commit/6ea44adce91526700535b3150f77f8639ae8c82d), but that fix was not
backported to e.g. RHEL 7 yet.  


### Changelog 3.2.16..3.2.17

<!-- git log 3.2.16..3.2.17 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[3c3d887c68](https://github.com/dcache/dcache/commit/3c3d887c68441c786ffab15de31a492cc14a0a38)
:   [maven-release-plugin] prepare release 3.2.17

[ab5d6e6e97](https://github.com/dcache/dcache/commit/ab5d6e6e976dfc067c454ff5dc10bd948468a2a8)
:   nfs: filter out IPv6 DS addresses if client connected with v4

[278d7e5a33](https://github.com/dcache/dcache/commit/278d7e5a33dc0c6bb059b1059692d87c227825cb)
:   chimera: adjust postgres driver provider to new version schema

[1f18b011be](https://github.com/dcache/dcache/commit/1f18b011bea034b2485149e4c4ffe7f749dc7f1a)
:   skel: remove extraneous cell-info dir

[2872ce17ba](https://github.com/dcache/dcache/commit/2872ce17bac2d7f85a840b701bcf7939d2fc97b7)
:   packaging: add missing chown and chmod on pool-history

[742a3666fc](https://github.com/dcache/dcache/commit/742a3666fcd5ad4e822cb7c745ff6e8216a2ad89)
:   skel: make deprecated alarms properties forbidden

[24939dc5ac](https://github.com/dcache/dcache/commit/24939dc5acdb9e439f6d053cced4b6e8aebab52e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.16

### resilience

Logging for cases where file replication was fatally aborted was improved. Previously, alarms 
messages pertained to the PNFSID of the affected files. In rare cases, like when facing 
network congestion, many hundreds of alarms could be created. With this change, alarms messages
refer to the storage unit, and a suffix based on an hourly timestamp is added to the 
alarm message. The alarm will thus be incremented during the hour but a new
alarm will be created (only) hourly; in this way, those receiving
email alerts will receive them once an hour.


### Changelog 3.2.15..3.2.16

<!-- git log 3.2.15..3.2.16 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[b2195c4e2f](https://github.com/dcache/dcache/commit/b2195c4e2f5c3052bf0e0e638aacb15c50f1ea7a)
:   [maven-release-plugin] prepare release 3.2.16

[6c98c2b867](https://github.com/dcache/dcache/commit/6c98c2b8672708106271f9151a3821c11a0822c4)
:   alarms: fix broken path

[5ec525255d](https://github.com/dcache/dcache/commit/5ec525255dc706b21cf25d0d17fb150794813250)
:   [maven-release-plugin] prepare for next development iteration

[84f6af6218](https://github.com/dcache/dcache/commit/84f6af6218c6ebc2509f19d4b96f60e2381e7d21)
:   substituted Calendar for Instance which was failing.

[529c10c14d](https://github.com/dcache/dcache/commit/529c10c14d5106e5454c79576d47f5f6aef5b8ff)
:   dcache-resilience: avoid spamming alarms with abort messages

## Release 3.2.15

### ftp

A bug (that was not observed in real-world settings yet) that might have caused
NullPointerExceptions was fixed in the ftp service.

### httpd

dCache will no longer log a stack-trace if HTTP
requests are made asking for information from the info service when the
info service is not running.

### poolmanager

An earlier change in PoolManager introduced regular broadcasting of the 
stage request queue to various internal listeners. In some cases, this
could lead to erroneous NoRouteToHost  error messages being logged. These
error messages are now being suppressed.

dCache 3.0 introduced a regression where a dCache domain does not
start up if it hosts a poolmanager with poolmanager.conf containing
either the "rc set sameHostCopy" or the "rc set sameHostRetry" command.
This regression was fixed.

### resilience

Error handling within the Resilience service was improved.


### Changelog 3.2.14..3.2.15

<!-- git log 3.2.14..3.2.15 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6e95e936af](https://github.com/dcache/dcache/commit/6e95e936af71238827cd9a163ae11fd5cf9a45b1)
:   [maven-release-plugin] prepare release 3.2.15

[525705459f](https://github.com/dcache/dcache/commit/525705459ff76af347500e173bf72a0a1aae4d5f)
:   dcache-resilience: handle properly RuntimeExceptions from tasks

[be6abaf5c7](https://github.com/dcache/dcache/commit/be6abaf5c75d853825263e15bdfbe33346621782)
:   ftp: ensure adapter is closed

[465d2c04b1](https://github.com/dcache/dcache/commit/465d2c04b1ec5159ae9233da252897a26064562b)
:   ftp: remove rare NullPointerException when proxying data

[40b57484c1](https://github.com/dcache/dcache/commit/40b57484c10acaffd937588de0b1ff4d0ebebf97)
:   httpd: do not log an exception if info cell not running

[8cea3b4568](https://github.com/dcache/dcache/commit/8cea3b456827684c475e473e773591b99ac69d94)
:   poolmanager: silence NoRouteToCell for stage queue topic

[71a1728ed2](https://github.com/dcache/dcache/commit/71a1728ed200e0ebcfde13dcd393a3ab54794443)
:   poolmanager: fix poolmanager startup with certain poolmanager.conf content

[741864a1f6](https://github.com/dcache/dcache/commit/741864a1f6b429c27df5d05458ebd2320cc66ea9)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.14

### dcache-resilience

When a checksum or broken file message/error is generated,
Resilience makes a best effort to (a) remove the broken
copy and (b) make another replica. This, of course, is not always possible, particularly if
the broken file is the only accessible copy. This resulted in  faulty behavior 
 particularly the thrashing noted in the case of a restaging operation which results in a checksum error.
This is now fixed.

The current release improved error handling for resilience. 
It fixed  unnecessary Migration Task exceptions resulting from
source pools with no replica in the repository.

Now  it should be possible for Resilience to use pools blocked only for
writes from doors.

### packaging

Upgrading to dCache v3.2 (or newer) was resulting  in a broken dCache
installation due to a missing `services.sh` file. This is now fixed and
upgrade to dCache v3.2 (or newer) from dCache v3.1 (or older) no longer
breaks dCache by removing /usr/share/dcache/lib/services.sh.


### Changelog 3.2.13..3.2.14

<!-- git log 3.2.13..3.2.14 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[a7c71df](https://github.com/dcache/dcache/commit/a7c71dfff684cc772a764a3f691e70ee83275197)
:   [maven-release-plugin] prepare release 3.2.14

[d455f9d](https://github.com/dcache/dcache/commit/d455f9d792fd9e0b58c767cbc4430ef56288c581)
:   bad commit put DOWN twice

[d848910](https://github.com/dcache/dcache/commit/d8489100cfbf2ced89ea8afe159fab5fa640b439)
:   dcache-resilience: define non-writable pool to mean p2p-client is disabled

[8ce3c06](https://github.com/dcache/dcache/commit/8ce3c06c88c44fea2d035e24d69dfb4fe9e85483)
:   dcache: fix remote pool monitor wait bug

[dac5e17](https://github.com/dcache/dcache/commit/dac5e17addc43e888d34479f7239343434e5be58)
:   dcache-resilience: repair handling of broken files*

[f2cb660](https://github.com/dcache/dcache/commit/f2cb660ab2d0b5bf923c26021a744c2626e4d835)
:   packaging: check 'services.sh' after old rpm removed

[0876aa8](https://github.com/dcache/dcache/commit/0876aa84042d5aefeca662361044b56a3d9e9778)
:   [maven-release-plugin] prepare for next development iteration

[e7d5e16](https://github.com/dcache/dcache/commit/e7d5e16199413eb46ae0a5c7b3ee5958a1a83127)
:   dcache-resilience: fix bug in source handling with Clear Cache Location messages

## Release 3.2.13

### cells

The current release added explicit ZooKeeper/Curator monitoring. Events generated by ZooKeeper and Curator are now logged in a new, which  may help diagnose
problems that are suspected to come from bad ZooKeeper interaction.

### frontend

The current release improved the error handling to work with Jackson exceptions.


### Changelog 3.2.12..3.2.13

<!-- git log 3.2.12..3.2.13 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[353bd42](https://github.com/dcache/dcache/commit/353bd42ee70193650002a0a3aa059c9b4b1972f9)
:   [maven-release-plugin] prepare release 3.2.13

[80d60ae](https://github.com/dcache/dcache/commit/80d60ae9640f0e253e2d2470a1125089b2bb4a75)
:   dcache-resilience: fix wrong assumption about error type in Message

[673c067](https://github.com/dcache/dcache/commit/673c06798a2daf4d91d4510c2559f6cbb6db8c8f)
:   cells: add explicit ZooKeeper/Curator monitoring

[1fa42cd](https://github.com/dcache/dcache/commit/1fa42cd2af04d3ca5e955e0d6d59b9668122bcff)
:   frontend: Map requests with bad JSON to HTTP 400 Bad Request status code

[8b24220](https://github.com/dcache/dcache/commit/8b242201704d22de92360c44218b80f22dec527e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.12

### nfs

NFS door has been updated  to return NFS4ERR_LAYOUTUNAVAILABLE for DOT files.

### star

The current release improved documentation to help  dCache admins to  have a better understanding of how to generate StAR record.

The current release fixed fix printing exception error message for dcache-star script if there's a problem when run with newer versions of Python.


### Changelog 3.2.11..3.2.12

<!-- git log 3.2.11..3.2.12 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[5ea66f8](https://github.com/dcache/dcache/commit/5ea66f86a04717fc3a9b5ae79f1c8d9c63faf90e)
:   [maven-release-plugin] prepare release 3.2.12

[8c1e09d](https://github.com/dcache/dcache/commit/8c1e09dc359ec7b359e0f777089f79f0c46ca683)
:   nfs: return LAYOUTUNAVAILABLE for DOT files

[78c57d8](https://github.com/dcache/dcache/commit/78c57d86609d3e0dee23b490e4f653e66db499b0)
:   star: fix printing exception error message

[4f62d5a](https://github.com/dcache/dcache/commit/4f62d5a6aa23df7dc7be906b8e98adb7f7ea1906)
:   star: update documentation to provide better description of script

[554bcc0](https://github.com/dcache/dcache/commit/554bcc0a1e0ec324fb7be65dc7827495a95b30bc)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.11

### info

The info service collects information about who is allowed to reserve space. 
Since some of this information, like VOs, usernames and gids, may be considered
sensitive information, this update allows admins to control whether or not 
to publish them. The default behaviour is unchanged from the previous behaviour,
i.e. info publishes everything. If a site admin wants to change this,
the `info.limits.show-only-vo-authz` property can be set to `true`.

### nfs

Accessing a nonexisting file on recent NFS implementations could cause a 
FileNotFoundChimeraFsException, which is now caught and properly handled. 

### pool

In rare circumstances, running `info` on a pool could cause a
NullPointerException. This issue has been fixed.

### scripts

The dcache script and manpage still refered explicitely to Java 6. This patch
changes the phrasing of the respective text.


### Changelog 3.2.10..3.2.11

<!-- git log 3.2.10..3.2.11 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4791b79689](https://github.com/dcache/dcache/commit/4791b79689aca7b4fab39b5d702e707862b79c7b)
:   [maven-release-plugin] prepare release 3.2.11

[0dae9f19f4](https://github.com/dcache/dcache/commit/0dae9f19f4d6fe011f30242cefa7c956f92cac26)
:   nfs: fix ServerFault on FileNotFoundHimeraFsException

[952fd1d2c0](https://github.com/dcache/dcache/commit/952fd1d2c08e68e4ea927c67677647e6c22a392d)
:   [maven-release-plugin] prepare for next development iteration

[b68757dd48](https://github.com/dcache/dcache/commit/b68757dd484fde0cd795192bc9aa46e048c9eb33)
:   scripts: update reference to JDK to avoid mentioning specific java version

[f1c860a74b](https://github.com/dcache/dcache/commit/f1c860a74bc28137f94a573858bc194ca95aaac5)
:   info: allow admin to control whether non-VO / non-FQAN identities are shown

[64ac107458](https://github.com/dcache/dcache/commit/64ac1074587029fcf1006c0aeb56e7405f16a6c7)
:   pools: fix NPE from info command at startup

## Release 3.2.10

### chimera

A database deadlock was observed in some rare situations with the latest
3.2 releases. This patch resolves the issue, ensuring trouble-free 
chimera operation.


### Changelog 3.2.9..3.2.10

<!-- git log 3.2.9..3.2.10 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f50d7d22c6](https://github.com/dcache/dcache/commit/f50d7d22c64859c7b4afeaf0dfd3ef1d926640dc)
:   [maven-release-plugin] prepare release 3.2.10

[70c1ba902f](https://github.com/dcache/dcache/commit/70c1ba902f5c2a922f63a1c3663cc937073ed736)
:   chimera: fix deadlock in Postgres driver

[89bb1f959d](https://github.com/dcache/dcache/commit/89bb1f959d5b34e334d625e75ce58f67c8af5bd6)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.9

### chimera


The current release fixed previously introduced issues for  `lost+found` directory permissions.
Now, the `lost+found` directory permissions is updated without causing
problems if that directory has been removed or permissions have been
modified.


### Changelog 3.2.8..3.2.9

<!-- git log 3.2.8..3.2.9 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[44a6ec8](https://github.com/dcache/dcache/commit/44a6ec87ccc2d970e40920dbfed608c240a52118)
:   [maven-release-plugin] prepare release 3.2.9

[91c30e6](https://github.com/dcache/dcache/commit/91c30e69e54ef9f5ae27dd3b282f8bbebf63dcbd)
:   chimera: correct previous attempt to fix 'lost+found' directory permission

[0c61067](https://github.com/dcache/dcache/commit/0c61067ac32db94d2775fa2c4fcf4382d8843e8e)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.8

### nfs

The current release fixes transfer leak, if the door failed to start a mover.

### pnfsmanager

The current release improves documentation for `set log slow threshold` admin command help.

### spacemanager

dCache now allows an SRM client to specifying from which linkgroup a
reservation should be made.


When trying to upload into dCache using a space-token where there
is no selectable link for this operation then the user was presented with
a generic error message; for example,

`No write links configured for [net=131.169.71.98,protocol=GFtp/2,store=dot:user@osm,cache=,linkgroup=]`.

This behavior is changed now and an  improved error message is returned to the user if they attempt an upload data into dCache using a space-reservation in a way where
`poolmanager` configuration prevents the upload.

### srmclient

The `srm-reserve-space` command now supports a user choosing from which
linkgroup a reservation should be made, provided the corresponding
dCache also supports this.

### webdav

The current release improved error handling when  dCache is full.


### Changelog 3.2.7..3.2.8

<!-- git log 3.2.7..3.2.8 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[558f21e](https://github.com/dcache/dcache/commit/558f21e3b626eb504b2c0e569485a2b631a905e1)
:   [maven-release-plugin] prepare release 3.2.8

[1781cee](https://github.com/dcache/dcache/commit/1781ceec85e34ebb1009d82480c62550af3d3d36)
:   systemtest: work with new OpenSSL DN format

[815a561](https://github.com/dcache/dcache/commit/815a5610b6591d33be22fec4139246a952c9329e)
:   spacemanager: allow SRM clients to specify linkgroup in reserve requests

[086d559](https://github.com/dcache/dcache/commit/086d559d1cc2898c722fc16632ea7385eeaec010)
:   srmclient: add support for specifying linkgroup when reserving space

[636fdce](https://github.com/dcache/dcache/commit/636fdcef2e402a69eceafa3fdab3ed070bedf176)
:   spacemanager: provide space-specific error message on bad upload

[f758653](https://github.com/dcache/dcache/commit/f758653e9aa4fce199af05974266529bd74ed619)
:   webdav: return 507 Insufficient Storage when dCache is full

[606d7ed](https://github.com/dcache/dcache/commit/606d7ed1ecd1ec5e77170ea78c3f5f03a8c0b7bd)
:   pnfsmanager: update slow logging admin command help

[bc15f25](https://github.com/dcache/dcache/commit/bc15f25d5989ad5b9e458ca8e15085744bda5223)
:   nfs: fix transfer leak, if the door failed to start a mover

[2490982](https://github.com/dcache/dcache/commit/2490982905660345ff80bfc75151e361bffba088)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.7

### cells

dCache no longer logs stack-traces when running  multiple cells with the same name.

### frontend, webdav, httpd

With high availability, it is now possible to run redundant
services. In the case of `Pool Manager`, restore requests
are distributed to the separate instances,  so as to avoid staging the same file twice.
This means, however, that the full list of current restore requests
is partitioned among the pool manager instances. To receive a full
listing, it is no longer possible to query for them on the named
`PoolManager` queue, since this means the response will be from
the first responder only. The current issue fixed this issue and  all  current http services report all restore requests.
The current release fixed this issue. 

It is important to note that, upgrading nodes running `frontend`, `webdav` or  `httpd` to version 3.2.7 (or newer) requires upgrading
nodes  running `poolmanager`  at least  to 3.2.7 (or newer) version.


### pool

For certain failures,the pool was logging transfer failures twice. This is now fixed.

### rpm

dCache ensures now that user 'dcache' is a member of group 'dcache'.

### srmclient

The same error has been logged multiple times resulting in stack-trace.
This current release fixed both issues.

### srmmanager

Support tickets indicated that for some services it was unclear  how to fix a configuration that still 
has assignments for either `srmmanager.net.port` or `srmmanager.net.local-hosts`.
 The current release updated the documentation describing how to fix their configuration after upgrade.

### star

The current release Introduced new property `star.db.*`, which makes possible now  to run PostgreSQL on non-standard ports can use STAR.


### Changelog 3.2.6..3.2.7

<!-- git log 3.2.6..3.2.7 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[ff339ca](https://github.com/dcache/dcache/commit/ff339caf6bac8067e06ff71b386946e49cf3545b)
:   [maven-release-plugin] prepare release 3.2.7

[93cbaf0](https://github.com/dcache/dcache/commit/93cbaf09272b42a6ed2d7989d6a5991cb094a4ea)
:   httpd, dcache-frontend: support requests for restore listing when there are multiple pool managers

[58b0338](https://github.com/dcache/dcache/commit/58b0338e8f8a0a90a00fb9f9a49a475065ccfcfd)
:   [maven-release-plugin] prepare for next development iteration

[8fd4ba4](https://github.com/dcache/dcache/commit/8fd4ba4e7c1aa15feab4f7993cd9af70f2c2035b)
:   pool: fix double logging on remote FTP transfer error

[a1c9b6e](https://github.com/dcache/dcache/commit/a1c9b6e3c0c0baefa5b876b28fce2451b0990237)
:   srmclient: avoid stack-trace and repeated logging

[7deae9d](https://github.com/dcache/dcache/commit/7deae9d0196105770cf1aa1acd5bcf0b59365829)
:   srmmanager: provide better hints on obsolete properties

[29394bd](https://github.com/dcache/dcache/commit/29394bd5b95264a87417b383e5abbed4e7623aa3)
:   pool: Fix how certain bugs are logged

[3d8e83d](https://github.com/dcache/dcache/commit/3d8e83d96ecd56746a2a32319f70bd416d45b0fb)
:   star: support PostgreSQL running on non-standard TCP ports

[64b97ef](https://github.com/dcache/dcache/commit/64b97ef297d3a0352da0e655aa4e5b63ad8138aa)
:   rpm: don't assume existing dcache user is member of dcache group

[bbf75cb](https://github.com/dcache/dcache/commit/bbf75cb9bd08a8b34d93a1cbc25e287e181960a9)
:   cells: don't log stack-trace on starting cell with same name as running cell

## Release 3.2.6

### admin

The admin interface reported  an attempt to connect to an absent cell as  a bug. The current release fixed the issue.

### httpd

Requests to httpd targeting an unknown resource was returning  `200 OK` response code. Nevertheless  the `404 NOT FOUND`
 response would be closer fit. This is now fixed.

### maven

The `global` `dcache.service`  was missing  from the built packages. 
The current release fixed this problem and `dcache.service`  is now included in Debian packages.

### nfs

The current release corrects inaccurate documentation of  `nfs.enable.pnfsmanager-query-on-move`.

### pool

Closing dcap mover connection no longer logs a stack trace.

### statistics

Timeout in contacting `PoolManager` no longer results in a stack-trace being logged.


### Changelog 3.2.5..3.2.6

<!-- git log 3.2.5..3.2.6 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[6956c9b](https://github.com/dcache/dcache/commit/6956c9bad00b98a488f722378878028d75c1e6aa)
:   [maven-release-plugin] prepare release 3.2.6

[b695c88](https://github.com/dcache/dcache/commit/b695c88574851e8568c57f34f29639d61923b5eb)
:   statistics: avoid stack-trace on internal timeout

[b1201b6](https://github.com/dcache/dcache/commit/b1201b6d29df997a71c5d152cbe7e3d7bd4b54e8)
:   nfs: fix documentation of nfs.enable.pnfsmanager-query-on-move

[d327b87](https://github.com/dcache/dcache/commit/d327b87fdcb76eb114fc7f96bc6e17b5ecb2f6f7)
:   admin: do not report attempts to connect to missing cell as a bug

[556e2d4](https://github.com/dcache/dcache/commit/556e2d4f4a5280b8d8c3a87af1e4b0d169393bdc)
:   maven: include dcache.service in Debian packages

[d830799](https://github.com/dcache/dcache/commit/d830799953837d8fbf83d4a41732c92aebc1caa2)
:   pool: fix stack-trace when closing dcap mover connection

[44b5541](https://github.com/dcache/dcache/commit/44b5541832ea440e0481f2b0792e2736c24c8f57)
:   httpd: return 404 status code on an unknown page

[995b5bf](https://github.com/dcache/dcache/commit/995b5bfc16b54a1882f2e84ca1e26b65d904d8cb)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.5

### Changes affecting multiple services

This release addresses several issues with systemd support and packaging on Debian systems. 

The rsyslog configuration has been updated from using language version 7 to version 8.

There is a new systemd service unit `dcache.service` that can be used to have all dCache domains started with only one startup call.

An installation bug with the Debian package was fixed that prevented a successful installation because of a missing `cell-info` directory.

Under systemd, log files are again back in their usual location under `/var/log/dcache/$DOMAIN.log`.


### Changelog 3.2.4..3.2.5

<!-- git log 3.2.4..3.2.5 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bc7d6088db](https://github.com/dcache/dcache/commit/bc7d6088dbdf87162ba5d40d70265ed94eff477b)
:   [maven-release-plugin] prepare release 3.2.5

[9ce9bc9ad4](https://github.com/dcache/dcache/commit/9ce9bc9ad4a64b8e4f8ad482d109b7a4b8898baa)
:   switch to rsyslog v8 configuration language

[83a779d06f](https://github.com/dcache/dcache/commit/83a779d06fce390be5162e7889e924bd3ba6a75c)
:   move logfiles back to /var/log/dcache

[d19373ae34](https://github.com/dcache/dcache/commit/d19373ae34beb8eb677c8b8a4fd49583c68b8452)
:   systemd: adding a global dcache.service which pulls in dcache@*.service

[0dff5cd0e0](https://github.com/dcache/dcache/commit/0dff5cd0e09f273bc976733ee04de9442b6290b1)
:   packaging: include empty var directory: 'cell-info'

[d6696bcbd1](https://github.com/dcache/dcache/commit/d6696bcbd10b4e18b95882c5a571fdcf66893c06)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.4

### Changes affecting multiple services

dCache no longer logs stack-traces if a Java VirtualMachineError occurs. This is unnecessary as dCache was (presumably) working fine until Java
discovered a problem.

### chimera

Sites updating to dCache 2.15 or later might observe that a lost+found directory with incorrect permissions was created during the update. This
patch ensures correct permissions. Since we cannot know if the current permissions in lost+found are
intended, this patch does not modify any existing lost+found directory
permissions.

### frontend

An irrelevant stack trace could occasionally be logged by the frontend. This patch corrects that issue.

During service interruptions, timeouts have been logged at WARN level until now. The logging level has been changed to INFO with this release.

An irrelevant stack trace was occasionally logged by the frontend service. This release corrects that.

### history

Currently, the history service will block dCache startup for
history.service.poolmanager.timeout (2 minutes) if the service is
started while PoolManager is not running. This blocking was removed,
so that system starts are quicker and more reliable.

### pool

The `sweeper free`command no longer logs a stack trace if it is started with incorrect input information.

An irrelevant stack trace was logged by the pool. This release corrects that.


### Changelog 3.2.3..3.2.4

<!-- git log 3.2.3..3.2.4 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[4f25e874fe](https://github.com/dcache/dcache/commit/4f25e874feee868b439a0deb83b6f2c9ffc4256c)
:   [maven-release-plugin] prepare release 3.2.4

[a760f18d72](https://github.com/dcache/dcache/commit/a760f18d7283fad56af5a537dd605bfd13389811)
:   chimera: update schema migration when creating 'lost+found' directory.

[fc9f218337](https://github.com/dcache/dcache/commit/fc9f218337b04c8e9c851940a3a70f37bf203d0d)
:   pool: fix stack-trace on bad command input

[e17c58e654](https://github.com/dcache/dcache/commit/e17c58e654b94ceedbbe28ff5921190dc6d5017c)
:   pool: fix stacktrace on FaultEvent logging

[3926ead39c](https://github.com/dcache/dcache/commit/3926ead39c165669370c5e50784b59c1701d97aa)
:   system: Don't log stack-trace on fatal JVM error

[a924c2175f](https://github.com/dcache/dcache/commit/a924c2175fb597dcd8ef9e8cf63b2c962fabd485)
:   dcache-frontend: fix ConcurrentModificationException in ReadWriteData

[37e229cffe](https://github.com/dcache/dcache/commit/37e229cffe7f1ee066b56ed4e335d4a2de45e9c7)
:   srmclient: refactor 'srm' helper script, enforcing environment variables

[bfda91c5cc](https://github.com/dcache/dcache/commit/bfda91c5cc70e06437a170056039425440a0ab91)
:   history: do not block on startup if PoolManager is not running

[732c5e2b9c](https://github.com/dcache/dcache/commit/732c5e2b9cf15a4c508bca0e092e009d94c84091)
:   dcache-frontend: adjust level of timeout logging

[91b3d01342](https://github.com/dcache/dcache/commit/91b3d013420265fbd6151a35049bcfef025813c4)
:   dcache-frontend: adjust REST API for Pool Info Resources

[50652e65ea](https://github.com/dcache/dcache/commit/50652e65ea73dfe36f189c58cf5ef758af5234a4)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.3

### alarms

Until now, the sorting order of alarms did not provide a correct ordering 
for all types of alarms. With this release, alarms are now implicitly ordered 
by at least their latest modification timestamp.

### frontend

The cause of a stack-trace during system shutdown has been fixed.

### nfs

The handling of directories with hard links in them has been improved, providing
NFS clients with a way to correctly list them in all cases.

### resilience

One of the features of resilience is the enforcement of file
partioning on pools according to pool tags.   The pool tag
restrictions are observed whenever a file is copied.  In
addition, it is rechecked when a storage unit is updated,
in order to make sure the files are distributed correctly
according to the new requirements.  This is done by
removing the offending copies and recopying them in
a new location.

Should files get redistributed, however, by rebalancing or
a migration job, it is possible that the partitioning will 
be violated, since only resilience observes it. 

The resilience service now verifies that files are distributed according to the requirements
specified by pool tags while doing periodic scans (or scans initiated through the admin 
command). 

### statistics

A possible race condition was removed from the implementation of the `create stat` admin command.


### Changelog 3.2.2..3.2.3

<!-- git log 3.2.2..3.2.3 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[f4a96d52d6](https://github.com/dcache/dcache/commit/f4a96d52d6e84f43d0a9f7750c56f6248ce70e16)
:   [maven-release-plugin] prepare release 3.2.3

[a95f3a56d2](https://github.com/dcache/dcache/commit/a95f3a56d27f0e739bdac973045ab1203ded296e)
:   statistics: fix race in "create stat" admin command

[17d15a2bf9](https://github.com/dcache/dcache/commit/17d15a2bf96c8df39dcd6c724b01e4b2812a4450)
:   srm: fix stacktrace on database failure

[d89fd3086c](https://github.com/dcache/dcache/commit/d89fd3086c8efdb1e479face46a1120f33b0e33e)
:   dcache-frontend: fix shutdown not to cause stack trace in collection services

[245e40df10](https://github.com/dcache/dcache/commit/245e40df102901f25030fd38a36732334448db05)
:   alarms:  revert LogEntry.compareTo() to throw NPE on null object

[5bec23331b](https://github.com/dcache/dcache/commit/5bec23331bac37e36a230d990bba5092be2c0d25)
:   nfs: change the way how directory cookies are generated

[ed2b1a7138](https://github.com/dcache/dcache/commit/ed2b1a713815102ee177d4ce04f37776ce889101)
:   resilience: force tag partition checking on scans from admin command and periodic checks

[fcfe6f0437](https://github.com/dcache/dcache/commit/fcfe6f0437513fdd6ef3a2b6face3f5aa9a92ddc)
:   alarms: fix natural order comparator to use timestamp first

[c33a097997](https://github.com/dcache/dcache/commit/c33a097997b0ae9882bd3a86ef35d6ad922b23cf)
:   [maven-release-plugin] prepare for next development iteration

## Release 3.2.2

### alarms

Shutting down dCache using `dcache stop` is now faster. 

### dcap

A pool that has gone offline and comes back up again may become
very slow to respond due to a large amount of superfluous error
messages to dcap clients that disconnected in the meantime. This
patch ensures a more responsive reaction to these cases by 
introducing a time-to-live value for such messages.

### frontend

In cases where very many alarms need to be processed by the frontend, 
they are now fetched in batches, ensuring better responsiveness of
the system.

The way in which services send large amounts of data to the frontend, 
as for example the active transfers or staging requests lists, has
been made far more efficient and performant. 

### pool

Error reporting was improved for cases of IO errors in pools.


### Changelog 3.2.1..3.2.2

<!-- git log 3.2.1..3.2.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[983e3644bb](https://github.com/dcache/dcache/commit/983e3644bbbb621916c662ed5d382a9e079545b8)
:   [maven-release-plugin] prepare release 3.2.2

[132d8fa428](https://github.com/dcache/dcache/commit/132d8fa428870629dcd33fca1de331fdb9c1701a)
:   alarms: fix shutdown timeout

[c1d1324c07](https://github.com/dcache/dcache/commit/c1d1324c077c77f69f601e4bc6c80cbb699c3331)
:   pool: avoid 'null' and other nondescript error messages

[520bcdf633](https://github.com/dcache/dcache/commit/520bcdf6339c3e6e710744eb1aca94a97a4d4718)
:   dcache-restful-api: change the way in which transfers and restores support paging

[a775365ef1](https://github.com/dcache/dcache/commit/a775365ef1d31671be47de4b99d0f63820981354)
:   [maven-release-plugin] prepare for next development iteration

[3236047d4d](https://github.com/dcache/dcache/commit/3236047d4d27c3113de10e1e576412bf86d2c7d9)
:   dcap: add TTL information to dcap messages

[0e9dd30126](https://github.com/dcache/dcache/commit/0e9dd301262ecb4297b15e7c8faddbc657f7e0de)
:   alarms: remove default value for LogEntry received

[b4676a9295](https://github.com/dcache/dcache/commit/b4676a9295e932c8ccb466f1999b51027249fc41)
:   dcache-restful-api: add offset and limit to fetch of alarms

## Release 3.2.1

### Changes affecting multiple services

Many dCache components use RemotePoolMonitor to provide fast access to
the information that PoolManager has about pools. In order to facilitate
system diagnosis, the 'info' admin command was augmented by information
about the current status of the RemotePoolMonitor.

### frontend

Nearline movers now display the elapsed time they ran for in the
dCache frontend.

The RESTful API has received support for disabling and enabling
of pools as well as killing movers.

Minor bugs in the history service were fixed.

The timeouts for the collectors run by the frontend service were
reduced to 1 minute (2 for the history service, which needs to 
ping all pools in an instance) in order to provide more immediate
change information in the frontend.

The RESTful API now offers access to the data about PoolSelectionUnit
that was previously available on the webadmin pages.

### history

In making the pool info service stateless, collection of timeseries 
information for queue status and file lifetime on the pools was
moved into a separate service (history).

When pools are unavailable to the history service, as is possible during 
restarts, it is possible that history data is lost. This patch corrects
that issue, so that history is preserved under all circumstances.

### pool

A bug in gfal2 results in FTP transfers being aborted some 50 ms after
being initiated.  This results in the door killing the mover shortly
after the pool received the PoolDeliverFile message.  If the mover is
not queued, but not yet fully started, this may lead to the pool
disabling itself. This patch corrects that problem, ensuring that
the pool continues to run despite any aborted transfers.

### system-test

The system-test admin interface configuration was updated to allow
admin logins after ssh user restrictions are now significant. 

### xrootd

In the 4.7 releases, the xrootd client started enforcing 
protocol requirements for kXR_login which, unfortunately, 
broke access to dCache. The xrootd client expects an answer 
with a 16-character session ID from the door and then the 
pool after the redirection. Without this ID, the client 
would retry (without success) repeatedly and appear to hang.

dCache's xrootd implementation has been augmented with the session
ID, enabling it to work with xrootd clients of version 4.7 and up.


### Changelog 3.2.0..3.2.1

<!-- git log 3.2.0..3.2.1 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[bd6004d84f](https://github.com/dcache/dcache/commit/bd6004d84fafd39e99d952065b3e3858eb88326a)
:   [maven-release-plugin] prepare release 3.2.1

[caeda8c243](https://github.com/dcache/dcache/commit/caeda8c2432ce17029c44dcabd4d8c203b976dd4)
:   many: add diagnostic information about remote pool monitor

[702caa2af1](https://github.com/dcache/dcache/commit/702caa2af18fc0b14ee045854ffcf7a127104080)
:   pool: dont disable pool if mover cancelled before open

[4b58778caa](https://github.com/dcache/dcache/commit/4b58778caae5fc60618bb7a27220e620db4bc1c3)
:   systemtest: authorise developer to login as 'admin' via ssh

[7a81aa71f0](https://github.com/dcache/dcache/commit/7a81aa71f0b8e8f9b4b7a08912919e4a4fa53110)
:   dcache-history: fix bug which forces overwrite of data when pool unavailable

[f34e87ccd9](https://github.com/dcache/dcache/commit/f34e87ccd9bdda6a3eab1c0fd0f08f613b9a305d)
:   dcache-restful-api: fix aggregation issues for pool info and move aggregation to history service

[8a012e6576](https://github.com/dcache/dcache/commit/8a012e6576edc41c98d3c2cd2e6ad15f20759c62)
:   dcache: add elapsed time to NearlineData JSON

[78493a3d86](https://github.com/dcache/dcache/commit/78493a3d86c5970c85d350f12ccdebbeeafcc99a)
:   dcache-restful-api: fix configuration bug in billing collection utils

[996a1e2310](https://github.com/dcache/dcache/commit/996a1e23104cb7614647317b6e75e52e2f10bc61)
:   [maven-release-plugin] prepare for next development iteration

[871182acec](https://github.com/dcache/dcache/commit/871182acece037945fafb47087e9aa3178c2a514)
:   dcache: fix NPE bug in TransferInfo.toFormattedString

[614a805535](https://github.com/dcache/dcache/commit/614a805535df4a0fa0bebd88013bb937e3c39ecb)
:   dcache-restful-api: avoid NPE in PoolDataRequestProcessor

[41767ab043](https://github.com/dcache/dcache/commit/41767ab0431d9f30b898023c641a29fe1c10f00f)
:   dcache-restful-api: lower collector timeout defaults

[32336bacbb](https://github.com/dcache/dcache/commit/32336bacbb5e27fc33e7c365b4de9d32736da861)
:   dcache: fix bug in PoolSelectionUnitV2 match()

[4e8edebf38](https://github.com/dcache/dcache/commit/4e8edebf3821dcea3d9bc4645f50903d5397da07)
:   dcache-xrootd: Fix login handshake to support xrootd clients (> 4.7.0)

[52eaf075c5](https://github.com/dcache/dcache/commit/52eaf075c5dc071030c62453b521e1fb8acc9784)
:   dcache-restful-api: Add POST for enable/disable or kill mover to pool info service

[34720e0c43](https://github.com/dcache/dcache/commit/34720e0c4317ce06fc1e257b3aa72ac7206dc1ad)
:   dcache-restful-api: add selection resource and providers

[31930df123](https://github.com/dcache/dcache/commit/31930df123df1f16d6e97f8b04e069e10859f8db)
:   dcache-xrootd: (WIP) Add support to the xrootd (kxr_)posc flag in (kXR_)open.

## Release 3.2.0

### Authentication

We've added support for macaroons in the webdav door.

Macaroons are a new idea that comes from research by Google.  They are
bearer tokens that allow the bearer to do something, without
requiring the users to identify who they are.

A macaroon may be limited by caveats which only allow the bearer to do certain
things.  These limitations could be nearly anything.  A caveat
could make the macaroon time-limited (e.g., only good for five
minutes), location-limited (e.g., only from a particular IP address),
or anything else.  You can learn more about macaroons from an Air 
Mozilla talk called [Macaroons: Cookies with Contextual Caveats 
for Decentralized Authorization in the Cloud] (https://air.mozilla.org/macaroons-cookies-with-contextual-caveats-for-decentralized-authorization-in-the-cloud/).

Macaroons are a building-block technology, so have many potential
uses.  They may be used by a web-portal to allow its clients (of which
dCache knows nothing) direct access to files stored in dCache.  They
may be used to authorise third-party transfers without requiring X.509
credential delegation.  They may be used to create a link that allows
sharing of resources. There are likely many other uses for them.

Requesting a macaroon is as simple as making a POST request with a
Content-Type of `application/macaroon-request`.  This returns a
time-limited (but otherwise unlimited) macaroon.  Additional caveats
may be added by dCache (included as JSON in the POST request) or
subsequently by anyone else.  dCache supports a rich set of possible
restrictions, including namespace (e.g., only a particular file or
directory), time (e.g., only the next 5 minutes), location (e.g., only
from a particular IP address or subnet), and activity (e.g., only
downloads).

Creating a macaroon takes very little CPU and no storage in dCache.
Therefore it is safe to request many macaroons; for example, a web
portal could create a seperate macaroon for every file its user wishes
to view.

A macaroon is a bearer token.  To use a macaroon in an HTTP request,
just add it to the Authorization header value with a prefix `bearer`,
just like with an OpenID-Connect access-token.

Unfortunately, not all HTTP clients allow a user to add a bearer token
to the Authorization HTTP header; for example, a user cannot easily
include a bearer token in their web-browser.  To support these
clients, dCache accepts URLs that include the 'authz' query
parameter, with the value used as a bearer token (e.g.,
`https://dcache.example.org/path/to/file?authz=<token>`).  This works
for both OpenID-Connect access-token or macaroon.

The webdav directory browsing has been updated so that any query
parameters in the original request are included in all the generated
page's navigation and download links.  This makes it easy to navigate
through the webdav interface using a macaroon or OpenID-Connect
access-token: just add `?authz=<token>` to the URL.


### Roles

It may be desirable for dCache to behave differently for the same user
between different login sessions.  For example, an administrative user
may wish sometimes to interact with dCache as a normal user (for
testing purposes or to reduce the risk of mistakes), and other times to
interact with dCache with effectively root-like privileges.

This functionality has been enabled by introducing the concept of user
roles in dCache. A user may log in requesting zero or more roles and the
login process chooses which roles (if any) to enact.

For the HTTP-based services (webdav and RESTful), roles can be
requested by appending to the username a '#' followed by a comma-separated list;
for example, user 'fred' wishing to adopt 'role-a' and
'role-b' would authenticate with the username 'fred#role-a,role-b'.

This release introduces limited support for the 'admin' role.

The 'admin' role is intended to give users root-like permissions without
the user knowing the root credentials and with the user's
identity still being bound to that user.  The result is that the user
with the 'admin' role is able to do everything, but files created by that
user are still owned by that user and log entries show which user
made any changes.

An 'admin' role user has a root directory of `/` and no restrictions.

The functionality is enabled by adding a new gPlazma session plugin, 'roles', to
the `gplazma.conf` file, like this:

```
session  required    roles
```

A new property
```
gplazma.roles.admin-gid = 0
```
has been added to `gplazma.properties`. A user must be a member of the above specified
group to be authorized to obtain the admin role.


### External networking

The handling of external connections has changed for some protocols.

The SRM network configuration was simplified, and dCache can now work
with multiple SRM services on different ports.

The deprecated configuration properties `srmmanager.net.port` and
`srmmanager.net.local-hosts` are no longer needed.

### admin ssh public keys

In previous versions of dCache, any user who has their ssh public key
in the `admin.paths.authorized-keys` file
(`/etc/dcache/admin/authorized_keys2` by default) can log into the
admin interface as any user.

With this version of dCache, a public key is limited to authenticating
as a single user.  The standard ssh public key format does not have
any way to describe for which user the line allows authentication;
therefore, dCache uses the comment field to provide this information.

The comment field appears after the base64-encoded text of the public
key.  dCache requires the comment contains the desired username
followed by an `@` symbol; without this, the line is ignored.  The
text after the `@` does not matter.  The username describes for which
user the corresponding private key may be used to authenticate.

The following (truncated) line shows an example `authorized_keys2`
file that allows the use of a public key to authentication as user
`admin`:

```
ssh-rsa AAAAB...fPQ== admin@localhost
```

### Internal networking

Network communication between core and satellite domains has, until 
now, been unencrypted. dCache 3.2 adds the possibility to use TLS 
encryption between domains, which should be extremely helpful for
building larger, distributed setups.

A number of new configuration properties control encrypted cell
communication. 

Set `dcache.broker.core.channel.security` to `none` in order to 
listen only for plain-text communication on `dcache.broker.plain.port`, 
to `tls` in order to listen only for TLS encrypted communication 
on `dcache.broker.tls.port` or to `none,tls` in order to listen 
for both plain and encrypted communication.

`dcache.broker.core.client.channel.security` and `dcache.broker.satellite.channel.security`
can be used to enable encryption between core and satellite domains. 

In order to ease managing encrypted communications, the LocationManager
cell, `lm`, now has three new commands available: `ls`, `get core-config`
and `set core-config`, which can be used to query and set the 
operating mode for domains.

Regarding backwards compatibility, the introduction of TLS encryption
deprecates the `dcache.broker.port` property. Satellite domains which 
do not receive a configuration update can still connect to updated 
core domains which listen to plain communication, and core domains 
which are not updated can still connect to updated core domains.
 
### Admin improvements

The `ps` command of the System cell has been overhauled. In particular,
the output of the `-f` option has been cleaned up and extended.

The admin cell now generates access log events containing connection and
disconnection, as well as authentication, events.

Key-based authentication has been improved by enforcing that a
particular key can only log in with the user name specified in the
`authorized_keys2` file. Upon upgrade, admins should review this file
and ensure that keys are mapped to the correct user name.


### Namespace

Tags are now reference-counted like any other filesystem object. This
avoids an expensive database query upon file deletion that in some
cases has led to bottlenecks, in particular when PostgreSQL statistics
were inaccurate. Upon upgrade, the reference count for existing tags
has to be populated, which may take a little while on large databases.


### Checksum handling

Two improvements have been made.  The first has to do with what happens when a
client provides a checksum.  In this case, dCache now verifies and stores the
provided checksum as well as computes and stores the checksum of the type
configured by the admin in the pool setup.

The second has to do with interoperability between clients requesting
different checksum types (this mainly derives from the Globus MD5 requirement).
The FTP door has been modified to compute on the fly a missing checksum required
by the client.  This way, files written by a protocol requiring ADLER32
can be read by clients requiring MD5, and vice-versa.  This fix requires
updating only the FTP door.

Finally, an admin command

```
    get file checksums <pnfsid>
```

has been added to PnfsManager to display multiple checksums.


### RESTful api

With this release, information that has traditionally been made available via
the legacy httpd and webadmin pages will also be accessible via REST apis.

A full description of the paths and parameters for each RESTful service, along
with example JSON output, will be published separately on the dCache GitHub Wiki.

Included in this release are the apis and supporting services for alarms,
billing, cell info, pool and pool group info, active transfers and
tape restores/stages.

An illustrative example:

```
    curl -k -u arossi#admin:xxxxx 'https://fndcatemp1.fnal.gov:3880/api/v1/pools/dmsdca22-7?info=true'
```

The request is for the basic information concerning a pool; the JSON object
returned includes cell information, pool configuration/setup information,
pool cost and request statistics, space statistics, sweeper statistics, etc.
There are additional parameters for requesting histogram data on pool requests,
space usage, and file lifetime on the pool, as well as listings of movers,
stores and restores.

Notice the user name in the curl command. Use of these services requires admin
privileges. Here, it is presumed that the user has been accorded the admin role;
the '#' after the login name indicates a request to express that role for this
session.  See the section on Roles above for a fuller explanation.

In addition to the new admin services, a small bug has been fixed in the
handling of QoS updates on the namespace service, so that the request correctly
considers the current locality of the file.


### gPlazma

The X.509 plugin has been updated to extract email addresses from the Subject Alternative
Name. This extracted information is now part of the principals identifying the
user, which is available to all dCache components like webdav, frontend etc.


### Frontend and WebDAV

dCache-view, which is part of Frontend services, has the following new features
and fixes:

- display of user profile information
- added support for user roles
- drag and drop for moving files and directories
- user login with open-ID connect
- upload of files and directories using drag and drop
- a customised context menu replacing the hover-context
- users stay in their current path after successful authentication.

Since the gPlazma plugin has been updated to extract the user's email, Frontend clients
can now discover a user's email addresses, if any are known.

Unnecessary Frontend backward-compatible configuration data, consumed mainly by
dCache-view, were dropped.

For WebDAV and Frontend doors non-/ root has been fixed, ensuring that users with
`non-/ root` directory will see the same files and directories under WebDAV/Frontend
as with other protocols. Also, Frontend 'mkdir' and 'mv' operations are updated
to honour door and user roots.


### Obsolete services

dCache 2.16 introduced the next generation replication service called
the resilience manager. At that time, we announced that the replica
manager would eventually be removed. We try to keep what we promise,
so now the old service is gone. If you haven't migrated yet, you
should do so before upgrading to dCache 3.2.


### systemd support on Debian-based systems

Traditionally, we have shipped our own scripts to daemonize
dCache. This made it easier to support many different distributions as well
as the multi-process architecture of dCache (in other words,
it was more fun to implement our own than to study how each
distribution did it). For better or worse, the mainstream Linux
distributions have all moved to systemd, so it now becomes hard to justify why
dCache shouldn't make use of the functionality offered.

As a first step towards systemd, this release recognizes systemd on
Debian based systems. If detected during installation, part of the
dCache runtime management scripts are replaced by callouts to
systemd. A systemd generator scans the dCache configuration and
creates a systemd unit for every dCache domain. systemd fully and
directly manages each dCache process. This means:

- No custom wrapper scripts; there is now only one process per dCache domain.

- systemd monitors the Java process and restarts it if it quits directly. There is no
  separate 'restart file' to suppress the dCache auto-restart mechanism.

- No PID files, as systemd tracks the dCache processes directly.

- systemd captures the stdout/stderr output of the process and directs
  it to journald. The default journald setup passes the log on to
  syslog.

- systemd drops privileges of the Java process during startup. systemd mounts
  `/etc`, `/usr`, `/boot`, and `/home` read-only for the dCache process, preventing
  dCache from writing to any of these directories. *Note*: This is important to
  remember if you happen to use `/home` for pool data or tape integration.


#### Starting and stopping dCache domains

Whenever the list of dCache domains changes, the dCache units need to
be regenerated. dCache will do this automatically whenever its
`dcache` script is invoked as root, but one may also do this manually
by running `systemctl daemon-reload`. This also fixes a long standing
issue with dCache loosing track of running domains that are removed
from its configuration.

The `dcache` script has been updated to call out to `systemctl` to
start and stop domains. One can continue to use these commands to
manually start and stop domains. Since the systemd support replaces
the classic SysV init script, auto-startup during boot has changed:
the generated systemd units are not flagged as enabled
automatically.  Although one can start and stop these domains, they do
not start automatically. Use the `systemd enable` command on every
domain that should start automatically. In contrast to before, one can
select exactly which domains should start automatically.


#### Logging

Since dCache by default logs to stdout, and since systemd redirects
stdout to journald and thus to syslog, dCache logs now end up in
syslog. An rsyslog configuration is included to seperate the dCache
log output from other syslog messages. Each domain logs to
`/var/log/dcache@DOMAIN.log` where DOMAIN is the dCache domain. The
file cannot be placed in `/var/log/dcache` due to permission
requirements enforced by rsyslog. The default logrotate setup is
adjusted to rotate the new files. It is no longer necessary to use the
`copytruncate` option, which makes logrotation more efficient, uses
less disk space, and avoids the risk of losing log entries.

Since syslog includes timestamps automatically, the default log format
is modified upon upgrade to not include the timestamp in the dCache
output. If the log format has been customized, it must be adjusted. Since
the log format changes anyway, we also adjusted how the NDC is
logged.

If you really liked the old log format and placement, you may
reconfigure the logging in `/etc/dcache/logback.xml` to log directly
to `/var/log/dcache` rather than stdout. If you do, you should ideally
use the logback logrotation rather than rely on logrotated.


#### RedHat

Nobody has bothered to upgrade the RedHat packaging with systemd support
yet. Volunteers are welcome.


### FTP

The FTP door was updated to allow pipelining of commands. Since the
FTP protocol expects some commands to have immediate effect – i.e.,
before the previous commands have finished – this is not as trivial as
it sounds. We believe we have nailed it, both fixing bugs in the
existing implementation and avoiding the bugs other services have in
their attempt to support pipelining.

The immediate effect is better compatibility with Globus Online.


### Space usage

Continuing the WLCG quest to reimplement the features of SRM in other
protocols, dCache now exposes space reservation stats through both FTP
and WebDAV.

For FTP, the `SITE USAGE` command is implemented, supplying information
from SpaceManager using reservations with a description that matches
the TOKEN argument (if a TOKEN was given) or that are bound to the
supplied path (if TOKEN was omitted).

For WebDAV, reservations are exposed as RFC 4331 quotas and can be
queried as such.


### NFS

Updated handling of directory listings. This should avoid situations when the client receives a BAD_COOKIE
error caused by server-side cache invalidation. The stage and p2p operations are handled the same way and
are more client-friendly. The 'show transfer' admin command supports filtering based on client ip, pnfsid
and pool name.


### Xrootd

The xrootdfs FUSE driver immediately closes a file on creation,
then reopens it to write. The behavior of the xrootd door in dCache
has been modified to allow new empty files to be overwritten, thus enabling
file copies from xrootdfs FUSE into a dCache mounted filesystem.


### Pools

Pools can use mongoDB to store metadata. This can be enabled by the

```
pool.plugins.meta=org.dcache.pool.repository.meta.mongo.MongoDbMetadataRepository
```

configuration option. Additional properties control mongoDB server location, database name and
collecton name:

```
pool.plugins.meta.mongo.url=mongodb://localhost:27017    
pool.plugins.meta.mongo.db=pdm
pool.plugins.meta.mongo.collection=poolMetadata
```

A single shared mongoDB instance can be used for all pools.

NOTICE: in production, mongodb must run in a cluster in order to provide high
performance and availability.


### srmmanager

Most SRM operations are only allowed on local SURLs.  Only third-party
copying allows non-local SURLs; however, there at least one of
source/destination SURL-pairs to be local.

In previous versions of dCache, the properties `srmmanager.net.port`
and `srmmanager.net.local-hosts` allow the srmmanager to decide which
SURLs are local.  In many cases, this information is redundant, as srm
services already publish this information within dCache.  Therefore,
with this version of dCache, the srmmanager will consider SURLs local
if there is an srm door that advertises it listens on that host and
port.

Sites may have a DNS alias or have some proxy service to which SRM
clients connect.  Under these circumstances, the client will not
connect to the FQDN of the machine hosting the srm service, but some
other address (that of the DNS alias or the proxy service).  To
support this, the `srm.loginbroker.address` and `srm.loginbroker.port`
properties must be configured correctly so that at least one srm
service advertises the hostname clients use when connecting to dCache.

### Changelog from 3.1.1 to 3.2

<!-- git log 3.1.0..3.2 -no-merges -format='[%h](https://github.com/dcache/dcache/commit/%H)%n:   %s%n' -->

[636b169abb](https://github.com/dcache/dcache/commit/636b169abbc08ff23c8147978acdd3fea3452544)
:   webdav: fix regression in OPTIONS response

[60ddde1934](https://github.com/dcache/dcache/commit/60ddde1934b4444b271ef002efe882e4504500b9)
:   dcache (collection service): handle execution exceptions correctly

[ad7fdddfc0](https://github.com/dcache/dcache/commit/ad7fdddfc086fe0d458d8397e9d12b439d933e48)
:   libs: update nfs4j to version 0.15.2

[129398d24e](https://github.com/dcache/dcache/commit/129398d24e63c81628df8bf24bdb0742668e432f)
:   Update FileOperationHandler.java

[8951fd2b77](https://github.com/dcache/dcache/commit/8951fd2b776234789ca22885a773843b252152dd)
:   pool: fix data integrity regression for 3rd-party GridFTP pull transfers

[c205175281](https://github.com/dcache/dcache/commit/c2051752811788ff50846035004154172ff76f43)
:   pool: fix regression in GridFTP OPTS CKSM command

[d7c5d2d63b](https://github.com/dcache/dcache/commit/d7c5d2d63b17800477abfe27a8f76fff5112dc50)
:   common: fix time computation in TimeseriesHistogramTest

[c6bba6d32d](https://github.com/dcache/dcache/commit/c6bba6d32d971165b3293bf0026a5cc0ceef33be)
:   resilience: handle file deletion during scan correctly

[7826205a32](https://github.com/dcache/dcache/commit/7826205a3268dba2db8ac1b9879e8f82eb668cba)
:   pool: ceph: ignore file-not-found on remove

[16f408d5a4](https://github.com/dcache/dcache/commit/16f408d5a4cdbd0bf5044c688b258ef2f0aba0e4)
:   dcache-restful-api: return incomplete info instead of throwing NoSuchElementException

[17721ed564](https://github.com/dcache/dcache/commit/17721ed564a393736d9a4379b85c22d9635842ef)
:   resilience: add pool operation logging

[2351b6779d](https://github.com/dcache/dcache/commit/2351b6779d224c5737cfd50c0b8a50d088223f36)
:   resilience: handle storage unit NoSuchElement failure

[fd502cd927](https://github.com/dcache/dcache/commit/fd502cd927db04d13affc7817a72f42f02dae474)
:   srmclient: parameterise shell path of srmclient utilities

[3a4c2ead2d](https://github.com/dcache/dcache/commit/3a4c2ead2d1a8d12b307541988524d2699954508)
:   nfs: shutdown callback ScheduledExecutorService on shutdown

[7ee44eea7e](https://github.com/dcache/dcache/commit/7ee44eea7e3c82d1f723e474306db0df9b68ac7d)
:   libs: update to nfs4j-0.15.1

[53068de346](https://github.com/dcache/dcache/commit/53068de34668b78d0ff9c2ac311495dc4d2dc8a8)
:   webdav: adjust header parsing to be case insensitive

[1d8239fade](https://github.com/dcache/dcache/commit/1d8239fadeed1e91592b18a6fb37a38975d5bb8d)
:   cells,dcap,ftp: Support for accepting connections from an allowed list of subnets and IP addresses

[dd671b22b9](https://github.com/dcache/dcache/commit/dd671b22b9f0c693e1a6839ef15d9a2ff0e3af8d)
:   resilience: handle all cases where no locations for file may be discovered

[04e32327d7](https://github.com/dcache/dcache/commit/04e32327d7a3529bcf0f3ec42cbc3c0899db3bf4)
:   resilience: distinguish correctly between file not in repository and file not found

[ffb85de53c](https://github.com/dcache/dcache/commit/ffb85de53cb74432a07421cf79c5fafe45e3990e)
:   resilience: fix bug in formatting and handling of cache exception types

[26d939d611](https://github.com/dcache/dcache/commit/26d939d6118cf9c1036be21eac4112b1def77ee6)
:   dcache-restful-api: extract the locations from storage info and add to JSON attributes

[c824efb49d](https://github.com/dcache/dcache/commit/c824efb49d6900a25936371a43f57f28d848780c)
:   common: fix bug in histogram max index computation

[12b9a8ada0](https://github.com/dcache/dcache/commit/12b9a8ada0751bea0e5e8438baa2775acc15e791)
:   srmclient: remove non-functioning script with BASH dependencies

[c972cdcc12](https://github.com/dcache/dcache/commit/c972cdcc1297180a8d7236473d04e744187a3e69)
:   [maven-release-plugin] prepare branch 3.2

[366fb071da](https://github.com/dcache/dcache/commit/366fb071da8ef49bb6a5a7527041e5659d4247e7)
:   dcache-restful-api: add missing aggregated cost data to JSON

[d59342ab7e](https://github.com/dcache/dcache/commit/d59342ab7e578a60a9226a2d7546247e12251ae6)
:   srm-server: refactoring slf4j logging messages

[39f10cda45](https://github.com/dcache/dcache/commit/39f10cda4523271c47d7f984277ada1fc8b763f0)
:   srm-common: refactoring slf4j logging messages

[345dbfbbd5](https://github.com/dcache/dcache/commit/345dbfbbd5c457f4d38fd325d53ea4104ae04824)
:   nfsv41door: add filter method for show transfers command

[db17e99d25](https://github.com/dcache/dcache/commit/db17e99d254e7edf2ba5e06c75ffb55b0470fde6)
:   cells: refactoring slf4j logging messages

[46b799062e](https://github.com/dcache/dcache/commit/46b799062e6d425c829f723cab1daa4b7bd4c9aa)
:   dcache-chimera: refactoring slf4j logging messages

[a7497f3b57](https://github.com/dcache/dcache/commit/a7497f3b571683d3d746aaef54e789b9ef65286e)
:   ssh: add username check to pubkey authentication

[266caa6228](https://github.com/dcache/dcache/commit/266caa62281a8b32d55adf68dd938be5c8690680)
:   ftp: update exception logging to include context

[728e32a9d8](https://github.com/dcache/dcache/commit/728e32a9d86248dac48f42e7b7a89a51e005a440)
:   gplazma2-grid: refactoring slf4j logging messages

[2626ed9619](https://github.com/dcache/dcache/commit/2626ed9619eacdf5f58b1cdf37ef23557da970b6)
:   gplazma2: refactoring slf4j logging messages

[aaa7f3cc40](https://github.com/dcache/dcache/commit/aaa7f3cc4028e82d103491b5a0dc9271119877cd)
:   dcache-xrootd: refactoring slf4j logging messages

[a705d04296](https://github.com/dcache/dcache/commit/a705d042965a810bf69bb3839d74f0cc96b1a631)
:   dcache-webdav: refactoring slf4j logging messages

[7bca95e137](https://github.com/dcache/dcache/commit/7bca95e137653329bdff5f652fb13ff2e2a38f72)
:   dcache-webadmin: refactoring slf4j logging messages

[6fe5ff78b5](https://github.com/dcache/dcache/commit/6fe5ff78b50060b572c458601e7fc262dff59359)
:   corrected requested typo

[4972298c18](https://github.com/dcache/dcache/commit/4972298c18a9d7510aded5b171cebf05f76b8a09)
:   dcache-spacemanager: refactoring slf4j logging messages

[21a077d341](https://github.com/dcache/dcache/commit/21a077d341a141385f34f53a5d386aa6349fdf09)
:   dcache-info: refactoring slf4j logging messages

[a337212e36](https://github.com/dcache/dcache/commit/a337212e3672bbbb5a90da5674a5db292e555bad)
:   dcache-ftp: refactoring slf4j logging messages

[c68428c074](https://github.com/dcache/dcache/commit/c68428c0743790e9e0f4229517b6df8b12c7d31d)
:   dcache-dcap: refactoring slf4j logging messages

[e32bf805f4](https://github.com/dcache/dcache/commit/e32bf805f4723fa858c8e7795749d0d2687d4b29)
:   dcache: update Subnet utility class to have a isValid method

[7f5fe17d6c](https://github.com/dcache/dcache/commit/7f5fe17d6c1af7bb8aebcfc1ae03a564bf1abe23)
:   srmmanager: reduce network configuration

[e0867e15f0](https://github.com/dcache/dcache/commit/e0867e15f00355ec752167d0da91cf2a9223e47d)
:   pool: fix minor errors in PoolInfoRequestHandler

[7fb9b61d44](https://github.com/dcache/dcache/commit/7fb9b61d4419a5866908d6dc4e0d5da8c3013cbf)
:   fix RPM package building and dangling reference in text

[b2cbf3016b](https://github.com/dcache/dcache/commit/b2cbf3016b4a47bfce9496a54e0aef6a8d454a46)
:   core: Add Remote-Host-Restriction capability to Ssh2Admin PublicKeyAu… (#3431)

[a768abfae7](https://github.com/dcache/dcache/commit/a768abfae7457717edd5d2ddc8740d5cda3dafbb)
:   dcache-core: refactoring slf4j logging messages

[17154424c2](https://github.com/dcache/dcache/commit/17154424c2d96da769d541da5819ecd3dcd88bf4)
:   dcache: added a decorator for RepositoryChannels to get IO statistics (#3430)

[9eb63b13b6](https://github.com/dcache/dcache/commit/9eb63b13b6fbeeced447de5da27b07636451cae4)
:   acl: refactoring slf4j logging messages

[2761aca19d](https://github.com/dcache/dcache/commit/2761aca19dcfcaaa060c30f2f4bfbc9919d22993)
:   skel: remove legacy Berkeley DB jar and corresponding preupgrade-script

[536dbdf652](https://github.com/dcache/dcache/commit/536dbdf65259943c7fb858fafa32fc743b647e89)
:   inserted again requested changes

[154709991e](https://github.com/dcache/dcache/commit/154709991ebdb6f05e2c9ee514e93af1233204af)
:   Motivation: Prior to Java 1.5 enums did not exist, thus integer constants were used. These constants can now be replaced by enums.

[38c1144452](https://github.com/dcache/dcache/commit/38c11444529df1961ea50fbd81b52c2e89b93e42)
:   ssh: add logging to domain access log file (#3427)

[5b1f65b0ce](https://github.com/dcache/dcache/commit/5b1f65b0ce0c9ff2495f727e233cff3aa40fa2f5)
:   dcache: introduce history service with pool timeseries component

[0f2188aab9](https://github.com/dcache/dcache/commit/0f2188aab9bc8ba2241538eeea584413d53fcbcb)
:   dcache-restful-api: pool info service implementation

[fa3d4eb0f7](https://github.com/dcache/dcache/commit/fa3d4eb0f78c998e736e069cff3041f866eb0bb6)
:   dcache-restful-api: move admin collector service abstractions to dcache module

[213893df48](https://github.com/dcache/dcache/commit/213893df4849eb8b53d6b35d9caa0bbd98d44a17)
:   dcache-common: refactoring slf4j logging messages and logger variable name

[311f09acfa](https://github.com/dcache/dcache/commit/311f09acfa27328697bf5d9ef7a3e4049623aec1)
:   chimera: fix broken commit e064f5577b

[e064f5577b](https://github.com/dcache/dcache/commit/e064f5577bdb324d5b7efb9d60112ebf53fe6d83)
:   libs: switch to nfs4j-0.15

[e88c1e31c0](https://github.com/dcache/dcache/commit/e88c1e31c01dc62aad52be68edc5635879908777)
:   acl: refactoring slf4j logging messages Motivation: with normal string concatenations in log-messages strings are always build, regardless if log-level is activated or not. with parameterized log-messages the strings only become build, when the log-level is activated;

[625ff42cfb](https://github.com/dcache/dcache/commit/625ff42cfb586a49cc59fe743f491b8e56ef6e09)
:   acl-vehicles: refactoring slf4j logging messages

[a10786c84a](https://github.com/dcache/dcache/commit/a10786c84adee160dcf817ae5105ed5cdef3cf01)
:   chimerashell: use chimera.db.* options as defaults

[cf9154131b](https://github.com/dcache/dcache/commit/cf9154131bfebfaf33ede93eb35a5ec370757d4c)
:   cells: better handling of rogue domains with badly formatted dCache versions

[79161ee475](https://github.com/dcache/dcache/commit/79161ee475ce612330fa6addc35ccc076672aaf9)
:   configuration: update zookeeper configuration with hints

[a1a2e50d4b](https://github.com/dcache/dcache/commit/a1a2e50d4b7d8bfddd14306bf7c62e4cae3651e7)
:   pool: suppress unecessary 'jtm set timeout' in setup

[d5adeb363e](https://github.com/dcache/dcache/commit/d5adeb363ec5068e7a06e90cc7983d282810b360)
:   pool: fix loading 'setup' that requires queues created by 'pool.queues'

[38d4249f98](https://github.com/dcache/dcache/commit/38d4249f98cd8fc1b14a56c27f73757e0cbcddac)
:   pool: consolidate error-handling in pool IoQueueManager admin commands

[13074ca921](https://github.com/dcache/dcache/commit/13074ca92101eadbdde54e5d29be55be46c206a1)
:   fix minor tyo

[df1bc6d682](https://github.com/dcache/dcache/commit/df1bc6d682ecff9a42d0def46461a129b3d4cbe1)
:   various: miscellaneous minor adjustments from restful commits

[858fbfa6c1](https://github.com/dcache/dcache/commit/858fbfa6c1494665de3aa7f3e7091df7a7899b1f)
:   webdav: avoid stack-trace on bad user requests

[f106f7a8df](https://github.com/dcache/dcache/commit/f106f7a8df13461fb3af249ba8e51991e6ed7e26)
:   systemd: start service after ZooKeeper

[3f30893ac2](https://github.com/dcache/dcache/commit/3f30893ac2a674c892afff4155e9245b969f579e)
:   Martin (#3403)

[e7946a7130](https://github.com/dcache/dcache/commit/e7946a7130e61b2a148a0c27a58abf7aace0c217)
:   Vuong-Test (#3401)

[7e29c99ec6](https://github.com/dcache/dcache/commit/7e29c99ec61adac9de1f0fb0e88d6e495449deb3)
:   Signed-off-by: local <local@lp-hrz-d209-linux.wh.f4.htw-berlin.de>

[506e612582](https://github.com/dcache/dcache/commit/506e612582fe195351cb8b50a97203fc73770af7)
:   dcache : added reedme.md

[27d0d5a837](https://github.com/dcache/dcache/commit/27d0d5a837e432f39c88d84769210423142ca98f)
:   gPlazma2-voms: Add README for Module Info

[bd8265e0bf](https://github.com/dcache/dcache/commit/bd8265e0bfbbff3c239f5e612fce87ec086f0227)
:   webdav: add README file to gplazma-nis module

[d5897c1cae](https://github.com/dcache/dcache/commit/d5897c1cae81de00dfc53901afa62d0210d2942b)
:   srm-common: add README file

[feb41dec5c](https://github.com/dcache/dcache/commit/feb41dec5cdb4e2141dab19a9b5f5eb6d9e01e8d)
:   Motivation: Test-Readme for gplazma2-roles

[c83e3dd7d4](https://github.com/dcache/dcache/commit/c83e3dd7d4a133943607a31c0573493fbb0e5d5b)
:   cells: readme file for testing

[6d1833b204](https://github.com/dcache/dcache/commit/6d1833b204f0fdd4a019a7aaf6ded4599d0bdcec)
:   Signed-off-by: Lotta Rüger <l.r.@Lottas-MacBook-Pro.local>

[df1ac51260](https://github.com/dcache/dcache/commit/df1ac51260cb8aa01c15b5872528061edf305825)
:   common: HTW-Berlin Big Data Test Commit

[2a8da23880](https://github.com/dcache/dcache/commit/2a8da23880e55b981e9c68d05d9b5739235e043e)
:   alarms: guard against NPEs on LogEntry getters

[af3d12aa4d](https://github.com/dcache/dcache/commit/af3d12aa4d484c96187ea420bb9767b4c48ff4c0)
:   admin: Fix Inconsistent ACL enforcement, RT 9207

[28e093eec0](https://github.com/dcache/dcache/commit/28e093eec05405c210372ddd6223467a7c0d27b8)
:   nfs: add a possibility to specify offered layout types

[68f49618a9](https://github.com/dcache/dcache/commit/68f49618a97b6631d321b7440e8b8b6ac70f8337)
:   system-test: add list of allowed client origins

[770082b527](https://github.com/dcache/dcache/commit/770082b527837e7187960c169ce9a8bf2718fe50)
:   systemtest: update systemtest to point to a reasonable WebDAV door

[6ee63306d6](https://github.com/dcache/dcache/commit/6ee63306d66a3ce83287abde3b7697295d1d3179)
:   pools: add support for requesting live data for histories

[f75794c68c](https://github.com/dcache/dcache/commit/f75794c68c4d5bb91a0080fda272dadb55358395)
:   common: fixes potential NPEs in histogram metadata

[56bc72919e](https://github.com/dcache/dcache/commit/56bc72919e959d55b9095a915e8a00ca8dcbe62e)
:   webdav: fix more regressions with CredentialSource.NONE

[05026a1511](https://github.com/dcache/dcache/commit/05026a1511549da6271318f986488f4049d7773d)
:   pool: fix regression in HTTP third-party transfer with redirection

[355ff88135](https://github.com/dcache/dcache/commit/355ff88135f11ddc8d8c6cf591aa8e1d47885a11)
:   systemtest: fix populate script for when systemtest already exists

[13bb5878c5](https://github.com/dcache/dcache/commit/13bb5878c553a7bedd8e6d0619787a52204a4577)
:   webdav: fix error recovery for macaroon users without DELETE

[aabac213aa](https://github.com/dcache/dcache/commit/aabac213aa5db89acd82921f005217ad87795ee5)
:   macaroons: add implicit authorisation of READ_METADATA

[fbae70d684](https://github.com/dcache/dcache/commit/fbae70d684b4069678c86ed7bb7e354076c3fb93)
:   dcache-restful-api: simplify alarms api and service

[7e5e81e173](https://github.com/dcache/dcache/commit/7e5e81e173807cee29fbe7a8ced800872f874901)
:   webdav: fix regression in third-party copy with no delegation

[52a409c136](https://github.com/dcache/dcache/commit/52a409c136f02b9f70d92fc72f7c4a936270785e)
:   dcache: release dcache-view version 1.3.1

[b70b0d946a](https://github.com/dcache/dcache/commit/b70b0d946a9ff9825a0edd9463bdc3c7e30f4f61)
:   dcache (pools): Add messaging support for frontend/restful pool info service

[891060e863](https://github.com/dcache/dcache/commit/891060e8632d183c08215a365a367f5b3f4b2698)
:   dcache-restful-api: removing disk-based caching from CellInfoService

[27841575f4](https://github.com/dcache/dcache/commit/27841575f45a78260dead1d537d61083fda7d6d6)
:   configuration: update description for replicable

[0b21d9d5e4](https://github.com/dcache/dcache/commit/0b21d9d5e491f056b868fe86c5a6a307ecbdcd4e)
:   dcache-restful-api: fix handling of no route to cell in alarms collector

[c5199298a6](https://github.com/dcache/dcache/commit/c5199298a61cec474740f374dbc09bd1277eceff)
:   debian: Adjust how NDC gets logged

[c668b85cbc](https://github.com/dcache/dcache/commit/c668b85cbc6cf8e8d75d4d02a25071890296f2be)
:   gplazma-oidc: improve code-style for oidc plugin in accordance with the dCache code style guideline

[96e14cece5](https://github.com/dcache/dcache/commit/96e14cece55555cc82e923f878747be0b20d6f37)
:   srm/srmmanager: fix srmPing confusion

[56fd242379](https://github.com/dcache/dcache/commit/56fd24237929ca3afc355f63473e1bb2dec97544)
:   dcache-restful-api: add api and implementation for alarms service

[bdd188b536](https://github.com/dcache/dcache/commit/bdd188b536f6e068786374c5bfc64dc5a9c39927)
:   dcache-restful-api: fix misnamed restores command

[dfe1b89c38](https://github.com/dcache/dcache/commit/dfe1b89c386b5cc0f4d5abd561bac9546a667998)
:   dcache-restful-api: fix restore service initialization

[306c0d06ab](https://github.com/dcache/dcache/commit/306c0d06ab1290220493088bed4d71a14b58cbf3)
:   dcache-restful-api: add service implementation for collecting staging/restore info

[af7136e45d](https://github.com/dcache/dcache/commit/af7136e45d4a7491143f75bdd1c8d79848d6f640)
:   ftp: convert timestamps to GMT (to follow RFC 3659)

[7d5e0fef1e](https://github.com/dcache/dcache/commit/7d5e0fef1ef32305282a7aa45300268fdce56070)
:   Revert "pool: handle initial space allocation for existing files"

[22365dcfb6](https://github.com/dcache/dcache/commit/22365dcfb6fb2916dbbcd6b1168a8854d19c978e)
:   pool: fix regression in accounting during file upload

[feddfcc542](https://github.com/dcache/dcache/commit/feddfcc5421c0dffa5d82b8dfe6562343892bdd3)
:   pool: use Throwables.getRootCause(e) inspecting RuntimeException

[691ad40190](https://github.com/dcache/dcache/commit/691ad40190ae54732ec416918aa257f83f0d21b9)
:   packaging: tighten permissions in var directories

[f23954a64a](https://github.com/dcache/dcache/commit/f23954a64a066aaf235afbe476549d43116dd763)
:   billing: update documentation to describe CellAddress

[c5db7fa1cf](https://github.com/dcache/dcache/commit/c5db7fa1cf06dcb89fce88427c3c1ab2d48b1ce7)
:   srm/srmmanager: update documentation about root path

[4ca756f32a](https://github.com/dcache/dcache/commit/4ca756f32afe7cfa9af6228d93b77e2df585ede6)
:   srm,srmmanager: add configuration property to allow easy modification of srm root

[ade17bb00e](https://github.com/dcache/dcache/commit/ade17bb00e2a676151694b34eef9598c1feb5c37)
:   pool: handle initial space allocation for existing files

[f7dae69511](https://github.com/dcache/dcache/commit/f7dae695116f74945c03f62cd7b0d491d8040951)
:   gplazma: extract email from x.509 certificates

[e5e80f491e](https://github.com/dcache/dcache/commit/e5e80f491edf8a78725c20054643e2c36f678917)
:   frontend: expose users email address

[85d4801aae](https://github.com/dcache/dcache/commit/85d4801aae169841e386fd47d57813ba6f6325eb)
:   logback: make socket appender construction depend on log level

[4139d89bcb](https://github.com/dcache/dcache/commit/4139d89bcbfd9f84e77f308b919038591a3cd9bb)
:   frontend: fix NPE when billing is disabled.

[3e596ed3ba](https://github.com/dcache/dcache/commit/3e596ed3baae4a64c77f8f36787a3f0e15f5764c)
:   resilience: remove reference to pnfsmanager property

[3b7013bfd6](https://github.com/dcache/dcache/commit/3b7013bfd611042ea3b3dc24585ebbe797ec6e4b)
:   frontend: fix regression in configuration properties

[d60f09b0c9](https://github.com/dcache/dcache/commit/d60f09b0c9721f6e6c0410710ec315c0da513a05)
:   config: improved description of port numbers

[6ea03d7155](https://github.com/dcache/dcache/commit/6ea03d7155b8e3eb6a4a54ed2deec88b8bce1b27)
:   config: add obsolete|forbidden annotation for dropped properties

[79fde8079e](https://github.com/dcache/dcache/commit/79fde8079e49c1c4eb2ef4926b2e0387f90e9874)
:   resilience: remove stray conflict marker

[bce7615108](https://github.com/dcache/dcache/commit/bce7615108eca0c328338b2885d0f15970b8d568)
:   resilience: make namespace provider properties immutable

[3b372e2b51](https://github.com/dcache/dcache/commit/3b372e2b516873b48ff6cdcfa907e195e4b13dd2)
:   dcache: release dcache-view 1.3.0 for dcache current master

[ba946f112e](https://github.com/dcache/dcache/commit/ba946f112e1b0ce0dee1de22de0541a3e044a0f2)
:   frontend: remove backwards compatible config data

[2a53e1f2e3](https://github.com/dcache/dcache/commit/2a53e1f2e329aaabe77683a4bd325dfa849b19fb)
:   config: add obsolete|forbidden annotation for dropped properties

[745149fb99](https://github.com/dcache/dcache/commit/745149fb995e3390c8e6e65436ce70e93f376b6c)
:   config: add obsolete|forbidden annotation for dropped properties

[728db53ef9](https://github.com/dcache/dcache/commit/728db53ef911ac75fd64c75a307c6ee1c5ce0d20)
:   pnfsmanager: remove obsolete comments from properties file

[c9f38a3b40](https://github.com/dcache/dcache/commit/c9f38a3b408de494ef32713ec944d695a4b3df7f)
:   clarified documentation of gplazma.authz.upload-directory

[6b64e86ab0](https://github.com/dcache/dcache/commit/6b64e86ab040a66dc4c22547069cb3b890b5f646)
:   improved description of upload-directories

[7a9dd29913](https://github.com/dcache/dcache/commit/7a9dd2991372d57dd3083c0d53b03f44d743e0bc)
:   added hint that pnfsmanagers must use the same DB

[670584f7a0](https://github.com/dcache/dcache/commit/670584f7a008f5be4f8118ed521a0ed6dd1c088d)
:   fixed several typos in the documentation

[400b4fc8be](https://github.com/dcache/dcache/commit/400b4fc8be559a060f3af56b9affbc3ddfb77b81)
:   use correct terminology

[b0abb286b6](https://github.com/dcache/dcache/commit/b0abb286b6a98f5b28e0bd382ac9d41425b63ee5)
:   cells: fix TLS support to work with embedded zookeeper

[47afd23844](https://github.com/dcache/dcache/commit/47afd23844bbdce4f79dd997e0ea146e9b64beea)
:   systemtest: fix regression introduced with systemd integration

[5b081219eb](https://github.com/dcache/dcache/commit/5b081219eb5fa025fc0cd3475104fde69affd760)
:   srmclient: give version of srmclient

[e86a92a893](https://github.com/dcache/dcache/commit/e86a92a8938f12318119f7c01328050f2535749e)
:   packages: Fix build of RPM

[43253ec27e](https://github.com/dcache/dcache/commit/43253ec27ec25f71b0e23faa523e3171394dcff9)
:   debian: Add rsyslog config for dCache

[6374ddb965](https://github.com/dcache/dcache/commit/6374ddb965aad4bd1ada35247ff5f5dd473d4fb5)
:   debian: Systemd integration

[7b7369a60a](https://github.com/dcache/dcache/commit/7b7369a60ae5219dde7097cd513a8730647dc384)
:   frontend: avoid sending messages before cell is registered

[c977392bb0](https://github.com/dcache/dcache/commit/c977392bb0d704ac5309ad0ce1f636560fbfa9d6)
:   cells: add tls based encrypted channels for cell communication

[4d27373d98](https://github.com/dcache/dcache/commit/4d27373d9876dd7bef6160d4b8adeeeacafab613)
:   zookeeper: work-around race-condition in zookeeper server shutdown

[387fbbcef4](https://github.com/dcache/dcache/commit/387fbbcef49be7d6d12633523896fc304b96d672)
:   common,system-test: fix minor annoyances with roles in system-test

[dd5fa1ccc3](https://github.com/dcache/dcache/commit/dd5fa1ccc309bb94dd9b402c84f207ab2b4ec91f)
:   webadmin: use new role-based login and support active/deactive roles

[e29757959f](https://github.com/dcache/dcache/commit/e29757959faa79fa65440f9ddd95b3a2d9fa140d)
:   authentication: add support for macaroons

[a18ba8f063](https://github.com/dcache/dcache/commit/a18ba8f06335b99f7dcf65bc3e065a629f44abdd)
:   libs: update jetty to latest 9.4.6.v20170531 release

[3392b5dc0a](https://github.com/dcache/dcache/commit/3392b5dc0ac0f9ad4443edb1f8baa736b92192cf)
:   nfs: merge p2p and stage handling

[4d1e5e66ae](https://github.com/dcache/dcache/commit/4d1e5e66ae82dadd4a9e5e3e8f92471c03cba0f7)
:   dcache-restful-api: restore creationTime on JSONAttributes

[732e938ca4](https://github.com/dcache/dcache/commit/732e938ca4b02ff93deaf41030b02479318a6463)
:   packages: missing rpm server spec line for cell-info dir

[815cf82abe](https://github.com/dcache/dcache/commit/815cf82abe5ad06267ac49f86558cf46a5ef1a59)
:   ssh: fix handling of ssh idle timeout

[96188c7a14](https://github.com/dcache/dcache/commit/96188c7a141ad2b5d69ba0589bffdbeba9a43b44)
:   dcache-restful-api: add cell service API and implementation

[11392b9ae8](https://github.com/dcache/dcache/commit/11392b9ae831a889e9d72016546cfdad8ee31d01)
:   dcache-restful-api:  add RESTful billing service and support

[50f32f5768](https://github.com/dcache/dcache/commit/50f32f5768d05c82e74fd7bf9a854cc0588ede19)
:   dcache (alarms): add support for RESTful frontend messages to alarms service

[ced8d9fe75](https://github.com/dcache/dcache/commit/ced8d9fe75ee277b66d87544b6f77506214801d0)
:   authz: return a list of allowed but unasserted roles

[3ada58ab04](https://github.com/dcache/dcache/commit/3ada58ab040088e5c004ce16e3f3b41d5548f589)
:   common: add javadoc to AccessLatency and RetentionPolicy

[4ccd181edc](https://github.com/dcache/dcache/commit/4ccd181edc62d9e3522d85c90be73372473caab7)
:   common: make AccessLatency and RetentionPolicy more enum like

[4f8b39f7e4](https://github.com/dcache/dcache/commit/4f8b39f7e42077dd2690f51e370dcfe00766144f)
:   system-test: add series of functional test for frontend service

[8d9c3bf7e3](https://github.com/dcache/dcache/commit/8d9c3bf7e309f453efb63d2449702e62aca3eef5)
:   authz: add initial support for Roles

[3cbc1f11da](https://github.com/dcache/dcache/commit/3cbc1f11dabf5b28c157237d93a93cf45ea64085)
:   cells: improve System's ps output

[f31bb95a16](https://github.com/dcache/dcache/commit/f31bb95a16a27bff34f9fc4dc88cd9e0859db98b)
:   chimera: remove redundant code

[1fc6082dc6](https://github.com/dcache/dcache/commit/1fc6082dc632cfd7e0617a3d041a17f4b35bc6aa)
:   security: drop dead code

[789dbcaabc](https://github.com/dcache/dcache/commit/789dbcaabcdab1469877152e45c41e1acb193dd8)
:   webdav: add support for RFC 4331 for reporting space usage

[32db31a0bd](https://github.com/dcache/dcache/commit/32db31a0bd3a15804691ce18942b009c32c73b9b)
:   chimera: keep track of tags usage

[7fc9aaf7d0](https://github.com/dcache/dcache/commit/7fc9aaf7d0a10cd2c0cc47af5c82f68e0c198690)
:   common: repair some minor issues with HistogramModel

[5e286d5382](https://github.com/dcache/dcache/commit/5e286d5382b42f774166f09c32334dda7af57590)
:   common: use null/Optional instead of Double.MAX_VALUE and Double.MIN_VALUE for histogram stats

[4761c1c73a](https://github.com/dcache/dcache/commit/4761c1c73ae323c2e0e6122c516311675bd38e78)
:   frontend: refactor static (configuration) data

[f264c0fb96](https://github.com/dcache/dcache/commit/f264c0fb96bf67f8a2b915061f6109e14e3e6978)
:   spacemanager: dont try to release expired spaces

[c94fc2e3c6](https://github.com/dcache/dcache/commit/c94fc2e3c6d29ba69f033f45954fa8d7cbd0d7b0)
:   srmmanager: use path to support srmSetPermission operations

[4694030f9d](https://github.com/dcache/dcache/commit/4694030f9d7bc17172261d95390f4ba09bab3dde)
:   common: use round instead of floor to bin counting histogram values

[893846e231](https://github.com/dcache/dcache/commit/893846e2314bc29f36da8073efde234a355f2a9e)
:   dcache-restful-api: fix pnsfHandler reference in IdResource

[9b9879837e](https://github.com/dcache/dcache/commit/9b9879837e63ff9228006a16094199df57103a32)
:   Revert "admin: Fix Inconsistent ACL enforcement, RT 9207"

[4032dfbf1a](https://github.com/dcache/dcache/commit/4032dfbf1af1a1c3cd697bb1a6d5dad81c47c5fb)
:   frontend: fix Restriction usage

[5b96a948ce](https://github.com/dcache/dcache/commit/5b96a948ce33e15a9d188aa37760632442315ced)
:   pool: do not throw InterruptedException on Repository#openEntry

[1668b1a66d](https://github.com/dcache/dcache/commit/1668b1a66d227bf2732c2eaa8e1af3f2846112ed)
:   dcache-restful-api: add API to get file attributes from pnfsid

[8f8c79b3f9](https://github.com/dcache/dcache/commit/8f8c79b3f9895775a591df6fec7565f63da516b4)
:   dcache-restful-api: add pnfsid and nlink to all attribute requests

[ad720c2725](https://github.com/dcache/dcache/commit/ad720c2725fcedee24f812c38d8f3dcaf695a668)
:   admin: Fix Inconsistent ACL enforcement, RT 9207

[c42a9dd8ef](https://github.com/dcache/dcache/commit/c42a9dd8efb7351a52dc51349f1a8728aa400ed6)
:   Fix typo in broken commit

[30c3ec4e28](https://github.com/dcache/dcache/commit/30c3ec4e28c3cd8450f55c9ca98adc7f35614165)
:   poolmanager: fix unit-test to avoid race-condition

[6f8da800c6](https://github.com/dcache/dcache/commit/6f8da800c6e9e792406faa9493c058a0bf3d45e2)
:   zookeeper: work-around SessionTracker racy initialisation on startup

[ce61e28cf8](https://github.com/dcache/dcache/commit/ce61e28cf862db4d21ac212444c1fe76336912f7)
:   srmmanager: fix NPE when querying spaces

[80c082c258](https://github.com/dcache/dcache/commit/80c082c258b5ae7b22775045b499a95b8dbad61a)
:   httpd: Fixed table headers in usageInfo

[45a40c3e20](https://github.com/dcache/dcache/commit/45a40c3e209b554abaaf81dcb8de1006f512bba0)
:   ftp: add support for SITE USAGE command

[b864b313ff](https://github.com/dcache/dcache/commit/b864b313ff794bc36df6cac40857681dcbe19367)
:   pool: use StndardOpenOption.CREATE instead of OpenFlags.CREATEFILE

[273c83e048](https://github.com/dcache/dcache/commit/273c83e0488eccecab1376e7a80f0397a91f3644)
:   pool: use Set&lt;OpenOption&gt; instead of Set<Repository.OpenFlags>

[dca973f5b1](https://github.com/dcache/dcache/commit/dca973f5b1e1f101e7ad829731246c2b1a1221ca)
:   pool: update Repository.OpenFlags to implement OpenOption

[b40a81e622](https://github.com/dcache/dcache/commit/b40a81e6223c7e6373630f458b5be38f1e43a702)
:   pool: use OpenOption instead of StandardOpenOption

[554b91b4b8](https://github.com/dcache/dcache/commit/554b91b4b827684dcde62d3dbe9c4af308850130)
:   zookeeper: work-around racy startup

[4003ec7b35](https://github.com/dcache/dcache/commit/4003ec7b35ee724c84268c0598c6025a17276283)
:       dache-restful-api: add log.debug to trace Qos transitions

[a7b3d077ad](https://github.com/dcache/dcache/commit/a7b3d077ad7edc3699f70ea510ce80e5a50fc874)
:   zookeeper: silence ZK server errors

[7e210d8d98](https://github.com/dcache/dcache/commit/7e210d8d989fa84d2f012fbe9aa16b114f17c415)
:   dependencies: remove log4j jar

[0e07ff7a77](https://github.com/dcache/dcache/commit/0e07ff7a7739557eb638206d4003b69bcdcbefea)
:   replica: remove final references to replica manager

[268af787ea](https://github.com/dcache/dcache/commit/268af787ea32848c2c56b30f3ea27763d01aca3d)
:   pool: refactor pool to use StandardOpenOption instead of IoMode

[28c15abb5a](https://github.com/dcache/dcache/commit/28c15abb5add3bd724118ded0bedaaf9fec9d097)
:   ssh: do not cast timeout to int

[c727a0628f](https://github.com/dcache/dcache/commit/c727a0628fb22903a9c3a8da13e7efb5387f8fae)
:   frontend: fix "Attribute is not defined: SIZE" bug

[315c25d312](https://github.com/dcache/dcache/commit/315c25d3127e26d2340e7fd7e15a1cafeff9ce20)
:   pool: fix error message on timeout

[130e160f5c](https://github.com/dcache/dcache/commit/130e160f5ce78e29c3ed8ea73b4aefd59004c73e)
:   pool: add support for mongodb as a backend for medatada

[a912e8393b](https://github.com/dcache/dcache/commit/a912e8393b6ea27856290a3885b4876e03a93d92)
:   info: avoid sending messages too early.

[4ac977ab43](https://github.com/dcache/dcache/commit/4ac977ab439b6dea3caa891c8da969a1fc2e4f2c)
:   frontend,webdav: add supress-wwwauthenticate to allow headers

[f723e96b0c](https://github.com/dcache/dcache/commit/f723e96b0c15cb259b31d304e566602ff57b7f2f)
:   dcache: remove old Replica Manager

[840ba3fb35](https://github.com/dcache/dcache/commit/840ba3fb35874e4795d6140727ab4f12e330d00d)
:   authentication: suppress WWW-Authenticate if requested

[6c37ffbc51](https://github.com/dcache/dcache/commit/6c37ffbc511110c0317c184c28a802d7363dedd1)
:   pool: log why a transfer was forcefully aborted

[5a369e8455](https://github.com/dcache/dcache/commit/5a369e8455873e2c15f3aca4661ece39c1768b6b)
:   webdav: improve logging on transfer failures

[cddc697a38](https://github.com/dcache/dcache/commit/cddc697a3861fde53de8d47658291c3642d41769)
:   webdav: make Milton work-around more robust

[773bc0df99](https://github.com/dcache/dcache/commit/773bc0df99fa99a2ecc1ae8f743fa4b9a71ba691)
:   script-nearline-spi: fix space leak when polling script is used

[0bc04f6b71](https://github.com/dcache/dcache/commit/0bc04f6b7127ba135bcda0f3ffac37de49299cad)
:   http: fix non-/ root for WebDAV and frontend doors

[554fd2a969](https://github.com/dcache/dcache/commit/554fd2a969586a8fc1bd4f3bab84f7d3cd9236b9)
:   authentication: support embedding a bearer token in HTTP URLs

[aa9cdbca04](https://github.com/dcache/dcache/commit/aa9cdbca04083f6218a01f5eff80c65e021efc97)
:   webdav: Fix restriction check when downloading a file

[13b2d7716c](https://github.com/dcache/dcache/commit/13b2d7716c2da201f7a0b6a07547cdc1b964543c)
:   common: factor out PathMapper as common feature

[d7db259922](https://github.com/dcache/dcache/commit/d7db2599227895891d61ba7044cb7e8298e4593d)
:   httpd: Fix incomplete restore list in HA setup

[f2392e4cdd](https://github.com/dcache/dcache/commit/f2392e4cdd15747210e55a46d716bc26e5ae8747)
:   httpd, admin: Fix some hard-coded cell names

[cec2f1fd4b](https://github.com/dcache/dcache/commit/cec2f1fd4b7668453d60bd9b9e9555049395892a)
:   frontend: expose open-id connect to dcache-view

[83ba36f475](https://github.com/dcache/dcache/commit/83ba36f475cb4aeadf982b7ca6f2080c7f298f01)
:   rest-api: include username to the user attributes

[a35a988042](https://github.com/dcache/dcache/commit/a35a988042245c56a91aaae7085b5b792d986896)
:   systemtest: update Globus clients to use generated trust store

[21c0b25341](https://github.com/dcache/dcache/commit/21c0b25341299a02ef808d1ce7031099d6c0f873)
:   systemtest: add transfer tests for UberFTP

[437f24c85c](https://github.com/dcache/dcache/commit/437f24c85c45edebd0c66af7a31cda93ba9cc1e9)
:   frontend: fix problem introduce by jetty update

[db29ebc60c](https://github.com/dcache/dcache/commit/db29ebc60c07398f4488b5a68bcf7e0b63f2897b)
:   Add cascadeConstraints="true" to liquibase dropTable action on pinsv3 table

[3961e557c6](https://github.com/dcache/dcache/commit/3961e557c61347f7d3d31b54521200b7322dc433)
:   nfs: bind vfs cache invalidation with file's layout

[04f929cf1c](https://github.com/dcache/dcache/commit/04f929cf1c27f0c65fd889f848a6e5905503a11a)
:   ceph: map RadosException to corresponding IOException

[a10376ae03](https://github.com/dcache/dcache/commit/a10376ae037a16931660bf28b927bd1514f5ce69)
:   dache-restful-api: add transition state from  DISK to TAPE to QoS description

[a899b42c34](https://github.com/dcache/dcache/commit/a899b42c349c0c300017a5b218cb8572ef9148dc)
:   dcache-restful-api:bug fix: current locality of the file should be considered

[f6175a325d](https://github.com/dcache/dcache/commit/f6175a325df63dddac93faf33daac726357ea7d8)
:   dcache: fix NPEs in TransferInfo time string methods

[0e573b9685](https://github.com/dcache/dcache/commit/0e573b9685a97b9426047105de24fe68a0745f8a)
:   system-test: update test script so curl uses system-test's trust-store

[f77ebaa6c6](https://github.com/dcache/dcache/commit/f77ebaa6c6350f7d6148191019991fb521703df0)
:   nfs: show transfer status when displayed

[a19f27589e](https://github.com/dcache/dcache/commit/a19f27589e39f2c9c844ba0c7ceb9c26a7f5d61c)
:   system-test: update credential-generating script

[ce1deb63a9](https://github.com/dcache/dcache/commit/ce1deb63a93b837faaf9ebcd1243820b51d90f5d)
:   system-test: update disposable-CA generated credentials

[0ebcceaff4](https://github.com/dcache/dcache/commit/0ebcceaff4ed4b4aa950aba775b45038fa333abc)
:   nfs: fix loosing movers due to short timeout

[03436a0da5](https://github.com/dcache/dcache/commit/03436a0da5bff5c3d68e6e7473c763bb6c830776)
:   pinmanager: fix query for getting the number of pins for a file.

[976b783d46](https://github.com/dcache/dcache/commit/976b783d46f81e77689c8fec9aa6a323aa39e1fe)
:   Fix class path generation

[ff52847c4f](https://github.com/dcache/dcache/commit/ff52847c4f1b305d3a3f174c4c5663388a820ba2)
:   Add workaround for Liquibase bug CORE-3001

[9ff9eb91d0](https://github.com/dcache/dcache/commit/9ff9eb91d0fc4836b1c7ef877e460f74d344affc)
:   Update various dependencies

[3cabb610cb](https://github.com/dcache/dcache/commit/3cabb610cbff2bcad82fac641dfdb1ac0c61beb2)
:   Upgrade base libraries to Java 8

[caccb7719d](https://github.com/dcache/dcache/commit/caccb7719dc1a2e511f0793cbfa3fa25f2ff7880)
:   dcache: add timeElapsedSinceWaiting formatted string to TransferInfo

[3d67d4c2ed](https://github.com/dcache/dcache/commit/3d67d4c2eda6e8cc99c97155bc6e00fe49eb3c21)
:   xrootd: allow xrootd to overwrite new empty files. Motivation: Xrootdfs FUSE driver immediately closes a file on creation, then reopens it to write. The file cannot be opened as it already exists. This patch allows the dcache xrootd door to tolerate this behavior.

[5c17c8f6f0](https://github.com/dcache/dcache/commit/5c17c8f6f0c72d7be7f667b63eb4ecc3d2ef3397)
:   ftp: fix (unreleased) regressions in certain FTP commands

[73f60deb2a](https://github.com/dcache/dcache/commit/73f60deb2a5377719ecf382a51f9f0da0e467d1b)
:   ceph: log repository IO error

[6c9e3a1a2a](https://github.com/dcache/dcache/commit/6c9e3a1a2afff727ba086a579fe7d6c9e05a6bf6)
:   writing to existing file is kXR_NotAuthorized, not kXR_Unsupported

[faf5e142df](https://github.com/dcache/dcache/commit/faf5e142dfc78269f6937100edf35d844908ce0c)
:   srm: remove file-level timeout

[90f38a4cec](https://github.com/dcache/dcache/commit/90f38a4cece4b1a6a6d1bfcc54d4b301e79f2a35)
:   ftp: ensure server replies even if there are bugs in dCache

[b97bd275a3](https://github.com/dcache/dcache/commit/b97bd275a35346a4a334b06fc6ef58b3e57906a7)
:   Update code to use ByteUnit

[19ec5b3078](https://github.com/dcache/dcache/commit/19ec5b3078c2c391d391a7be718cfa11b4411d79)
:   chimera: do not update inode generation on atime only update

[c960d46a47](https://github.com/dcache/dcache/commit/c960d46a4779e76047a7df46932e7b503dcdad92)
:   ftp: refactor error handling

[2af2ae8c01](https://github.com/dcache/dcache/commit/2af2ae8c0176f64df9f88127d1d23fbd6e8ed817)
:   nfs: use v4.1 for flex file layout

[7dbbe2b0a2](https://github.com/dcache/dcache/commit/7dbbe2b0a21862f56071e6235c26045ea54da8d5)
:   nfs: do not add Origin to read-only subject

[23ab37a11e](https://github.com/dcache/dcache/commit/23ab37a11e79e4850a4ed15931797a8fe0fe29d7)
:   common: add general-purpose histogram and histogram models, with unit tests

[502e09e561](https://github.com/dcache/dcache/commit/502e09e561cf009b9a421f57027074e0aef1c4a2)
:   dcache-restful-api: migrating file to a an appropriate pool

[68fc74c810](https://github.com/dcache/dcache/commit/68fc74c8102a2b0d1cc8617f18bc6a3cacb37f2e)
:   common: move billing TimeFrame class to the common histograms package

[7b0567fb46](https://github.com/dcache/dcache/commit/7b0567fb46eb3db382229fcd5c885a45e338c25f)
:   parent/dcache: add mail jar to deployment

[23edcbd45e](https://github.com/dcache/dcache/commit/23edcbd45ebbac3f1ff0144ced65359169df462a)
:   movers: fix NPE caused on upload of a zero length file

[0b5141e849](https://github.com/dcache/dcache/commit/0b5141e849c977f527dab91315504396c1842ccd)
:   dcache-restful-api: add unit tests for transfer service

[d7440e22aa](https://github.com/dcache/dcache/commit/d7440e22aa07134e8c1f8992f02709795e0000eb)
:   dcache-restful-api: add transfer service implementation

[26104eac59](https://github.com/dcache/dcache/commit/26104eac59e1bfd621291a66588943be4a22ca93)
:   dcache-restful-api: add transfer collection utilities

[317030ed1f](https://github.com/dcache/dcache/commit/317030ed1f87ec286b607d65974cac0783e6422f)
:   dcache-restful-api: Add RESTful resource for active transfers

[03d529cd68](https://github.com/dcache/dcache/commit/03d529cd688e75ef3f4a137afccefd68b742c20c)
:   dcache-restful-api: Add common abstractions for services supporting RESTful admin resources

[a06c2ec57e](https://github.com/dcache/dcache/commit/a06c2ec57ecab9155688401fa1049559c62c87c0)
:   restful-api: add file mime-type to file attribute

[4da5635cac](https://github.com/dcache/dcache/commit/4da5635cacb61dbfdf7889698d2fddc3e4e63681)
:   dcache: added command to display multiple checksums for a file

[ebceda3297](https://github.com/dcache/dcache/commit/ebceda3297f2783fe6a8ea36d536e7e623f82d0f)
:   dcache,movers: Storing multiple checksums for a file when the client provided checksum is of different type than that of the pool setup.

[dd1b563498](https://github.com/dcache/dcache/commit/dd1b563498819b3208e75ea480bb14b02d608a8f)
:   pool: handle CEPH exceptions

[da55011f64](https://github.com/dcache/dcache/commit/da55011f645532697aaf7a1dfb9f6fb849bdcb9c)
:   pool: fix double close on p2p

[39fbb93c9e](https://github.com/dcache/dcache/commit/39fbb93c9e0107997f1059e76b7bab620b41e08d)
:   srm-client: improve handling of checksum options

[ee81623519](https://github.com/dcache/dcache/commit/ee816235190616bf157f7a9359b3bd4233c22518)
:   nfs: recall file layout on pool disable

[de31f61417](https://github.com/dcache/dcache/commit/de31f6141730fbe86c5e486e29bff23430d7bb82)
:   libs: update to bug fix release nfs4j-0.14.2

[086c1e0136](https://github.com/dcache/dcache/commit/086c1e01369e55f4af13a2969ae65d671fb20d63)
:   common, ftp-client, srm-client: remove 1.7 source and target restrictions on common, ftp and srm client modules

[6c75e48889](https://github.com/dcache/dcache/commit/6c75e488894c7bcfe4f3be58c1dfe758bfe5ce76)
:   chimera: fixed database query for storing multiple checksums for a file.

[dd2b4bf1ea](https://github.com/dcache/dcache/commit/dd2b4bf1eacd13105eb43fc84a19bb95c78e0a52)
:   srmclient: fix handling of checksum options

[75358b3283](https://github.com/dcache/dcache/commit/75358b3283e85581ce9be580b2559bd2b8fcc011)
:   ftp: fix broken commit cfa765bb

[7e2fa7bb9c](https://github.com/dcache/dcache/commit/7e2fa7bb9cd71e669961da1806765e985960464c)
:   ftp: add support for dynamic checksum calculation

[cfa765bb17](https://github.com/dcache/dcache/commit/cfa765bb17095c88623537343fd6e5ac073ffb0c)
:   ftp: add support for command pipelining

[3d21e6e1b6](https://github.com/dcache/dcache/commit/3d21e6e1b693070770ca4c2d3cdae60cf6abcb49)
:   ftp: prevent execution of most commands when unwrapped

[f49a1455c2](https://github.com/dcache/dcache/commit/f49a1455c2ad3e67cf9069185b82472a2f92ad8f)
:   srmclient: fix compatibility with castor

[60b4224372](https://github.com/dcache/dcache/commit/60b422437242c962dd619946f9c196c00f84480e)
:   chimera : handle empty paths elements path2inumber stored procedure

[641dc750ac](https://github.com/dcache/dcache/commit/641dc750ac650ed7b74f7af54695c7778cf2214e)
:   pom: Fix dCache version ready for 3.2.0

[62be2a65c7](https://github.com/dcache/dcache/commit/62be2a65c7380ce7bb61768a8ac1a35d998125c3)
:   [maven-release-plugin] prepare branch 3.1

[5a333bcd3e](https://github.com/dcache/dcache/commit/5a333bcd3ebbb6ce52793953bd45140e0862ee10)
:   [maven-release-plugin] prepare for next development iteration

[3d91506a31](https://github.com/dcache/dcache/commit/3d91506a31b8a68551005a18d47bdd16849347a5)
:   xrootd  : use lower case for checksum algorithm names when replying to checksum queries.




</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js" type="text/javascript"></script>
